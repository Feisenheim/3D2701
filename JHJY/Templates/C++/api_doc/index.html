

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>君弘君易交易系统（C++）</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> 君弘君易交易系统（C++）
          

          
          </a>

          
            
            
              <div class="version">
                0.2.21
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">策略入门</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-install">1. 策略模板使用介绍</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle1-11">1.1. 获取策略模板</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle1-12">1.2. 如何使用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorial">2. 策略编写示例</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle1-21">2.1. 接口测试策略</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">策略文档</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-strategy">1. 策略模板接口</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-11">1.1. 模板配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-12">1.2. 数据类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-13">1.3. 模板接口</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-financial_data">2. 财务数据定义</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-31">2.1. 证券基本数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-32">2.2. 财务报表数据</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-const_define">3. 数据字典</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-21">3.1. 交易市场(所)代码</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-22">3.2. 证券代码表名</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-23">3.3. 实时行情可订阅数据类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#accounttype">3.4. AccountType</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cancelflag">3.5. CancelFlag</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#credittype">3.6. CreditType</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hedgeflag">3.7. HedgeFlag</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderstatus">3.8. OrderStatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#ordertype">3.9. OrderType</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderside">3.10. OrderSide</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#positionside">3.11. PositionSide</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tradereporttype">3.12. TradeReportType</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-data_struct">4. 数据结构</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#securitykdata">4.1. SecurityKdata</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#securitytickdata">4.2. SecurityTickData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#futurestickdata">4.3. FuturesTickData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indextickdata">4.4. IndexTickData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#optionstickdata">4.5. OptionsTickData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tickbytickentrust">4.6. TickByTickEntrust</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tickbyticktrade">4.7. TickByTickTrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tickbytickdata">4.8. TickByTickData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderqueueitemdata">4.9. OrderQueueItemData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderqueuedata">4.10. OrderQueueData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dateupdatedata">4.11. DateUpdateData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#codeinfo">4.12. CodeInfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#qxdata">4.13. QxData</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tradedate">4.14. TradeDate</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#order">4.15. Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#trade">4.16. Trade</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#position">4.17. Position</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cash">4.18. Cash</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indicator">4.19. Indicator</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderreq">4.20. OrderReq</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#orderrsp">4.21. OrderRsp</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#canceldetail">4.22. CancelDetail</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-hist_mdapi">5. 历史行情数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#tick">5.1. 获取历史Tick数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#k">5.2. 获取历史K线数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-43">5.3. 财务数据接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-44">5.4. 辅助函数</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-realtime_mdapi">6. 实时行情数据</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-51">6.1. 订阅</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-52">6.2. 行情数据回调</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-53">6.3. 市场日期变更回调</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-54">6.4. 行情连接状态回调</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tdapi">7. 实盘交易</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-61">7.1. 交易接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-62">7.2. 交易事件</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-63">7.3. 订单</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-64">7.4. 成交</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-65">7.5. 持仓</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-66">7.6. 资金</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-67">7.7. 指标</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-client">8. 客户端注意事项</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-71">8.1. 策略上传与更新</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-72">8.2. 策略启动与停止</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-73">8.3. 下单与资金账号</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-Q&amp;A">9. Q&amp;A</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-81">9.1. 客户端操作问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-82">9.2. 策略模板问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-83">9.3. 行情问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#subtitle2-84">9.4. 其他问题与描述</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">君弘君易交易系统（C++）</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">文档</a> &raquo;</li>
        
      <li>君弘君易交易系统（C++）</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c">
<h1>君弘君易交易系统（C++）<a class="headerlink" href="#c" title="永久链接至标题">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-install"></span><div class="section" id="id1">
<h2>1. 策略模板使用介绍<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle1-11">
<span id="id2"></span><h3>1.1. 获取策略模板<a class="headerlink" href="#subtitle1-11" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>安装好客户端，登陆成功后，进入策略列表，点击创建新策略，建立完成后，客户端会在指定目录放好策略模板，点击策略目录即可打开策略所在目录，其中包含策略开发所需的库和文档。</p>
</div></blockquote>
</div>
<div class="section" id="subtitle1-12">
<span id="id3"></span><h3>1.2. 如何使用<a class="headerlink" href="#subtitle1-12" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>直接打开examples目录中examples.sln文件，即可打开VS工程，编译生成策略程序。</p>
<ol class="arabic">
<li><p>strategy.ini中runmodel说明</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>回测模式（runmodel=1）</dt><dd><p>回测模式是指使用历史时间段的行情来验证策略的逻辑，进行策略逻辑的调试和优化。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>模拟模式（runmodel=2）</dt><dd><p>模拟模式是指使用实时行情来验证策略的逻辑，进一步验证策略在实时行情下的结果。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>实盘模式（runmodel=3）</dt><dd><p>实盘模式是指策略上传云机后，进行真实交易的模式。</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
<li><p>编译Debug版本生成程序，默认是回测模式运行程序，可以在本地进行调试，调试完成后再编译Release版本。</p></li>
<li><p>可以修改strategy.ini中runmodel=2，即可使用当日行情运行策略。</p></li>
<li><p>策略准备好之后，编译Release版本，进入examples/x64/Release目录，将目录中的exe和dll文件压缩成zip格式文件，zip包中不需要带上strategy.ini，后台自动生成此文件。</p></li>
<li><p>通过客户端上传策略到云机，再启动策略运行，策略上传和运行具体操作请见 <a class="reference external" href="index.html#document-client">客户端注意事项</a>。</p></li>
</ol>
</div></blockquote>
</div>
</div>
<span id="document-tutorial"></span><div class="section" id="id1">
<h2>2. 策略编写示例<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle1-21">
<span id="id2"></span><h3>2.1. 接口测试策略<a class="headerlink" href="#subtitle1-21" title="永久链接至标题">¶</a></h3>
<p><strong>请注意：此策略仅展示接口使用，并不能用于生产交易</strong></p>
<p>功能描述:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>例子展示了接口的简单使用，订阅实时Tick和Bar行情，总共下了200笔订单。
在回调处理函数中输出委托、订单状态、成交等数据。可以设置多个定时任务，也可以取消定时任务。
</pre></div>
</div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifdef _WIN32</span>
<span class="cp">#include</span> <span class="cpf">&lt;Windows.h&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;thread&gt;</span><span class="cp"></span>

<span class="cp">#include</span> <span class="cpf">&quot;md_api.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;strategy_api.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;trade_api.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">kStockAccount</span> <span class="o">=</span> <span class="s">&quot;6814&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">kTestProductId</span> <span class="o">=</span> <span class="s">&quot;SZ.000001&quot;</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">kMaxOrderCount</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">orderCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">g_orderids</span><span class="p">;</span>

<span class="c1">// 返回当前日期时间，格式为YYYYMMDDhhmmss</span>
<span class="k">static</span> <span class="kt">uint64_t</span> <span class="nf">datetime_now</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">tm</span> <span class="n">tmval</span><span class="p">;</span>
    <span class="kt">time_t</span> <span class="n">time_now</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
    <span class="n">errno_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">localtime_s</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tmval</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_now</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">err</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="nl">err</span> <span class="p">:</span> <span class="n">err</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#else</span>
    <span class="n">errno</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">tm</span><span class="o">*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">time_now</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmval</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">errno</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="nl">errno</span> <span class="p">:</span> <span class="n">errno</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#endif</span>

    <span class="kt">uint64_t</span> <span class="n">ndate</span> <span class="o">=</span> <span class="p">(</span><span class="n">tmval</span><span class="p">.</span><span class="n">tm_year</span> <span class="o">+</span> <span class="mi">1900</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10000</span> <span class="o">+</span> <span class="p">(</span><span class="n">tmval</span><span class="p">.</span><span class="n">tm_mon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span>
                    <span class="n">tmval</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">;</span>
    <span class="kt">uint64_t</span> <span class="n">ntime</span> <span class="o">=</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_hour</span> <span class="o">*</span> <span class="mi">10000</span> <span class="o">+</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_min</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">ndate</span> <span class="o">*</span> <span class="mi">1000000</span> <span class="o">+</span> <span class="n">ntime</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 返回当前日期时间，格式为YYYY-MM-DD hh:mm:ss</span>
<span class="k">static</span> <span class="n">string</span> <span class="nf">str_datetime_now</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">tm</span> <span class="n">tmval</span><span class="p">;</span>
    <span class="kt">time_t</span> <span class="n">time_now</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
<span class="cp">#ifdef _WIN32</span>
    <span class="n">errno_t</span> <span class="n">err</span> <span class="o">=</span> <span class="n">localtime_s</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tmval</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">time_now</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#else</span>
    <span class="n">errno</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">tm</span><span class="o">*</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">localtime_r</span><span class="p">(</span><span class="o">&amp;</span><span class="n">time_now</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tmval</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#endif</span>

    <span class="kt">char</span> <span class="n">szTemp</span><span class="p">[</span><span class="mi">32</span><span class="p">];</span>
    <span class="n">snprintf</span><span class="p">(</span><span class="n">szTemp</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">szTemp</span><span class="p">),</span> <span class="s">&quot;%04d-%02d-%02d %02d:%02d:%02d&quot;</span><span class="p">,</span>
            <span class="n">tmval</span><span class="p">.</span><span class="n">tm_year</span> <span class="o">+</span> <span class="mi">1900</span><span class="p">,</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_mon</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_mday</span><span class="p">,</span>
            <span class="n">tmval</span><span class="p">.</span><span class="n">tm_hour</span><span class="p">,</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_min</span><span class="p">,</span> <span class="n">tmval</span><span class="p">.</span><span class="n">tm_sec</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">szTemp</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 证券Tick行情回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnSecurityTick</span><span class="p">(</span><span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">res</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 根据Tick行情，使用Tick成交价下单</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">res</span><span class="o">-&gt;</span><span class="n">match</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">orderCount</span> <span class="o">&lt;</span> <span class="n">kMaxOrderCount</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
        <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">td_open_long</span><span class="p">(</span><span class="n">kStockAccount</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span>
                        <span class="n">res</span><span class="o">-&gt;</span><span class="n">match</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span>
                        <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">g_orderids</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">order_id</span><span class="p">);</span>
            <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long, order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_id</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, symbol: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">symbol</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, price: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">match</span> <span class="o">/</span> <span class="mf">10000.0</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, volume: &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long failed, code: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="n">orderCount</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 证券K线行情回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnSecurityKdata</span><span class="p">(</span><span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">res</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 根据K线行情，使用这一分钟开盘价下单</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">orderCount</span> <span class="o">&lt;</span> <span class="n">kMaxOrderCount</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
        <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">td_open_long</span><span class="p">(</span><span class="n">kStockAccount</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span>
                        <span class="n">res</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span>
                        <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">g_orderids</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">order_id</span><span class="p">);</span>
            <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long, order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_id</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, symbol: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">symbol</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, price: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">open</span> <span class="o">/</span> <span class="mf">10000.0</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, volume: &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long failed, code: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="n">orderCount</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">OnTickbytickData</span><span class="p">(</span><span class="n">TickByTickData</span><span class="o">*</span> <span class="n">tbt</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ostringstream</span> <span class="n">oss</span><span class="p">;</span>
    <span class="kt">int32_t</span> <span class="n">channel_no</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int64_t</span> <span class="n">seq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">tbt</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">==</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">channel_no</span> <span class="o">=</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">.</span><span class="n">entrust</span><span class="p">.</span><span class="n">channel_no</span><span class="p">;</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">.</span><span class="n">entrust</span><span class="p">.</span><span class="n">seq</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">channel_no</span> <span class="o">=</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">.</span><span class="n">trade</span><span class="p">.</span><span class="n">channel_no</span><span class="p">;</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">.</span><span class="n">trade</span><span class="p">.</span><span class="n">seq</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">oss</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnTickbytickData: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">tbt</span><span class="o">-&gt;</span><span class="n">symbol</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span>
        <span class="o">&lt;&lt;</span> <span class="n">channel_no</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">seq</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">oss</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 市场日期变更回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnDateUpdate</span><span class="p">(</span><span class="n">DateUpdateData</span><span class="o">*</span> <span class="n">dud</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ostringstream</span> <span class="n">oss</span><span class="p">;</span>
    <span class="n">oss</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnDateUpdate: market: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">dud</span><span class="o">-&gt;</span><span class="n">market</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, date: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">dud</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">oss</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 成交回报回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnTradeReport</span><span class="p">(</span><span class="k">const</span> <span class="n">Trade</span><span class="o">*</span> <span class="n">trade</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 输出成交回报到strategy目录的日志中</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnTradeReport: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">strategy_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">strategy_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">run_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">run_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">cl_order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">cl_order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">symbol: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">symbol</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">account_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">account_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">account_type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">account_type</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">date: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">date</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">trade_seqno: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">trade_seqno</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">side: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">side</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">order_type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">order_type</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">exec_type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">exec_type</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">volume: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">volume</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">price: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">turnover: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">turnover</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">transact_time: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">transact_time</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 委托应答回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnOrderRsp</span><span class="p">(</span><span class="k">const</span> <span class="n">OrderRsp</span><span class="o">*</span> <span class="n">order_rsp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 输出委托应答到strategy目录的日志中</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OrderRsp: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">cl_order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">cl_order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">err_code: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_code</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">err_msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_msg</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 委托状态回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnOrderStatus</span><span class="p">(</span><span class="k">const</span> <span class="n">Order</span><span class="o">*</span> <span class="n">res</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 输出委托状态到strategy目录的日志中</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnOrderStatus: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">strategy_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">strategy_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">run_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">run_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">cl_order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">cl_order_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">symbol: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">symbol</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">account_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">account_id</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">account_type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">account_type</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">price: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">marketdata_time: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">marketdata_time</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">create_time: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">create_time</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">update_time: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">update_time</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">side: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">side</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">order_status: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">order_status</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">filled_volume: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">filled_volume</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span>
            <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">filled_turnover: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">filled_turnover</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 行情服务状态回调</span>
<span class="kt">void</span> <span class="nf">OnMdStatusChange</span><span class="p">(</span><span class="kt">int</span> <span class="n">conn_status</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnMdStatusChange: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">conn_status</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="c1">// 定时回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnStrategyTimer</span><span class="p">(</span><span class="kt">int</span> <span class="n">interval</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="c1">// osstream &lt;&lt; &quot;OnStrategyTimer: &quot; &lt;&lt; interval &lt;&lt; &quot;ms&quot;;</span>
    <span class="c1">// strategy_log(StrategyLogLevel_Info, osstream.str().data());</span>

    <span class="c1">// 定时任务中只调用一次get_security_ticks，作为示例</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">security_ticks_called</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">security_ticks_called</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">security_ticks_called</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">sd</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">get_security_ticks</span><span class="p">(</span><span class="s">&quot;SH.600000,SZ.000001&quot;</span><span class="p">,</span> <span class="s">&quot;2017-1-3 10:0:0&quot;</span><span class="p">,</span>
                                    <span class="s">&quot;2017-1-3 16:0:0&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>

        <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;get_security_ticks: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">ret</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, count:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">count</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;, sd: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sd</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>

        <span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">last_sds</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">last_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">get_last_security_nticks</span><span class="p">(</span><span class="s">&quot;SH.600000,SZ.000001&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">last_sds</span><span class="p">,</span>
                                    <span class="o">&amp;</span><span class="n">last_count</span><span class="p">);</span>
        <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;get_last_security_nticks: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">ret</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;, count:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">last_count</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, sd: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">last_sds</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="c1">// 定时任务中只调用一次get_security_ticks，作为示例</span>
    <span class="k">static</span> <span class="kt">bool</span> <span class="n">security_kdata_called</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">security_kdata_called</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">security_kdata_called</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">sd</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">get_security_kdata</span><span class="p">(</span><span class="s">&quot;SH.600000&quot;</span><span class="p">,</span> <span class="s">&quot;2018/6/1&quot;</span><span class="p">,</span> <span class="s">&quot;2018/6/1&quot;</span><span class="p">,</span>
                                    <span class="s">&quot;1min&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>

        <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;get_security_kdata: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">ret</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, count:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">count</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;, sd: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sd</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">interval</span> <span class="o">==</span> <span class="mi">5000</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">orderCount</span> <span class="o">&lt;</span> <span class="n">kMaxOrderCount</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// 开盘时间段定时下一个单</span>
            <span class="kt">uint64_t</span> <span class="n">ndatetime</span> <span class="o">=</span> <span class="n">datetime_now</span><span class="p">();</span>
            <span class="kt">uint64_t</span> <span class="n">ntime</span> <span class="o">=</span> <span class="n">ndatetime</span> <span class="o">%</span> <span class="mi">1000000</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ntime</span> <span class="o">&gt;=</span> <span class="mi">90000</span> <span class="o">&amp;&amp;</span> <span class="n">ntime</span> <span class="o">&lt;=</span> <span class="mi">150000</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
                <span class="kt">uint32_t</span> <span class="n">nlastprice</span> <span class="o">=</span> <span class="mi">101300</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">ncount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">stickdata</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
                <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="n">get_last_security_nticks</span><span class="p">(</span><span class="n">kTestProductId</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stickdata</span><span class="p">,</span>
                                                <span class="o">&amp;</span><span class="n">ncount</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">stickdata</span> <span class="o">&amp;&amp;</span> <span class="n">ncount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="n">nlastprice</span> <span class="o">=</span> <span class="n">stickdata</span><span class="o">-&gt;</span><span class="n">match</span><span class="p">;</span>
                <span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
                <span class="n">rc</span> <span class="o">=</span> <span class="n">td_open_long</span><span class="p">(</span><span class="n">kStockAccount</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="n">kTestProductId</span><span class="p">,</span>
                                <span class="n">nlastprice</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span>
                                <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
                <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">g_orderids</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">order_id</span><span class="p">);</span>
                    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long, order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">order_id</span>
                            <span class="o">&lt;&lt;</span> <span class="s">&quot;, symbol: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">kTestProductId</span>
                            <span class="o">&lt;&lt;</span> <span class="s">&quot;, price: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">nlastprice</span> <span class="o">/</span> <span class="mf">10000.0</span>
                            <span class="o">&lt;&lt;</span> <span class="s">&quot;, volume: &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">100</span><span class="p">;</span>
                    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_open_long failed, code: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                            <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
                    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
                <span class="p">}</span>

                <span class="n">orderCount</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// 每5秒钟更新一次参数和自定义指标</span>
        <span class="kt">char</span> <span class="n">szJsonContent</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
        <span class="n">snprintf</span><span class="p">(</span>
            <span class="n">szJsonContent</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">szJsonContent</span><span class="p">),</span>
            <span class="s">&quot;[{</span><span class="se">\&quot;</span><span class="s">key</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">DateTime</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">DateTime</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">type</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">datetime</span><span class="se">\&quot;</span><span class="s">, &quot;</span>
            <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">}, {</span><span class="se">\&quot;</span><span class="s">key</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">OrderNum</span><span class="se">\&quot;</span><span class="s">, &quot;</span>
            <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">OrderNum</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">type</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">int</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">:%zu}]&quot;</span><span class="p">,</span>
            <span class="n">str_datetime_now</span><span class="p">().</span><span class="n">data</span><span class="p">(),</span> <span class="n">g_orderids</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
        <span class="n">strategy_report_indexes</span><span class="p">(</span><span class="n">szJsonContent</span><span class="p">);</span>
        <span class="n">strategy_report_params</span><span class="p">(</span><span class="n">szJsonContent</span><span class="p">);</span>

        <span class="c1">// 每次撤最后一单</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">orderCount</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">CancelDetail</span><span class="o">*</span> <span class="n">cancel_list</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">string</span><span class="o">&amp;</span> <span class="n">orderId</span> <span class="o">=</span> <span class="n">g_orderids</span><span class="p">.</span><span class="n">back</span><span class="p">();</span>
            <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="n">td_cancel_order</span><span class="p">(</span><span class="n">kStockAccount</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span>
                                    <span class="n">orderId</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">cancel_list</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_cancel_order, order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">orderId</span>
                        <span class="o">&lt;&lt;</span> <span class="s">&quot;, count: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;, cancel_order_id: &quot;</span>
                        <span class="o">&lt;&lt;</span> <span class="n">cancel_list</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">cancel_order_id</span><span class="p">;</span>
                <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;td_cancel_order failed, code: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                        <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">)</span>
                        <span class="o">&lt;&lt;</span> <span class="s">&quot;, order_id: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">orderId</span><span class="p">;</span>
                <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">OnDayTaskCallback</span><span class="p">(</span><span class="kt">int</span> <span class="n">time</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnDayTaskCallback: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">time</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnDayTaskCallback: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">time</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">OnExit</span><span class="p">(</span><span class="kt">int</span> <span class="n">reason</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 退出回调做一些资源回收等最终操作</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;OnExit, reason: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">strategy_exit_reason</span><span class="p">(</span><span class="n">reason</span><span class="p">);</span>
    <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">message</span> <span class="o">=</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
<span class="p">}</span>

<span class="cp">#ifdef _WIN32</span>
<span class="kt">bool</span> <span class="nf">CtrlHandler</span><span class="p">(</span><span class="n">DWORD</span> <span class="n">fdwctrltype</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">fdwctrltype</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// handle the ctrl-c signal.</span>
        <span class="k">case</span> <span class="nl">CTRL_C_EVENT</span><span class="p">:</span>
            <span class="n">strategy_exit</span><span class="p">();</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">true</span><span class="p">);</span>

        <span class="k">default</span><span class="o">:</span>
            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">#endif</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
<span class="c1">// 处理命令行CTRL-C退出信号</span>
<span class="cp">#ifdef _WIN32</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">SetConsoleCtrlHandler</span><span class="p">((</span><span class="n">PHANDLER_ROUTINE</span><span class="p">)</span><span class="n">CtrlHandler</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;ERROR: Could not set console control handler&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span>
                    <span class="s">&quot;ERROR: Could not set console control handler&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#endif</span>

    <span class="c1">// async = 1表示启动一个新线程执行事件循环</span>
    <span class="c1">// async = 0表示主线程执行事件循环，主线程会在strategy_run运行一个循环</span>
    <span class="kt">int</span> <span class="n">async</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// 初始化策略</span>
    <span class="n">ostringstream</span> <span class="n">osstream</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rc</span> <span class="o">=</span> <span class="n">strategy_init</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!=</span> <span class="n">rc</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_init failed: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="k">goto</span> <span class="n">OnProgramExit</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_init success&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="s">&quot;strategy_init success&quot;</span><span class="p">);</span>

    <span class="c1">// 设置交易相关回调事件处理函数</span>
    <span class="n">td_set_trade_report_callback</span><span class="p">(</span><span class="n">OnTradeReport</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">td_set_order_rsp_callback</span><span class="p">(</span><span class="n">OnOrderRsp</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">td_set_order_status_callback</span><span class="p">(</span><span class="n">OnOrderStatus</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// 设置实时行情回调事件处理函数</span>
    <span class="n">md_set_status_change_callback</span><span class="p">(</span><span class="n">OnMdStatusChange</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// 暂时不通过行情触发下单，定时器中下单</span>
    <span class="c1">// md_set_security_tick_callback(OnSecurityTick, NULL);</span>
    <span class="c1">// md_set_security_kdata_callback(OnSecurityKdata, NULL);</span>

    <span class="n">md_set_tickbytick_callback</span><span class="p">(</span><span class="n">OnTickbytickData</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">md_set_date_update_callback</span><span class="p">(</span><span class="n">OnDateUpdate</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// 设置定时任务回调处理函数</span>
    <span class="n">strategy_set_timer_callback</span><span class="p">(</span><span class="n">OnStrategyTimer</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// 设置策略退出回调处理函数</span>
    <span class="n">strategy_set_exit_callback</span><span class="p">(</span><span class="n">OnExit</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// 设置一个5s定时任务</span>
    <span class="n">strategy_set_timer</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>

    <span class="n">strategy_set_day_schedule_task_callback</span><span class="p">(</span><span class="n">OnDayTaskCallback</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">strategy_set_day_schedule_task</span><span class="p">(</span><span class="mi">85000</span><span class="p">);</span>
    <span class="n">strategy_set_day_schedule_task</span><span class="p">(</span><span class="mi">223700</span><span class="p">);</span>
    <span class="n">strategy_set_day_schedule_task</span><span class="p">(</span><span class="mi">223900</span><span class="p">);</span>

    <span class="c1">// 订阅一个Tick，多个K线行情</span>
    <span class="n">md_subscribe</span><span class="p">(</span><span class="s">&quot;SZ.000011.tick,SH.600011.bar,SH.000001.index&quot;</span><span class="p">);</span>
    <span class="c1">//md_subscribe(&quot;SZ.*.ZW,SZ.*.ZC&quot;);</span>
    <span class="c1">//md_subscribe(&quot;SZ.*.tick&quot;);</span>

    <span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">last_sds</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">last_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">get_last_security_nticks</span><span class="p">(</span><span class="s">&quot;SH.600000,SZ.000001&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">last_sds</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">last_count</span><span class="p">);</span>

    <span class="c1">// 运行策略</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">strategy_run</span><span class="p">(</span><span class="n">async</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
        <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_run failed: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Error</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_run success&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="s">&quot;strategy_run success&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// 主线程等待策略线程退出</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">strategy_get_exec_status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">StrategyExecStatus_Term</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// sleep 500ms</span>
        <span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">500</span><span class="p">));</span>
    <span class="p">}</span>

<span class="nl">OnProgramExit</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">strategy_get_exec_status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">StrategyExecStatus_Term</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">strategy_exit</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">rc</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
            <span class="n">osstream</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_exit failed: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">rc</span>
                    <span class="o">&lt;&lt;</span> <span class="s">&quot;, msg: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">rc</span><span class="p">);</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="n">osstream</span><span class="p">.</span><span class="n">str</span><span class="p">().</span><span class="n">data</span><span class="p">());</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;strategy_exit success&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">strategy_log</span><span class="p">(</span><span class="n">StrategyLogLevel_Info</span><span class="p">,</span> <span class="s">&quot;strategy_exit success&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-strategy"></span><div class="section" id="id1">
<h2>1. 策略模板接口<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-11">
<span id="id2"></span><h3>1.1. 模板配置<a class="headerlink" href="#subtitle2-11" title="永久链接至标题">¶</a></h3>
<p>策略模板配置文件，在策略程序当前目录中，配置文件中每行 <code class="docutils literal notranslate"><span class="pre">;</span> <span class="pre">或</span> <span class="pre">#</span></code> 后的内容为注释，
模板只有一个配置文件：</p>
<ul class="simple">
<li><dl class="simple">
<dt>配置文件 – strategy.ini:</dt><dd><p>回测和模拟配置文件均有客户端在新建回测和新建模拟时生成，实盘配置文件由后台自动生成。</p>
</dd>
</dl>
</li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># 每行; 或 #后的内容为注释，如果值中包含; # = \这四种特殊字符，需要使用\转义一下，例如：</span>
<span class="cp"># haveEscapeValue=AB\;AB\#AB\=AB\\</span>
<span class="cp"># 配置解析后的haveEscapeValue值为AB;AB#AB=AB\</span>

<span class="cp"># 运行模式，1：回测，2：模拟，3：实盘</span>
<span class="cp"># runmodel=3</span>

<span class="cp"># 策略id</span>
<span class="cp"># strategyid=X-57875142510000-7100-41000000</span>

<span class="cp"># 策略运行实例id</span>
<span class="cp"># runid=S-01169542510000-1456-50000000</span>

<span class="cp"># 系统账号</span>
<span class="cp"># sysAccid=A-93014542510000-9000-10000000</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-12">
<span id="id3"></span><h3>1.2. 数据类型<a class="headerlink" href="#subtitle2-12" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>策略日志级别</p></li>
</ol>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>日志级别</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StrategyLogLevel_Debug</p></td>
<td><p>1</p></td>
<td><p>调试日志</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyLogLevel_Info</p></td>
<td><p>2</p></td>
<td><p>信息日志</p></td>
</tr>
<tr class="row-even"><td><p>StrategyLogLevel_Warn</p></td>
<td><p>3</p></td>
<td><p>警告日志</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyLogLevel_Error</p></td>
<td><p>4</p></td>
<td><p>错误日志</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p>策略执行状态</p></li>
</ol>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>执行状态</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StrategyExecStatus_Ok</p></td>
<td><p>0</p></td>
<td><p>策略正常执行</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyExecStatus_Initializing</p></td>
<td><p>1</p></td>
<td><p>策略库初始化中</p></td>
</tr>
<tr class="row-even"><td><p>StrategyExecStatus_LineError</p></td>
<td><p>2</p></td>
<td><p>行情或交易线路出现异常</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyExecStatus_Term</p></td>
<td><p>3</p></td>
<td><p>策略已退出执行</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li><p>策略退出原因</p></li>
</ol>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 13%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>登出原因</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>StrategyExitReason_Api</p></td>
<td><p>0</p></td>
<td><p>用户调用登出API，使策略登出</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyExitReason_Client</p></td>
<td><p>1</p></td>
<td><p>客户端请求登出</p></td>
</tr>
<tr class="row-even"><td><p>StrategyExitReason_Error</p></td>
<td><p>2</p></td>
<td><p>发生错误，退出执行</p></td>
</tr>
<tr class="row-odd"><td><p>StrategyExitReason_BacktestFinish</p></td>
<td><p>3</p></td>
<td><p>回测结束，退出执行</p></td>
</tr>
<tr class="row-even"><td><p>StrategyExitReason_AutoExit</p></td>
<td><p>4</p></td>
<td><p>策略到达事先设置的自动退出时间，自动退出</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subtitle2-13">
<span id="id4"></span><h3>1.3. 模板接口<a class="headerlink" href="#subtitle2-13" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>初始化策略</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413strategy_initPKcPKc">
<span id="_CPPv313strategy_initPKcPKc"></span><span id="_CPPv213strategy_initPKcPKc"></span><span id="strategy_init__cCP.cCP"></span>int <code class="sig-name descname">strategy_init</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>config_dir</em> = NULL, <em class="property">const</em> char *<em>log_dir</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413strategy_initPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>根据配置文件进行策略初始化。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config_dir (const char*)</strong> – 策略配置文件目录，默认是当前可执行程序目录</p></li>
<li><p><strong>log_dir (const char*)</strong> – 策略日志文件目录，默认是当前可执行程序目录</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>退出并停止策略运行</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413strategy_exitv">
<span id="_CPPv313strategy_exitv"></span><span id="_CPPv213strategy_exitv"></span><span id="strategy_exit"></span>int <code class="sig-name descname">strategy_exit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413strategy_exitv" title="永久链接至目标">¶</a><br /></dt>
<dd><p>该函数调用后strategy_run接口将退出运行。</p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="3">
<li><p>策略运行</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412strategy_runi">
<span id="_CPPv312strategy_runi"></span><span id="_CPPv212strategy_runi"></span><span id="strategy_run__i"></span>int <code class="sig-name descname">strategy_run</code><span class="sig-paren">(</span>int <em>async</em> = 0<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412strategy_runi" title="永久链接至目标">¶</a><br /></dt>
<dd><dl class="simple">
<dt>同步模式下:</dt><dd><p>调用接口的线程阻塞执行策略事件循环，直到策略正常退出或者异常终止。
所有策略回调函数(包括行情，交易接口回调)都会在调用线程中调用。</p>
</dd>
<dt>异步模式下:</dt><dd><p>开启单独的线程执行策略事件循环，直到策略正常退出或者异常终止。
所有策略回调函数(包括行情，交易接口回调)都会在新开启线程中调用。</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>async (int)</strong> – 0 ==&gt; 同步模式, 非0 ==&gt; 异步模式</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="4">
<li><p>日志接口</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412strategy_log16StrategyLogLevelPKcb">
<span id="_CPPv312strategy_log16StrategyLogLevelPKcb"></span><span id="_CPPv212strategy_log16StrategyLogLevelPKcb"></span><span id="strategy_log__StrategyLogLevel.cCP.b"></span>void <code class="sig-name descname">strategy_log</code><span class="sig-paren">(</span>StrategyLogLevel <em>level</em>, <em class="property">const</em> char *<em>message</em>, bool <em>is_gbk</em> = false<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412strategy_log16StrategyLogLevelPKcb" title="永久链接至目标">¶</a><br /></dt>
<dd><p>策略开发者使用此接口，可以记录日志到指定的策略日志文件中，每天一个文件。
日志文件最终编码格式为utf8</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level (StrategyLogLevel)</strong> – 日志级别</p></li>
<li><p><strong>message (const char*)</strong> – 日志消息，默认输入的是utf8编码</p></li>
<li><p><strong>is_gbk (bool)</strong> – 当输入日志为gbk时传入true，默认是false</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="5">
<li><p>获取策略执行状态</p></li>
</ol>
<dl class="function">
<dt id="_CPPv424strategy_get_exec_statusv">
<span id="_CPPv324strategy_get_exec_statusv"></span><span id="_CPPv224strategy_get_exec_statusv"></span><span id="strategy_get_exec_status"></span>void <code class="sig-name descname">strategy_get_exec_status</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424strategy_get_exec_statusv" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取策略当前执行状态，状态参考StrategyExecStatus定义</p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>返回策略执行的状态</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="6">
<li><p>获取当前日期时间</p></li>
</ol>
<dl class="function">
<dt id="_CPPv421strategy_get_datetimePiPi">
<span id="_CPPv321strategy_get_datetimePiPi"></span><span id="_CPPv221strategy_get_datetimePiPi"></span><span id="strategy_get_datetime__iP.iP"></span>int <code class="sig-name descname">strategy_get_datetime</code><span class="sig-paren">(</span>int *<em>o_date</em>, int *<em>o_time</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421strategy_get_datetimePiPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>回测模式 - 返回当前执行到的回测日期和时间
实盘和模拟模式 - 返回当前机器的系统时间</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o_date (int*)</strong> – 当前执行时刻的日期</p></li>
<li><p><strong>o_time (int*)</strong> – 当前执行时刻的时间</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>返回策略当前执行所在的时间点</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="7">
<li><p>定时器回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv421StrategyTimerCallback">
<span id="_CPPv321StrategyTimerCallback"></span><span id="_CPPv221StrategyTimerCallback"></span><span id="StrategyTimerCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">StrategyTimerCallback</code>)<span class="sig-paren">(</span>int interval, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421StrategyTimerCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>定时任务回调函数类型。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval (int)</strong> – 定时器触发间隔(毫秒)</p></li>
<li><p><strong>user_data (void)</strong> – 用户自定义数据，在设置接口中传入，回调时返回</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="8">
<li><p>设置定时器回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.strategy_set_timer_callback">
int <code class="sig-name descname">strategy_set_timer_callback</code><span class="sig-paren">(</span>StrategyTimerCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.strategy_set_timer_callback" title="永久链接至目标">¶</a></dt>
<dd><p>如果要处理定时任务，使用此接口设置回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>StrategyTimerCallback</em>) – 登陆回调函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义数据，传入回调函数要使用的数据</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="9">
<li><p>设置定时器触发时间间隔</p></li>
</ol>
<dl class="function">
<dt id="_CPPv418strategy_set_timeri">
<span id="_CPPv318strategy_set_timeri"></span><span id="_CPPv218strategy_set_timeri"></span><span id="strategy_set_timer__i"></span>int <code class="sig-name descname">strategy_set_timer</code><span class="sig-paren">(</span>int <em>interval</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418strategy_set_timeri" title="永久链接至目标">¶</a><br /></dt>
<dd><p>设定一个时间间隔的定时任务，interval单位为毫秒(ms)。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>interval (int)</strong> – 定时器的时间间隔</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="10">
<li><p>取消指定时间间隔的定时器</p></li>
</ol>
<dl class="function">
<dt id="_CPPv420strategy_clear_timeri">
<span id="_CPPv320strategy_clear_timeri"></span><span id="_CPPv220strategy_clear_timeri"></span><span id="strategy_clear_timer__i"></span>int <code class="sig-name descname">strategy_clear_timer</code><span class="sig-paren">(</span>int <em>interval</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv420strategy_clear_timeri" title="永久链接至目标">¶</a><br /></dt>
<dd><p>取消一个时间间隔的定时任务，interval单位为毫秒(ms)。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>interval (int)</strong> – 定时器的时间间隔</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="11">
<li><p>每日定时任务回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv431StrategyDayScheduleTaskCallback">
<span id="_CPPv331StrategyDayScheduleTaskCallback"></span><span id="_CPPv231StrategyDayScheduleTaskCallback"></span><span id="StrategyDayScheduleTaskCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">StrategyDayScheduleTaskCallback</code>)<span class="sig-paren">(</span>int time, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv431StrategyDayScheduleTaskCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>每天某个时间点的定时任务，time精确到分钟。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time (int)</strong> – 定时任务执行时间，格式为：HHMMSS</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义数据，在设置接口中传入，回调时返回</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="12">
<li><p>设置每日定时任务回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.strategy_set_day_schedule_task_callback">
int <code class="sig-name descname">strategy_set_day_schedule_task_callback</code><span class="sig-paren">(</span>StrategyDayScheduleTaskCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.strategy_set_day_schedule_task_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置交易日定时任务回调，每日不同时间点的任务，在回调函数中使用time字段区分，一个时间点执行一种任务。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>StrategyDayScheduleTaskCallback</em>) – 每日定时任务回调函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义数据，传入回调函数要使用的数据</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="13">
<li><p>设置每日定时任务时间点</p></li>
</ol>
<dl class="function">
<dt id="_CPPv430strategy_set_day_schedule_taski">
<span id="_CPPv330strategy_set_day_schedule_taski"></span><span id="_CPPv230strategy_set_day_schedule_taski"></span><span id="strategy_set_day_schedule_task__i"></span>int <code class="sig-name descname">strategy_set_day_schedule_task</code><span class="sig-paren">(</span>int <em>time</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv430strategy_set_day_schedule_taski" title="永久链接至目标">¶</a><br /></dt>
<dd><p>可以设置多个时间点，每个时间点设置后就会每天定时被执行，time格式为HHMMSS。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>time (int)</strong> – 定时任务执行时间，格式为：HHMMSS</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="14">
<li><p>取消指定时间点的每日定时任务</p></li>
</ol>
<dl class="function">
<dt id="_CPPv432strategy_clear_day_schedule_taski">
<span id="_CPPv332strategy_clear_day_schedule_taski"></span><span id="_CPPv232strategy_clear_day_schedule_taski"></span><span id="strategy_clear_day_schedule_task__i"></span>int <code class="sig-name descname">strategy_clear_day_schedule_task</code><span class="sig-paren">(</span>int <em>time</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv432strategy_clear_day_schedule_taski" title="永久链接至目标">¶</a><br /></dt>
<dd><p>取消某一个时间点的每日定时任务，time格式为HHMMSS。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>time (int)</strong> – 定时任务执行时间，格式为：HHMMSS</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="15">
<li><p>执行一次策略事件处理循环</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413strategy_polli">
<span id="_CPPv313strategy_polli"></span><span id="_CPPv213strategy_polli"></span><span id="strategy_poll__i"></span>int <code class="sig-name descname">strategy_poll</code><span class="sig-paren">(</span>int <em>timeout</em> = -1<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413strategy_polli" title="永久链接至目标">¶</a><br /></dt>
<dd><p>策略程序主动执行一次策略时间循环，仅处理一个事件。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>timeout (int)</strong> – 等待下一个事件超时时间(毫秒)，0 - 不等待，-1 - 无限等待直到一个事件触发。</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="16">
<li><p>策略参数修改回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv429StrategyParamsSettingCallback">
<span id="_CPPv329StrategyParamsSettingCallback"></span><span id="_CPPv229StrategyParamsSettingCallback"></span><span id="StrategyParamsSettingCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">StrategyParamsSettingCallback</code>)<span class="sig-paren">(</span><em class="property">const</em> char *params_json, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv429StrategyParamsSettingCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>策略参数修改回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params_json (const char*)</strong> – 策略参数(json字符串格式)</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义数据，在设置接口中传入，回调时返回</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="17">
<li><p>设置策略参数修改回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.strategy_set_params_setting_callback">
int <code class="sig-name descname">strategy_set_params_setting_callback</code><span class="sig-paren">(</span>StrategyParamsSettingCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.strategy_set_params_setting_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置策略参数修改回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>StrategyParamsSettingCallback</em>) – 策略参数修改回调函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义数据，传入回调函数要使用的数据</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="18">
<li><p>上报策略参数</p></li>
</ol>
<dl class="function">
<dt id="_CPPv422strategy_report_paramsPKc">
<span id="_CPPv322strategy_report_paramsPKc"></span><span id="_CPPv222strategy_report_paramsPKc"></span><span id="strategy_report_params__cCP"></span>int <code class="sig-name descname">strategy_report_params</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>params_json</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422strategy_report_paramsPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>上报策略参数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>params_json (const char*)</strong> – 策略参数(json字符串格式)</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="19">
<li><p>上报自定义策略指标</p></li>
</ol>
<dl class="function">
<dt id="_CPPv423strategy_report_indexesPKc">
<span id="_CPPv323strategy_report_indexesPKc"></span><span id="_CPPv223strategy_report_indexesPKc"></span><span id="strategy_report_indexes__cCP"></span>int <code class="sig-name descname">strategy_report_indexes</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>indexes_json</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423strategy_report_indexesPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>上报自定义策略指标到客户端展示。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>indexes_json (const char*)</strong> – 策略自定义指标(json字符串格式)</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic" start="20">
<li><p>自定义参数和指标说明</p>
<p>目前参数和指标数据存在策略内存中，所以策略运行中才能在客户端看到参数和指标，
JSON支持int、string、double、datetime、timestamp、select等6种数据类型。
JSON格式如下：</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">123</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;str2&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key3&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name3&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;double&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mf">100.12</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key4&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name4&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;2018-05-16 10:01:01&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key5&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name5&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="mi">1526441493</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;key6&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;name6&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;select&quot;</span><span class="p">,</span>
        <span class="nt">&quot;multi_option&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:[</span>
            <span class="mi">123</span><span class="p">,</span>
            <span class="s2">&quot;str2&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;options&quot;</span><span class="p">:[</span>
            <span class="mi">123</span><span class="p">,</span>
            <span class="s2">&quot;str2&quot;</span><span class="p">,</span>
            <span class="mf">1234.12</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<span id="document-financial_data"></span><div class="section" id="id1">
<h2>2. 财务数据定义<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-31">
<span id="id2"></span><h3>2.1. 证券基本数据<a class="headerlink" href="#subtitle2-31" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">1、标准证券代码表 TB_OBJECT_0001</span><a class="headerlink" href="#id4" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_0001</p></td>
<td><p>定义的唯一标识证券的代码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_0001</p></td>
<td><p>国际证券识别编码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>F3_0001</p></td>
<td><p>交易所通用编码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_0001</p></td>
<td><p>交易所公布代码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>F5_0001</p></td>
<td><p>证券所在国家地区的本土语言对应的证券简称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_0001</p></td>
<td><p>证券中文简称</p></td>
<td><p>VARCHAR2(50)</p></td>
</tr>
<tr class="row-even"><td><p>F7_0001</p></td>
<td><p>证券英文简称</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_0001</p></td>
<td><p>证券中文全称</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>F9_0001</p></td>
<td><p>证券英文全称</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_0001</p></td>
<td><p>证券所属品种大类, 股票、基金、债券等</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-even"><td><p>F11_0001</p></td>
<td><p>证券所属品种细类</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_0001</p></td>
<td><p>证券代码表所用类型, A、ORD等</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F13_0001</p></td>
<td><p>国家及地区代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F14_0001</p></td>
<td><p>交易所英文简称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>F15_0001</p></td>
<td><p>交易所名称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_0001</p></td>
<td><p>证券id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F17_0001</p></td>
<td><p>公司id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F18_0001</p></td>
<td><p>存续状态, L代表有效, N代表发行还未上市, D代表无效</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-even"><td><p>F19_0001</p></td>
<td><p>交易币种</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_0001</p></td>
<td><p>交易时段编码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F21_0001</p></td>
<td><p>证券最新面值</p></td>
<td><p>NUMBER(248)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_0001</p></td>
<td><p>最小价格变动单位</p></td>
<td><p>NUMBER(248)</p></td>
</tr>
<tr class="row-even"><td><p>F23_0001</p></td>
<td><p>每手数量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F24_0001</p></td>
<td><p>开始交易日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F25_0001</p></td>
<td><p>最后交易日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_0001</p></td>
<td><p>挂牌价</p></td>
<td><p>NUMBER(248)</p></td>
</tr>
<tr class="row-even"><td><p>F27_0001</p></td>
<td><p>[内部]产品用分类代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F28_0001</p></td>
<td><p>合约ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">2、类型编码表 TB_OBJECT_0003</span><a class="headerlink" href="#id5" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_0003</p></td>
<td><p>分类</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_0003</p></td>
<td><p>类型名称</p></td>
<td><p>VARCHAR2(300)</p></td>
</tr>
<tr class="row-even"><td><p>F3_0003</p></td>
<td><p>类型代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_0003</p></td>
<td><p>[内部]原始类型代码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>F5_0003</p></td>
<td><p>显示顺序</p></td>
<td><p>NUMBER(60)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_0003</p></td>
<td><p>类型英文名称</p></td>
<td><p>VARCHAR2(300)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">3、公司基本资料 TB_OBJECT_1018</span><a class="headerlink" href="#id6" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F2_1018</p></td>
<td><p>英文名称</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>F3_1018</p></td>
<td><p>国家及地区</p></td>
<td><p>VARCHAR2(20)</p></td>
</tr>
<tr class="row-even"><td><p>F4_1018</p></td>
<td><p>省份</p></td>
<td><p>VARCHAR2(20)</p></td>
</tr>
<tr class="row-odd"><td><p>F5_1018</p></td>
<td><p>城市</p></td>
<td><p>VARCHAR2(20)</p></td>
</tr>
<tr class="row-even"><td><p>F6_1018</p></td>
<td><p>注册地址</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-odd"><td><p>F7_1018</p></td>
<td><p>办公地址</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-even"><td><p>F8_1018</p></td>
<td><p>邮编</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_1018</p></td>
<td><p>法人代表</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-even"><td><p>F11_1018</p></td>
<td><p>总经理</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-odd"><td><p>F13_1018</p></td>
<td><p>区号</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F16_1018</p></td>
<td><p>主页</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-odd"><td><p>F17_1018</p></td>
<td><p>电子邮箱</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-even"><td><p>F18_1018</p></td>
<td><p>注册资本(万元)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_1018</p></td>
<td><p>工商登记号</p></td>
<td><p>VARCHAR2(20)</p></td>
</tr>
<tr class="row-even"><td><p>F21_1018</p></td>
<td><p>经营范围</p></td>
<td><p>VARCHAR2(2000)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_1018</p></td>
<td><p>律师事务所ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F24_1018</p></td>
<td><p>会计师事务所ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_1018</p></td>
<td><p>资产评估机构ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F28_1018</p></td>
<td><p>资产评估确认机构ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F29_1018</p></td>
<td><p>信息披露人ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F30_1018</p></td>
<td><p>律师ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F31_1018</p></td>
<td><p>会计师ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F32_1018</p></td>
<td><p>评估师ID</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F33_1018</p></td>
<td><p>货币代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F34_1018</p></td>
<td><p>公司ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F35_1018</p></td>
<td><p>成立日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F36_1018</p></td>
<td><p>电话</p></td>
<td><p>VARCHAR2(50)</p></td>
</tr>
<tr class="row-odd"><td><p>F37_1018</p></td>
<td><p>传真</p></td>
<td><p>VARCHAR2(50)</p></td>
</tr>
<tr class="row-even"><td><p>F38_1018</p></td>
<td><p>所属板块代码</p></td>
<td><p>VARCHAR2(1200)</p></td>
</tr>
<tr class="row-odd"><td><p>F39_1018</p></td>
<td><p>公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F40_1018</p></td>
<td><p>[内部]公司类别</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F41_1018</p></td>
<td><p>公司类型</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F42_1018</p></td>
<td><p>公司简介</p></td>
<td><p>VARCHAR2(1000)</p></td>
</tr>
<tr class="row-odd"><td><p>F43_1018</p></td>
<td><p>公司终止日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F44_1018</p></td>
<td><p>员工总数(人)</p></td>
<td><p>NUMBER(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F45_1018</p></td>
<td><p>英文名称缩写</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>F46_1018</p></td>
<td><p>信息披露报纸</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F47_1018</p></td>
<td><p>信息披露网址</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F48_1018</p></td>
<td><p>主要产业及业务</p></td>
<td><p>VARCHAR2(1000)</p></td>
</tr>
<tr class="row-odd"><td><p>F49_1018</p></td>
<td><p>[内部]公司英文简介</p></td>
<td><p>VARCHAR2(2000)</p></td>
</tr>
<tr class="row-even"><td><p>F50_1018</p></td>
<td><p>公司中文简称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-odd"><td><p>F51_1018</p></td>
<td><p>[内部]产品使用标识</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-even"><td><p>F52_1018</p></td>
<td><p>国家及地区代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F53_1018</p></td>
<td><p>经营范围(英文)</p></td>
<td><p>VARCHAR2(2000)</p></td>
</tr>
<tr class="row-even"><td><p>F54_1018</p></td>
<td><p>[内部]是否有深度资料</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F55_1018</p></td>
<td><p>[内部]是否分支机构</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-even"><td><p>OB_IS_VALID_1018</p></td>
<td><p>[内部]是否有效</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_MEMO_1018</p></td>
<td><p>[内部]备注</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_NAME_1018</p></td>
<td><p>公司名称</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>OB_RELATIONS_1018</p></td>
<td><p>[内部]相关数据</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_RELEASE_DATE_1018</p></td>
<td><p>[内部]发布日期</p></td>
<td><p>DATE</p></td>
</tr>
<tr class="row-even"><td><p>OB_REVISIONS_1018</p></td>
<td><p>投资者关系网址</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_SOURCERS_1018</p></td>
<td><p>[内部]数据来源</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text">4、股本 TB_OBJECT_1084</span><a class="headerlink" href="#id7" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1084</p></td>
<td><p>公司ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F3_1084</p></td>
<td><p>导致股本变动的原因</p></td>
<td><p>VARCHAR2(30)</p></td>
</tr>
<tr class="row-even"><td><p>F4_1084</p></td>
<td><p>国家股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F5_1084</p></td>
<td><p>境内法人股</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F6_1084</p></td>
<td><p>国有法人股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F7_1084</p></td>
<td><p>境内发起人股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F8_1084</p></td>
<td><p>外资股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F9_1084</p></td>
<td><p>募集法人股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F10_1084</p></td>
<td><p>基金持股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_1084</p></td>
<td><p>一般法人股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F14_1084</p></td>
<td><p>战略投资者持股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_1084</p></td>
<td><p>内部职工股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F18_1084</p></td>
<td><p>限售股份(国家持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F19_1084</p></td>
<td><p>转配股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F21_1084</p></td>
<td><p>优先股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_1084</p></td>
<td><p>自然人股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F24_1084</p></td>
<td><p>流通A股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F25_1084</p></td>
<td><p>流通B股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F26_1084</p></td>
<td><p>流通H股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F27_1084</p></td>
<td><p>总股本(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F28_1084</p></td>
<td><p>STAQ股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F29_1084</p></td>
<td><p>NET股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F30_1084</p></td>
<td><p>高管股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F31_1084</p></td>
<td><p>其他限售股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F32_1084</p></td>
<td><p>限售股份(国有法人持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F33_1084</p></td>
<td><p>限售股份(其他内资持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F34_1084</p></td>
<td><p>[废弃]备用七</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F35_1084</p></td>
<td><p>[废弃]备用八</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F36_1084</p></td>
<td><p>[废弃]备用九</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F37_1084</p></td>
<td><p>[废弃]备用十</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F38_1084</p></td>
<td><p>变动日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F42_1084</p></td>
<td><p>[废弃]职工股预测流通起始时间</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F43_1084</p></td>
<td><p>[废弃]转配股预测流通时间</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F45_1084</p></td>
<td><p>最新标志</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-even"><td><p>F46_1084</p></td>
<td><p>公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F47_1084</p></td>
<td><p>[内部]变动次序</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F48_1084</p></td>
<td><p>境外流通股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F49_1084</p></td>
<td><p>三板A股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F50_1084</p></td>
<td><p>流通A股(限售)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F51_1084</p></td>
<td><p>三板B股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F52_1084</p></td>
<td><p>限售股份(境内法人持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F53_1084</p></td>
<td><p>限售股份(机构配售股份)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F54_1084</p></td>
<td><p>限售股份(境内自然人持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F55_1084</p></td>
<td><p>限售股份(外资持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F56_1084</p></td>
<td><p>限售股份(境外法人持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F57_1084</p></td>
<td><p>限售股份(境外自然人持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F58_1084</p></td>
<td><p>限售B股(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F59_1084</p></td>
<td><p>限售股份(高管持股)(万股)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>OB_IS_VALID_1084</p></td>
<td><p>[内部]是否有效</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_MEMO_1084</p></td>
<td><p>[内部]说明</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_NAME_1084</p></td>
<td><p>[内部]名称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>OB_RELATIONS_1084</p></td>
<td><p>[内部]相关数据</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_RELEASE_DATE_1084</p></td>
<td><p>[内部]发布日期</p></td>
<td><p>DATE</p></td>
</tr>
<tr class="row-even"><td><p>OB_REVISIONS_1084</p></td>
<td><p>[内部]变更历史</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_SOURCERS_1084</p></td>
<td><p>[内部]数据来源</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id8">
<caption><span class="caption-text">5、证券 TB_OBJECT_1090</span><a class="headerlink" href="#id8" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1090</p></td>
<td><p>[内部]上市公司</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1090</p></td>
<td><p>证券ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1090</p></td>
<td><p>简称拼音</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1090</p></td>
<td><p>证券类型代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1090</p></td>
<td><p>交易所</p></td>
<td><p>VARCHAR2(30)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1090</p></td>
<td><p>上市板</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F16_1090</p></td>
<td><p>交易代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F17_1090</p></td>
<td><p>上市时间</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F18_1090</p></td>
<td><p>摘牌日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F19_1090</p></td>
<td><p>是否摘牌</p></td>
<td><p>NUMBER(0)</p></td>
</tr>
<tr class="row-even"><td><p>F20_1090</p></td>
<td><p>[废弃]是否指标股</p></td>
<td><p>NUMBER(0)</p></td>
</tr>
<tr class="row-odd"><td><p>F21_1090</p></td>
<td><p>是否已经上市</p></td>
<td><p>NUMBER(0)</p></td>
</tr>
<tr class="row-even"><td><p>F22_1090</p></td>
<td><p>交易代码2</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F23_1090</p></td>
<td><p>交易货币代码</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-even"><td><p>F24_1090</p></td>
<td><p>[内部]财政部国债ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F25_1090</p></td>
<td><p>[废弃]交易所代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-even"><td><p>F26_1090</p></td>
<td><p>上市板代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F27_1090</p></td>
<td><p>交易所代码</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>OB_IS_VALID_1090</p></td>
<td><p>[内部]是否有效</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_MEMO_1090</p></td>
<td><p>[内部]备注</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_NAME_1090</p></td>
<td><p>证券简称</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>OB_RELATIONS_1090</p></td>
<td><p>[内部]Wind代码</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_RELEASE_DATE_1090</p></td>
<td><p>[内部]发布日期</p></td>
<td><p>DATE</p></td>
</tr>
<tr class="row-even"><td><p>OB_REVISIONS_1090</p></td>
<td><p>公司ID</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_SOURCERS_1090</p></td>
<td><p>[内部]数据来源</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id9">
<caption><span class="caption-text">6、除权除息记录 TB_OBJECT_1427</span><a class="headerlink" href="#id9" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1427</p></td>
<td><p>证券ID</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1427</p></td>
<td><p>除权除息日</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1427</p></td>
<td><p>派息比例</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1427</p></td>
<td><p>送股比例</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1427</p></td>
<td><p>转增比例</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1427</p></td>
<td><p>数据来源</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>F7_1427</p></td>
<td><p>配股价格</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_1427</p></td>
<td><p>增发比例</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-even"><td><p>F9_1427</p></td>
<td><p>增发价格</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_1427</p></td>
<td><p>除权说明</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-even"><td><p>F11_1427</p></td>
<td><p>配股比例</p></td>
<td><p>NUMBER(154)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_1427</p></td>
<td><p>除权类型</p></td>
<td><p>VARCHAR2(40)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-text">7、证券停牌信息 TB_OBJECT_1674</span><a class="headerlink" href="#id10" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1674</p></td>
<td><p>证券id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1674</p></td>
<td><p>停牌日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1674</p></td>
<td><p>停牌类型</p></td>
<td><p>VARCHAR2(100)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1674</p></td>
<td><p>停牌原因</p></td>
<td><p>VARCHAR2(400)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1674</p></td>
<td><p>停牌类型代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1674</p></td>
<td><p>复牌日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F7_1674</p></td>
<td><p>[内部]备注</p></td>
<td><p>VARCHAR2(1000)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_1674</p></td>
<td><p>停牌原因代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-even"><td><p>F9_1674</p></td>
<td><p>停复牌时间</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subtitle2-32">
<span id="id3"></span><h3>2.2. 财务报表数据<a class="headerlink" href="#subtitle2-32" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id11">
<caption><span class="caption-text">1、资产负债表(新准则) TB_OBJECT_1853</span><a class="headerlink" href="#id11" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1853</p></td>
<td><p>公司id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1853</p></td>
<td><p>报告期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1853</p></td>
<td><p>公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1853</p></td>
<td><p>报表类型</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1853</p></td>
<td><p>公司类型代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1853</p></td>
<td><p>原始报表采用会计准则代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-even"><td><p>F7_1853</p></td>
<td><p>是否上市后数据</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_1853</p></td>
<td><p>备注</p></td>
<td><p>VARCHAR2(400)</p></td>
</tr>
<tr class="row-even"><td><p>F9_1853</p></td>
<td><p>货币资金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_1853</p></td>
<td><p>交易性金融资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F11_1853</p></td>
<td><p>应收票据</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_1853</p></td>
<td><p>应收账款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F13_1853</p></td>
<td><p>其他应收款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F14_1853</p></td>
<td><p>预付款项</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F15_1853</p></td>
<td><p>应收股利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_1853</p></td>
<td><p>应收利息</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F17_1853</p></td>
<td><p>存货</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F18_1853</p></td>
<td><p>消耗性生物资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F19_1853</p></td>
<td><p>待摊费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_1853</p></td>
<td><p>一年内到期的非流动资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F21_1853</p></td>
<td><p>其他流动资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_1853</p></td>
<td><p>流动资产差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F23_1853</p></td>
<td><p>流动资产差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F24_1853</p></td>
<td><p>流动资产差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F25_1853</p></td>
<td><p>流动资产合计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_1853</p></td>
<td><p>可供出售金融资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F27_1853</p></td>
<td><p>持有至到期投资</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F28_1853</p></td>
<td><p>投资性房地产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F29_1853</p></td>
<td><p>长期股权投资</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F30_1853</p></td>
<td><p>长期应收款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F31_1853</p></td>
<td><p>固定资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F32_1853</p></td>
<td><p>工程物资</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F33_1853</p></td>
<td><p>在建工程</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F34_1853</p></td>
<td><p>固定资产清理</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F35_1853</p></td>
<td><p>生产性生物资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F36_1853</p></td>
<td><p>油气资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F37_1853</p></td>
<td><p>无形资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F38_1853</p></td>
<td><p>开发支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F39_1853</p></td>
<td><p>商誉</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F40_1853</p></td>
<td><p>长期待摊费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F41_1853</p></td>
<td><p>递延所得税资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F42_1853</p></td>
<td><p>其他非流动资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F43_1853</p></td>
<td><p>非流动资产差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F44_1853</p></td>
<td><p>非流动资产差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F45_1853</p></td>
<td><p>非流动资产差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F46_1853</p></td>
<td><p>非流动资产合计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F47_1853</p></td>
<td><p>现金及存放中央银行款项</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F48_1853</p></td>
<td><p>存放同业和其它金融机构款项</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F49_1853</p></td>
<td><p>贵金属</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F50_1853</p></td>
<td><p>拆出资金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F51_1853</p></td>
<td><p>衍生金融资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F52_1853</p></td>
<td><p>买入返售金融资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F53_1853</p></td>
<td><p>发放贷款及垫款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F54_1853</p></td>
<td><p>代理业务资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F55_1853</p></td>
<td><p>应收保费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F56_1853</p></td>
<td><p>应收代位追偿款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F57_1853</p></td>
<td><p>应收分保账款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F58_1853</p></td>
<td><p>应收分保未到期责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F59_1853</p></td>
<td><p>应收分保未决赔款准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F60_1853</p></td>
<td><p>应收分保寿险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F61_1853</p></td>
<td><p>应收分保长期健康险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F62_1853</p></td>
<td><p>存出保证金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F63_1853</p></td>
<td><p>保户质押贷款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F64_1853</p></td>
<td><p>存出资本保证金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F65_1853</p></td>
<td><p>独立账户资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F66_1853</p></td>
<td><p>客户资金存款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F67_1853</p></td>
<td><p>结算备付金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F68_1853</p></td>
<td><p>客户备付金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F69_1853</p></td>
<td><p>其中：交易席位费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F70_1853</p></td>
<td><p>其他资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F71_1853</p></td>
<td><p>资产差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F72_1853</p></td>
<td><p>资产差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F73_1853</p></td>
<td><p>资产差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F74_1853</p></td>
<td><p>资产总计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F75_1853</p></td>
<td><p>短期借款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F76_1853</p></td>
<td><p>交易性金融负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F77_1853</p></td>
<td><p>应付票据</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F78_1853</p></td>
<td><p>应付账款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F79_1853</p></td>
<td><p>预收款项</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F80_1853</p></td>
<td><p>应付职工薪酬</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F81_1853</p></td>
<td><p>应交税费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F82_1853</p></td>
<td><p>应付利息</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F83_1853</p></td>
<td><p>应付股利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F84_1853</p></td>
<td><p>其他应付款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F85_1853</p></td>
<td><p>预提费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F86_1853</p></td>
<td><p>预计负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F87_1853</p></td>
<td><p>递延收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F88_1853</p></td>
<td><p>一年内到期的非流动负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F89_1853</p></td>
<td><p>其他流动负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F90_1853</p></td>
<td><p>流动负债差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F91_1853</p></td>
<td><p>流动负债差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F92_1853</p></td>
<td><p>流动负债差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F93_1853</p></td>
<td><p>流动负债合计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F94_1853</p></td>
<td><p>长期借款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F95_1853</p></td>
<td><p>应付债券</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F96_1853</p></td>
<td><p>长期应付款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F97_1853</p></td>
<td><p>专项应付款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F98_1853</p></td>
<td><p>递延所得税负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F99_1853</p></td>
<td><p>其他非流动负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F100_1853</p></td>
<td><p>非流动负债差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F101_1853</p></td>
<td><p>非流动负债差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F102_1853</p></td>
<td><p>非流动负债差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F103_1853</p></td>
<td><p>非流动负债合计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F104_1853</p></td>
<td><p>同业和其它金融机构存放款项</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F105_1853</p></td>
<td><p>向中央银行借款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F106_1853</p></td>
<td><p>拆入资金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F107_1853</p></td>
<td><p>衍生金融负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F108_1853</p></td>
<td><p>卖出回购金融资产款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F109_1853</p></td>
<td><p>吸收存款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F110_1853</p></td>
<td><p>代理业务负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F111_1853</p></td>
<td><p>其他负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F112_1853</p></td>
<td><p>预收保费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F113_1853</p></td>
<td><p>应付手续费及佣金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F114_1853</p></td>
<td><p>应付分保账款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F115_1853</p></td>
<td><p>存入保证金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F116_1853</p></td>
<td><p>保户储金及投资款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F117_1853</p></td>
<td><p>未到期责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F118_1853</p></td>
<td><p>未决赔款准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F119_1853</p></td>
<td><p>寿险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F120_1853</p></td>
<td><p>长期健康险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F121_1853</p></td>
<td><p>独立账户负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F122_1853</p></td>
<td><p>其中：质押借款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F123_1853</p></td>
<td><p>代理买卖证券款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F124_1853</p></td>
<td><p>代理承销证券款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F125_1853</p></td>
<td><p>负债差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F126_1853</p></td>
<td><p>负债差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F127_1853</p></td>
<td><p>负债差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-odd"><td><p>F128_1853</p></td>
<td><p>负债合计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F129_1853</p></td>
<td><p>股本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F130_1853</p></td>
<td><p>资本公积金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F131_1853</p></td>
<td><p>盈余公积金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F132_1853</p></td>
<td><p>未分配利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F133_1853</p></td>
<td><p>减：库存股</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F134_1853</p></td>
<td><p>一般风险准备</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F135_1853</p></td>
<td><p>外币报表折算差额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F136_1853</p></td>
<td><p>少数股东权益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F137_1853</p></td>
<td><p>股东权益差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F138_1853</p></td>
<td><p>股东权益差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F139_1853</p></td>
<td><p>其他股东权益说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F140_1853</p></td>
<td><p>股东权益合计(不含少数股东权益)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F141_1853</p></td>
<td><p>股东权益合计(含少数股东权益)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F142_1853</p></td>
<td><p>负债及股东权益差额(特殊报表项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F143_1853</p></td>
<td><p>负债及股东权益差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F144_1853</p></td>
<td><p>负债及股东权益差额说明(特殊报表项目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F145_1853</p></td>
<td><p>负债及股东权益总计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F146_1853</p></td>
<td><p>定期存款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F147_1853</p></td>
<td><p>应付短期债券</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F148_1853</p></td>
<td><p>递延收益-非流动负债</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F149_1853</p></td>
<td><p>应付赔付款</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F150_1853</p></td>
<td><p>应付保单红利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F151_1853</p></td>
<td><p>未确认的投资损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F152_1853</p></td>
<td><p>应收分保合同准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F153_1853</p></td>
<td><p>吸收存款及同业存放</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F154_1853</p></td>
<td><p>保险合同准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F155_1853</p></td>
<td><p>应收款项类投资</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F156_1853</p></td>
<td><p>期末总股本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F157_1853</p></td>
<td><p>报表类型代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F158_1853</p></td>
<td><p>专项储备</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F159_1853</p></td>
<td><p>[内部]实际公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-text">2、利润表(新准则) TB_OBJECT_1854</span><a class="headerlink" href="#id12" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1854</p></td>
<td><p>公司id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1854</p></td>
<td><p>报告期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1854</p></td>
<td><p>公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1854</p></td>
<td><p>报表类型</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1854</p></td>
<td><p>公司类型代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1854</p></td>
<td><p>原始报表采用会计准则代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-even"><td><p>F7_1854</p></td>
<td><p>是否上市后数据</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_1854</p></td>
<td><p>备注</p></td>
<td><p>VARCHAR2(400)</p></td>
</tr>
<tr class="row-even"><td><p>F9_1854</p></td>
<td><p>营业收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_1854</p></td>
<td><p>减:营业成本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F11_1854</p></td>
<td><p>减:营业税金及附加</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_1854</p></td>
<td><p>减:销售费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F13_1854</p></td>
<td><p>减:管理费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F14_1854</p></td>
<td><p>减:财务费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F15_1854</p></td>
<td><p>减:资产减值损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_1854</p></td>
<td><p>加:公允价值变动净收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F17_1854</p></td>
<td><p>加:投资净收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F18_1854</p></td>
<td><p>利息净收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F19_1854</p></td>
<td><p>利息收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_1854</p></td>
<td><p>减:利息支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F21_1854</p></td>
<td><p>手续费及佣金净收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_1854</p></td>
<td><p>手续费及佣金收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F23_1854</p></td>
<td><p>减:手续费及佣金支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F24_1854</p></td>
<td><p>其他经营净收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F25_1854</p></td>
<td><p>加:汇兑净收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_1854</p></td>
<td><p>加:其他业务净收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F27_1854</p></td>
<td><p>营业支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F28_1854</p></td>
<td><p>已赚保费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F29_1854</p></td>
<td><p>保费业务收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F30_1854</p></td>
<td><p>减：分出保费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F31_1854</p></td>
<td><p>提取未到期责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F32_1854</p></td>
<td><p>保险业务支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F33_1854</p></td>
<td><p>赔付总支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F34_1854</p></td>
<td><p>减：摊回赔付支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F35_1854</p></td>
<td><p>提取保险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F36_1854</p></td>
<td><p>减：摊回保险责任准备金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F37_1854</p></td>
<td><p>其中：分保费收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F38_1854</p></td>
<td><p>分保费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F39_1854</p></td>
<td><p>退保金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F40_1854</p></td>
<td><p>保户红利支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F41_1854</p></td>
<td><p>减：摊回分保费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F42_1854</p></td>
<td><p>代理买卖证券业务净收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F43_1854</p></td>
<td><p>证券承销业务净收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F44_1854</p></td>
<td><p>受托客户资产管理业务净收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F45_1854</p></td>
<td><p>营业利润差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F46_1854</p></td>
<td><p>营业利润差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F47_1854</p></td>
<td><p>营业利润差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F48_1854</p></td>
<td><p>营业利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F49_1854</p></td>
<td><p>加:营业外收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F50_1854</p></td>
<td><p>减：营业外支出</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F51_1854</p></td>
<td><p>其中：减：非流动资产处置净损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F52_1854</p></td>
<td><p>利润总额差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F53_1854</p></td>
<td><p>利润总额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F54_1854</p></td>
<td><p>利润总额差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F55_1854</p></td>
<td><p>利润总额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F56_1854</p></td>
<td><p>所得税</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F57_1854</p></td>
<td><p>净利润差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F58_1854</p></td>
<td><p>净利润差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F59_1854</p></td>
<td><p>净利润差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F60_1854</p></td>
<td><p>净利润(含少数股东损益)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F61_1854</p></td>
<td><p>净利润(不含少数股东损益)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F62_1854</p></td>
<td><p>少数股东损益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F63_1854</p></td>
<td><p>年初未分配利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F64_1854</p></td>
<td><p>调整以前年度损益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F65_1854</p></td>
<td><p>盈余公积转入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F66_1854</p></td>
<td><p>住房周转金转入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F67_1854</p></td>
<td><p>其他转入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F68_1854</p></td>
<td><p>可分配利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F69_1854</p></td>
<td><p>提取法定盈余公积</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F70_1854</p></td>
<td><p>提取法定公益金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F71_1854</p></td>
<td><p>职工奖金福利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F72_1854</p></td>
<td><p>提取企业发展基金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F73_1854</p></td>
<td><p>提取储备基金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F74_1854</p></td>
<td><p>可供股东分配的利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F75_1854</p></td>
<td><p>应付优先股股利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F76_1854</p></td>
<td><p>提取任意盈余公积金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F77_1854</p></td>
<td><p>应付普通股股利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F78_1854</p></td>
<td><p>转作股本的普通股股利</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F79_1854</p></td>
<td><p>未分配利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F80_1854</p></td>
<td><p>基本每股收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F81_1854</p></td>
<td><p>稀释每股收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F82_1854</p></td>
<td><p>其中：对联营企业和合营企业的投资收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F83_1854</p></td>
<td><p>营业总收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F84_1854</p></td>
<td><p>营业总成本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F85_1854</p></td>
<td><p>其他业务收入</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F86_1854</p></td>
<td><p>其他业务成本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F87_1854</p></td>
<td><p>未确认投资损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F88_1854</p></td>
<td><p>[内部]是否计算报表</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-even"><td><p>F89_1854</p></td>
<td><p>归属于母公司的净利润差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F90_1854</p></td>
<td><p>归属于母公司的净利润差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F91_1854</p></td>
<td><p>报表类型代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-odd"><td><p>F92_1854</p></td>
<td><p>其他综合收益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F93_1854</p></td>
<td><p>综合收益总额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F94_1854</p></td>
<td><p>综合收益总额(母公司)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F95_1854</p></td>
<td><p>综合收益总额(少数股东)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F96_1854</p></td>
<td><p>[内部]实际公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id13">
<caption><span class="caption-text">3、现金流量表(新准则) TB_OBJECT_1855</span><a class="headerlink" href="#id13" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_1855</p></td>
<td><p>公司id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_1855</p></td>
<td><p>报告期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_1855</p></td>
<td><p>公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_1855</p></td>
<td><p>报表类型</p></td>
<td><p>VARCHAR2(80)</p></td>
</tr>
<tr class="row-even"><td><p>F5_1855</p></td>
<td><p>公司类型代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_1855</p></td>
<td><p>原始报表采用会计准则代码</p></td>
<td><p>VARCHAR2(2)</p></td>
</tr>
<tr class="row-even"><td><p>F7_1855</p></td>
<td><p>是否上市后数据</p></td>
<td><p>NUMBER(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_1855</p></td>
<td><p>备注</p></td>
<td><p>VARCHAR2(400)</p></td>
</tr>
<tr class="row-even"><td><p>F9_1855</p></td>
<td><p>销售商品、提供劳务收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_1855</p></td>
<td><p>收到的税费返还</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F11_1855</p></td>
<td><p>收到其他与经营活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_1855</p></td>
<td><p>客户存款和同业存放款项净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F13_1855</p></td>
<td><p>向中央银行借款净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F14_1855</p></td>
<td><p>向其他金融机构拆入资金净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F15_1855</p></td>
<td><p>收取利息和手续费净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_1855</p></td>
<td><p>收到原保险合同保费取得的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F17_1855</p></td>
<td><p>收到再保业务现金净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F18_1855</p></td>
<td><p>处置交易性金融资产净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F19_1855</p></td>
<td><p>处置可供出售金融资产净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_1855</p></td>
<td><p>拆入资金净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F21_1855</p></td>
<td><p>回购业务资金净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_1855</p></td>
<td><p>经营活动现金流入差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F23_1855</p></td>
<td><p>经营活动现金流入差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F24_1855</p></td>
<td><p>经营活动现金流入差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F25_1855</p></td>
<td><p>经营活动现金流入小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_1855</p></td>
<td><p>购买商品、接受劳务支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F27_1855</p></td>
<td><p>支付给职工以及为职工支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F28_1855</p></td>
<td><p>支付的各项税费</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F29_1855</p></td>
<td><p>支付其他与经营活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F30_1855</p></td>
<td><p>客户贷款及垫款净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F31_1855</p></td>
<td><p>存放央行和同业款项净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F32_1855</p></td>
<td><p>支付原保险合同赔付款项的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F33_1855</p></td>
<td><p>支付手续费的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F34_1855</p></td>
<td><p>经营活动现金流出差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F35_1855</p></td>
<td><p>经营活动现金流出差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F36_1855</p></td>
<td><p>经营活动现金流出差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F37_1855</p></td>
<td><p>经营活动现金流出小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F38_1855</p></td>
<td><p>经营活动产生的现金流量净额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F39_1855</p></td>
<td><p>经营活动产生的现金流量净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F40_1855</p></td>
<td><p>收回投资收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F41_1855</p></td>
<td><p>取得投资收益收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F42_1855</p></td>
<td><p>处置固定资产、无形资产和其他长期资产收回的现金净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F43_1855</p></td>
<td><p>处置子公司及其他营业单位收到的现金净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F44_1855</p></td>
<td><p>收到其他与投资活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F45_1855</p></td>
<td><p>投资活动现金流入差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F46_1855</p></td>
<td><p>投资活动现金流入差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F47_1855</p></td>
<td><p>投资活动现金流入差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F48_1855</p></td>
<td><p>投资活动现金流入小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F49_1855</p></td>
<td><p>购建固定资产、无形资产和其他长期资产支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F50_1855</p></td>
<td><p>投资支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F51_1855</p></td>
<td><p>取得子公司及其他营业单位支付的现金净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F52_1855</p></td>
<td><p>支付其他与投资活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F53_1855</p></td>
<td><p>质押贷款净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F54_1855</p></td>
<td><p>投资活动现金流出差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F55_1855</p></td>
<td><p>投资活动现金流出差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F56_1855</p></td>
<td><p>投资活动现金流出差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F57_1855</p></td>
<td><p>投资活动现金流出小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F58_1855</p></td>
<td><p>投资活动产生的现金流量净额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F59_1855</p></td>
<td><p>投资活动产生的现金流量净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F60_1855</p></td>
<td><p>吸收投资收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F61_1855</p></td>
<td><p>取得借款收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F62_1855</p></td>
<td><p>收到其他与筹资活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F63_1855</p></td>
<td><p>发行债券收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F64_1855</p></td>
<td><p>保户储金净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F65_1855</p></td>
<td><p>筹资活动现金流入差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F66_1855</p></td>
<td><p>筹资活动现金流入差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F67_1855</p></td>
<td><p>筹资活动现金流入差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F68_1855</p></td>
<td><p>筹资活动现金流入小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F69_1855</p></td>
<td><p>偿还债务支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F70_1855</p></td>
<td><p>分配股利、利润或偿付利息支付的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F71_1855</p></td>
<td><p>支付其他与筹资活动有关的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F72_1855</p></td>
<td><p>筹资活动现金流出差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F73_1855</p></td>
<td><p>筹资活动现金流出差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F74_1855</p></td>
<td><p>筹资活动现金流出差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-even"><td><p>F75_1855</p></td>
<td><p>筹资活动现金流出小计</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F76_1855</p></td>
<td><p>筹资活动产生的现金流量净额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F77_1855</p></td>
<td><p>筹资活动产生的现金流量净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F78_1855</p></td>
<td><p>汇率变动对现金的影响</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F79_1855</p></td>
<td><p>现金净增加额差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F80_1855</p></td>
<td><p>现金净增加额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F81_1855</p></td>
<td><p>现金净增加额差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F82_1855</p></td>
<td><p>现金及现金等价物净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F83_1855</p></td>
<td><p>期初现金及现金等价物余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F84_1855</p></td>
<td><p>期末现金及现金等价物余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F85_1855</p></td>
<td><p>净利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F86_1855</p></td>
<td><p>加：资产减值准备</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F87_1855</p></td>
<td><p>固定资产折旧、油气资产折耗、生产性生物资产折旧</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F88_1855</p></td>
<td><p>无形资产摊销</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F89_1855</p></td>
<td><p>长期待摊费用摊销</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F90_1855</p></td>
<td><p>待摊费用减少</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F91_1855</p></td>
<td><p>预提费用增加</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F92_1855</p></td>
<td><p>处置固定、无形资产和其他长期资产的损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F93_1855</p></td>
<td><p>固定资产报废损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F94_1855</p></td>
<td><p>公允价值变动损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F95_1855</p></td>
<td><p>财务费用</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F96_1855</p></td>
<td><p>投资损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F97_1855</p></td>
<td><p>递延所得税资产减少</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F98_1855</p></td>
<td><p>递延所得税负债增加</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F99_1855</p></td>
<td><p>存货的减少</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F100_1855</p></td>
<td><p>经营性应收项目的减少</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F101_1855</p></td>
<td><p>经营性应付项目的增加</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F102_1855</p></td>
<td><p>间接法-经营活动现金流量净额差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F103_1855</p></td>
<td><p>间接法-经营活动现金流量净额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F104_1855</p></td>
<td><p>间接法-经营活动现金流量净额差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(500)</p></td>
</tr>
<tr class="row-even"><td><p>F105_1855</p></td>
<td><p>间接法-经营活动产生的现金流量净额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F106_1855</p></td>
<td><p>债务转为资本</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F107_1855</p></td>
<td><p>一年内到期的可转换公司债券</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F108_1855</p></td>
<td><p>融资租入固定资产</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F109_1855</p></td>
<td><p>现金的期末余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F110_1855</p></td>
<td><p>减：现金的期初余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F111_1855</p></td>
<td><p>加：现金等价物的期末余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F112_1855</p></td>
<td><p>减：现金等价物的期初余额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F113_1855</p></td>
<td><p>间接法-现金净增加额差额(特殊报表科目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F114_1855</p></td>
<td><p>间接法-现金净增加额差额(合计平衡项目)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F115_1855</p></td>
<td><p>间接法-现金净增加额差额说明(特殊报表科目)</p></td>
<td><p>VARCHAR2(200)</p></td>
</tr>
<tr class="row-odd"><td><p>F116_1855</p></td>
<td><p>间接法-现金及现金等价物净增加额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F117_1855</p></td>
<td><p>其他</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F118_1855</p></td>
<td><p>其中：子公司吸收少数股东投资收到的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F119_1855</p></td>
<td><p>其中：子公司支付给少数股东的股利、利润</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F120_1855</p></td>
<td><p>未确认投资损失</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F121_1855</p></td>
<td><p>支付保单红利的现金</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F122_1855</p></td>
<td><p>[内部]少数股东权益</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F123_1855</p></td>
<td><p>[内部]是否计算报表</p></td>
<td><p>NUMBER(50)</p></td>
</tr>
<tr class="row-odd"><td><p>F124_1855</p></td>
<td><p>报表类型代码</p></td>
<td><p>NUMBER(90)</p></td>
</tr>
<tr class="row-even"><td><p>F125_1855</p></td>
<td><p>[内部]实际公告日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id14">
<caption><span class="caption-text">4、资金流向表 TB_OBJECT_5046</span><a class="headerlink" href="#id14" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段</p></th>
<th class="head"><p>字段释义</p></th>
<th class="head"><p>数据类型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>F1_5046</p></td>
<td><p>证券id</p></td>
<td><p>VARCHAR2(10)</p></td>
</tr>
<tr class="row-odd"><td><p>F2_5046</p></td>
<td><p>日期</p></td>
<td><p>VARCHAR2(8)</p></td>
</tr>
<tr class="row-even"><td><p>F3_5046</p></td>
<td><p>机构买入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F4_5046</p></td>
<td><p>机构卖出金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F5_5046</p></td>
<td><p>大户买入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F6_5046</p></td>
<td><p>大户卖出金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F7_5046</p></td>
<td><p>中户买入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F8_5046</p></td>
<td><p>中户卖出金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F9_5046</p></td>
<td><p>散户买入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F10_5046</p></td>
<td><p>散户卖出金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F11_5046</p></td>
<td><p>机构买入总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F12_5046</p></td>
<td><p>机构卖出总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F13_5046</p></td>
<td><p>大户买入总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F14_5046</p></td>
<td><p>大户卖出总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F15_5046</p></td>
<td><p>中户买入总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F16_5046</p></td>
<td><p>中户卖出总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F17_5046</p></td>
<td><p>散户买入总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F18_5046</p></td>
<td><p>散户卖出总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F19_5046</p></td>
<td><p>成交笔数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F20_5046</p></td>
<td><p>机构买入单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F21_5046</p></td>
<td><p>机构卖出单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F22_5046</p></td>
<td><p>大户买入单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F23_5046</p></td>
<td><p>大户卖出单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F24_5046</p></td>
<td><p>中户买入单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F25_5046</p></td>
<td><p>中户卖出单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F26_5046</p></td>
<td><p>散户买入单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F27_5046</p></td>
<td><p>散户卖出单数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F28_5046</p></td>
<td><p>散户量差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F29_5046</p></td>
<td><p>散户量差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F30_5046</p></td>
<td><p>中户量差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F31_5046</p></td>
<td><p>中户量差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F32_5046</p></td>
<td><p>大户量差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F33_5046</p></td>
<td><p>大户量差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F34_5046</p></td>
<td><p>机构量差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F35_5046</p></td>
<td><p>机构量差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F36_5046</p></td>
<td><p>散户金额差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F37_5046</p></td>
<td><p>散户金额差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F38_5046</p></td>
<td><p>中户金额差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F39_5046</p></td>
<td><p>中户金额差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F40_5046</p></td>
<td><p>大户金额差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F41_5046</p></td>
<td><p>大户金额差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F42_5046</p></td>
<td><p>机构金额差(含主动被动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F43_5046</p></td>
<td><p>机构金额差(仅主动)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F44_5046</p></td>
<td><p>[废弃]每笔手数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F45_5046</p></td>
<td><p>净流入量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F46_5046</p></td>
<td><p>流入率(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F47_5046</p></td>
<td><p>开盘资金流入量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F48_5046</p></td>
<td><p>开盘资金流入率(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F49_5046</p></td>
<td><p>尾盘资金流入量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F50_5046</p></td>
<td><p>尾盘资金流入率(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F51_5046</p></td>
<td><p>净流入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F52_5046</p></td>
<td><p>流入率(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F53_5046</p></td>
<td><p>开盘资金流入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F54_5046</p></td>
<td><p>开盘资金流入率(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F55_5046</p></td>
<td><p>尾盘资金流入金额</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F56_5046</p></td>
<td><p>尾盘资金流入率(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F57_5046</p></td>
<td><p>委买总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F58_5046</p></td>
<td><p>委卖总量</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F59_5046</p></td>
<td><p>资金流向占比(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F60_5046</p></td>
<td><p>开盘资金流向占比(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F61_5046</p></td>
<td><p>尾盘资金流向占比(量)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F62_5046</p></td>
<td><p>资金流向占比(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F63_5046</p></td>
<td><p>开盘资金流向占比(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F64_5046</p></td>
<td><p>尾盘资金流向占比(金额)</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F65_5046</p></td>
<td><p>[废弃]大户平均每笔买单手数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>F66_5046</p></td>
<td><p>[废弃]机构平均每笔卖单手数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-even"><td><p>F67_5046</p></td>
<td><p>[废弃]大户平均每笔卖单手数</p></td>
<td><p>NUMBER(204)</p></td>
</tr>
<tr class="row-odd"><td><p>OB_OBJECT_ID</p></td>
<td><p>对象ID</p></td>
<td><p>VARCHAR2(38)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-const_define"></span><div class="section" id="id1">
<h2>3. 数据字典<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-21">
<span id="id2"></span><h3>3.1. 交易市场(所)代码<a class="headerlink" href="#subtitle2-21" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>交易市场代码</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SH</p></td>
<td><p>上海证券交易所</p></td>
</tr>
<tr class="row-odd"><td><p>SZ</p></td>
<td><p>深圳证券交易所</p></td>
</tr>
<tr class="row-even"><td><p>CFFEX</p></td>
<td><p>中金所</p></td>
</tr>
<tr class="row-odd"><td><p>SHFE</p></td>
<td><p>上期所</p></td>
</tr>
<tr class="row-even"><td><p>CZCE</p></td>
<td><p>郑商所</p></td>
</tr>
<tr class="row-odd"><td><p>DCE</p></td>
<td><p>大商所</p></td>
</tr>
<tr class="row-even"><td><p>INE</p></td>
<td><p>上海国际能源交易中心</p></td>
</tr>
<tr class="row-odd"><td><p>HK</p></td>
<td><p>香港证券交易所</p></td>
</tr>
<tr class="row-even"><td><p>SHOP</p></td>
<td><p>上交所期权市场</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subtitle2-22">
<span id="id3"></span><h3>3.2. 证券代码表名<a class="headerlink" href="#subtitle2-22" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">1、股票</span><a class="headerlink" href="#id5" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>代码表名</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SHAG</p></td>
<td><p>上交所A股</p></td>
</tr>
<tr class="row-odd"><td><p>SZAG</p></td>
<td><p>深交所A股</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">2、指数成分股和指数</span><a class="headerlink" href="#id6" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>代码表名</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HS300</p></td>
<td><p>沪深300</p></td>
</tr>
<tr class="row-odd"><td><p>AGZS</p></td>
<td><p>上证A股</p></td>
</tr>
<tr class="row-even"><td><p>SZAZ</p></td>
<td><p>深证A股</p></td>
</tr>
<tr class="row-odd"><td><p>AGZS</p></td>
<td><p>上证A股</p></td>
</tr>
<tr class="row-even"><td><p>SZ50</p></td>
<td><p>上证50</p></td>
</tr>
<tr class="row-odd"><td><p>ZZ500</p></td>
<td><p>中证500</p></td>
</tr>
<tr class="row-even"><td><p>ZXBZ</p></td>
<td><p>中小板</p></td>
</tr>
<tr class="row-odd"><td><p>CYBZ</p></td>
<td><p>创业板指</p></td>
</tr>
<tr class="row-even"><td><p>QSAG</p></td>
<td><p>全市场A股</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text">3、期货和期权</span><a class="headerlink" href="#id7" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>代码表名</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CFFEX</p></td>
<td><p>中金所期货</p></td>
</tr>
<tr class="row-odd"><td><p>SHFE</p></td>
<td><p>上期所期货</p></td>
</tr>
<tr class="row-even"><td><p>DCE</p></td>
<td><p>大商所期货</p></td>
</tr>
<tr class="row-odd"><td><p>CZCE</p></td>
<td><p>郑商所期货</p></td>
</tr>
<tr class="row-even"><td><p>INE</p></td>
<td><p>上海能源中心期货</p></td>
</tr>
<tr class="row-odd"><td><p>SHOP</p></td>
<td><p>上交所期权</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="subtitle2-23">
<span id="id4"></span><h3>3.3. 实时行情可订阅数据类型<a class="headerlink" href="#subtitle2-23" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id8">
<caption><span class="caption-text">可订阅数据类型</span><a class="headerlink" href="#id8" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>数据类型名</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tick</p></td>
<td><p>tick级行情数据</p></td>
</tr>
<tr class="row-odd"><td><p>bar</p></td>
<td><p>分钟K线数据</p></td>
</tr>
<tr class="row-even"><td><p>index</p></td>
<td><p>指数行情数据</p></td>
</tr>
<tr class="row-odd"><td><p>zw</p></td>
<td><p>逐笔委托数据 (仅深交所)</p></td>
</tr>
<tr class="row-even"><td><p>zc</p></td>
<td><p>逐笔成交数据</p></td>
</tr>
<tr class="row-odd"><td><p>fast</p></td>
<td><p>撮合行情数据 (仅深交所)</p></td>
</tr>
<tr class="row-even"><td><p>queue</p></td>
<td><p>委托队列数据</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="accounttype">
<h3>3.4. AccountType<a class="headerlink" href="#accounttype" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id9">
<caption><span class="caption-text">资金账号类型</span><a class="headerlink" href="#id9" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AccountType_Stock</p></td>
<td><p>1</p></td>
<td><p>股票</p></td>
</tr>
<tr class="row-odd"><td><p>AccountType_Futures</p></td>
<td><p>2</p></td>
<td><p>期货</p></td>
</tr>
<tr class="row-even"><td><p>AccountType_Options</p></td>
<td><p>3</p></td>
<td><p>期权</p></td>
</tr>
<tr class="row-odd"><td><p>AccountType_Margin</p></td>
<td><p>4</p></td>
<td><p>融资融券</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cancelflag">
<h3>3.5. CancelFlag<a class="headerlink" href="#cancelflag" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-text">撤单标识</span><a class="headerlink" href="#id10" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CancelFlag_False</p></td>
<td><p>1</p></td>
<td><p>普通订单</p></td>
</tr>
<tr class="row-odd"><td><p>CancelFlag_True</p></td>
<td><p>2</p></td>
<td><p>撤单订单</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="credittype">
<h3>3.6. CreditType<a class="headerlink" href="#credittype" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id11">
<caption><span class="caption-text">信用类型</span><a class="headerlink" href="#id11" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CreditType_Normal</p></td>
<td><p>1</p></td>
<td><p>普通交易</p></td>
</tr>
<tr class="row-odd"><td><p>CreditType_CashLoan</p></td>
<td><p>2</p></td>
<td><p>融资交易</p></td>
</tr>
<tr class="row-even"><td><p>CreditType_SecurityLoan</p></td>
<td><p>3</p></td>
<td><p>融券交易</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hedgeflag">
<h3>3.7. HedgeFlag<a class="headerlink" href="#hedgeflag" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-text">投机套保标识</span><a class="headerlink" href="#id12" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HedgeFlag_Speculation</p></td>
<td><p>1</p></td>
<td><p>投机</p></td>
</tr>
<tr class="row-odd"><td><p>HedgeFlag_Hedge</p></td>
<td><p>2</p></td>
<td><p>套保</p></td>
</tr>
<tr class="row-even"><td><p>HedgeFlag_Arbitrage</p></td>
<td><p>3</p></td>
<td><p>套利</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderstatus">
<h3>3.8. OrderStatus<a class="headerlink" href="#orderstatus" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id13">
<caption><span class="caption-text">订单状态</span><a class="headerlink" href="#id13" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OrderStatus_PendingNew</p></td>
<td><p>1</p></td>
<td><p>订单待报</p></td>
</tr>
<tr class="row-odd"><td><p>OrderStatus_New</p></td>
<td><p>2</p></td>
<td><p>订单已报</p></td>
</tr>
<tr class="row-even"><td><p>OrderStatus_PartiallyFilled</p></td>
<td><p>3</p></td>
<td><p>订单部分成交</p></td>
</tr>
<tr class="row-odd"><td><p>OrderStatus_Filled</p></td>
<td><p>4</p></td>
<td><p>订单全部成交</p></td>
</tr>
<tr class="row-even"><td><p>OrderStatus_PendingCancel</p></td>
<td><p>5</p></td>
<td><p>撤单待报</p></td>
</tr>
<tr class="row-odd"><td><p>OrderStatus_Canceling</p></td>
<td><p>6</p></td>
<td><p>已报待撤</p></td>
</tr>
<tr class="row-even"><td><p>OrderStatus_CancelFilled</p></td>
<td><p>7</p></td>
<td><p>订单已撤销</p></td>
</tr>
<tr class="row-odd"><td><p>OrderStatus_PartiallyCanceled</p></td>
<td><p>8</p></td>
<td><p>部成部撤</p></td>
</tr>
<tr class="row-even"><td><p>OrderStatus_Rejected</p></td>
<td><p>9</p></td>
<td><p>订单已拒绝</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ordertype">
<h3>3.9. OrderType<a class="headerlink" href="#ordertype" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id14">
<caption><span class="caption-text">订单类型</span><a class="headerlink" href="#id14" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OrderType_LMT</p></td>
<td><p>1</p></td>
<td><p>限价委托</p></td>
</tr>
<tr class="row-odd"><td><p>OrderType_BOC</p></td>
<td><p>2</p></td>
<td><p>对手方最优价格，深圳证券交易所</p></td>
</tr>
<tr class="row-even"><td><p>OrderType_BOP</p></td>
<td><p>3</p></td>
<td><p>本方最优价格，深圳证券交易所</p></td>
</tr>
<tr class="row-odd"><td><p>OrderType_B5TC</p></td>
<td><p>4</p></td>
<td><p>最优五档剩余转撤销，上海/深圳证券交易所</p></td>
</tr>
<tr class="row-even"><td><p>OrderType_B5TL</p></td>
<td><p>5</p></td>
<td><p>最优五档剩余转限价，上海证券交易所</p></td>
</tr>
<tr class="row-odd"><td><p>OrderType_IOC</p></td>
<td><p>6</p></td>
<td><p>即时成交剩余转撤销，深圳证券交易所</p></td>
</tr>
<tr class="row-even"><td><p>OrderType_AON</p></td>
<td><p>7</p></td>
<td><p>全额成交或撤销，深圳证券交易所</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderside">
<h3>3.10. OrderSide<a class="headerlink" href="#orderside" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id15">
<caption><span class="caption-text">买卖方向</span><a class="headerlink" href="#id15" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OrderSide_Bid</p></td>
<td><p>1</p></td>
<td><p>证券、基金、债券普通买入</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_Ask</p></td>
<td><p>2</p></td>
<td><p>证券、基金、债券普通卖出</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_Long_Open</p></td>
<td><p>3</p></td>
<td><p>期货、期权多头开仓</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_Long_Close</p></td>
<td><p>4</p></td>
<td><p>期货、期权多头平仓</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_Short_Open</p></td>
<td><p>5</p></td>
<td><p>期货、期权空头开仓</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_Short_Close</p></td>
<td><p>6</p></td>
<td><p>期货、期权空头平仓</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_Today_Long_Close</p></td>
<td><p>8</p></td>
<td><p>上期所期货今仓多头平仓</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_Today_Short_Close</p></td>
<td><p>10</p></td>
<td><p>上期所期货今仓空头平仓</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_PreDay_Long_Close</p></td>
<td><p>11</p></td>
<td><p>上期所期货昨仓多头平仓</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_PreDay_Short_Close</p></td>
<td><p>12</p></td>
<td><p>上期所期货昨仓空头平仓</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_Margin_Bid</p></td>
<td><p>13</p></td>
<td><p>证券、基金、债券融资买入</p></td>
</tr>
<tr class="row-odd"><td><p>OrderSide_Margin_Ask</p></td>
<td><p>14</p></td>
<td><p>证券、基金、债券融券卖出</p></td>
</tr>
<tr class="row-even"><td><p>OrderSide_Reverse_Repurchase</p></td>
<td><p>19</p></td>
<td><p>逆回购</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="positionside">
<h3>3.11. PositionSide<a class="headerlink" href="#positionside" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id16">
<caption><span class="caption-text">持仓类型</span><a class="headerlink" href="#id16" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PositionSide_Long</p></td>
<td><p>1</p></td>
<td><p>多仓</p></td>
</tr>
<tr class="row-odd"><td><p>PositionSide_Short</p></td>
<td><p>2</p></td>
<td><p>空仓</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tradereporttype">
<h3>3.12. TradeReportType<a class="headerlink" href="#tradereporttype" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id17">
<caption><span class="caption-text">成交回报类型</span><a class="headerlink" href="#id17" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>名称</p></th>
<th class="head"><p>值</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TradeReportType_Normal</p></td>
<td><p>1</p></td>
<td><p>普通回报</p></td>
</tr>
<tr class="row-odd"><td><p>TradeReportType_Cancel</p></td>
<td><p>2</p></td>
<td><p>撤单回报</p></td>
</tr>
<tr class="row-even"><td><p>TradeReportType_Abolish</p></td>
<td><p>3</p></td>
<td><p>普通废单回报</p></td>
</tr>
<tr class="row-odd"><td><p>TradeReportType_InsideCancel</p></td>
<td><p>4</p></td>
<td><p>内部撤单回报，还未到交易所便被撤下来</p></td>
</tr>
<tr class="row-even"><td><p>TradeReportType_CancelAbolish</p></td>
<td><p>5</p></td>
<td><p>撤单废单回报</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-data_struct"></span><div class="section" id="id1">
<h2>4. 数据结构<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="securitykdata">
<h3>4.1. SecurityKdata<a class="headerlink" href="#securitykdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">证券K线数据</span><a class="headerlink" href="#id2" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[24]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>uint32_t</p></td>
<td><p>日期 YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>time</p></td>
<td><p>int32_t</p></td>
<td><p>时间(北京时间) HHMMSS</p></td>
</tr>
<tr class="row-odd"><td><p>open</p></td>
<td><p>int32_t</p></td>
<td><p>开盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>high</p></td>
<td><p>int32_t</p></td>
<td><p>最高价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>int32_t</p></td>
<td><p>最低价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>close</p></td>
<td><p>int32_t</p></td>
<td><p>收盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int64_t</p></td>
<td><p>分钟内成交量，单位：该证券的最小交易单位，比如股票为股</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>分钟内成交额，单位：元</p></td>
</tr>
<tr class="row-odd"><td><p>open_interest</p></td>
<td><p>int64_t</p></td>
<td><p>累计持仓总量</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="securitytickdata">
<h3>4.2. SecurityTickData<a class="headerlink" href="#securitytickdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">证券tick数据</span><a class="headerlink" href="#id3" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[12]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>int32_t</p></td>
<td><p>时间(HHMMSSmmm)</p></td>
</tr>
<tr class="row-even"><td><p>status</p></td>
<td><p>int32_t</p></td>
<td><p>状态</p></td>
</tr>
<tr class="row-odd"><td><p>pre_close</p></td>
<td><p>uint32_t</p></td>
<td><p>前收盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>uint32_t</p></td>
<td><p>开盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>high</p></td>
<td><p>uint32_t</p></td>
<td><p>最高价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>low</p></td>
<td><p>uint32_t</p></td>
<td><p>最低价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>match</p></td>
<td><p>uint32_t</p></td>
<td><p>最新价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>ask_price</p></td>
<td><p>uint32_t[10]</p></td>
<td><p>申卖价十档，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>ask_vol</p></td>
<td><p>uint32_t[10]</p></td>
<td><p>申卖量十档</p></td>
</tr>
<tr class="row-even"><td><p>bid_price</p></td>
<td><p>uint32_t[10]</p></td>
<td><p>申买价十档，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>bid_vol</p></td>
<td><p>uint32_t[10]</p></td>
<td><p>申买量十档</p></td>
</tr>
<tr class="row-even"><td><p>num_trades</p></td>
<td><p>uint32_t</p></td>
<td><p>成交笔数</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int64_t</p></td>
<td><p>成交总量</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>成交总金额</p></td>
</tr>
<tr class="row-odd"><td><p>total_bid_vol</p></td>
<td><p>int64_t</p></td>
<td><p>委托买入总量</p></td>
</tr>
<tr class="row-even"><td><p>total_ask_vol</p></td>
<td><p>int64_t</p></td>
<td><p>委托卖出总量</p></td>
</tr>
<tr class="row-odd"><td><p>weighted_avg_bid_price</p></td>
<td><p>uint32_t</p></td>
<td><p>加权平均委买价格</p></td>
</tr>
<tr class="row-even"><td><p>weighted_avg_ask_price</p></td>
<td><p>uint32_t</p></td>
<td><p>加权平均委卖价格</p></td>
</tr>
<tr class="row-odd"><td><p>yield_to_maturity</p></td>
<td><p>int32_t</p></td>
<td><p>IOPV净值估值</p></td>
</tr>
<tr class="row-even"><td><p>iopv</p></td>
<td><p>int32_t</p></td>
<td><p>到期收益率</p></td>
</tr>
<tr class="row-odd"><td><p>high_limited</p></td>
<td><p>uint32_t</p></td>
<td><p>涨停价</p></td>
</tr>
<tr class="row-even"><td><p>low_limited</p></td>
<td><p>int32_t</p></td>
<td><p>跌停价</p></td>
</tr>
<tr class="row-odd"><td><p>prefix</p></td>
<td><p>char[4]</p></td>
<td><p>证券信息前缀</p></td>
</tr>
<tr class="row-even"><td><p>syl1</p></td>
<td><p>int32_t</p></td>
<td><p>市盈率1，2位小数，股票：价格/上年每股利润，债券：每百元应计利息</p></td>
</tr>
<tr class="row-odd"><td><p>syl2</p></td>
<td><p>int32_t</p></td>
<td><p>市盈率2，2位小数，股票：价格/本年每股利润，债券：到期收益率，</p>
<blockquote>
<div><p>基金：每百份的IOPV 或净值 权证：溢价率</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>sd2</p></td>
<td><p>int32_t</p></td>
<td><p>升跌2（对比上一笔）</p></td>
</tr>
<tr class="row-odd"><td><p>trading_phase_code</p></td>
<td></td>
<td><p>交易状态代码, 上交所与深交所字段含义不同，参见以下注解：</p>
<blockquote>
<div><ul>
<li><p>上交所：该字段为8位字符串，左起每位表示特定的含义，无定义则填空格。</p>
<blockquote>
<div><ul>
<li><p>第1位</p>
<p>‘S’表示启动（开市前）时段，‘C’表示集合竞价时段，</p>
<p>‘T’表示连续交易时段，‘B’表示休市时段，‘E’表示闭市时段，</p>
<p>‘P’表示产品停牌，‘M’表示可恢复交易的熔断时段（盘中集合竞价），</p>
<p>‘N’表示不可恢复交易的熔断时段（暂停交易至闭市），</p>
<p>‘D’表示集合竞价阶段结束到连续竞价阶段开始之前的时段（如有）</p>
</li>
<li><p>第2位</p>
<p>‘0’表示此产品不可正常交易, ‘1’表示此产品可正常交易，无意义填空格。</p>
</li>
<li><p>第3位</p>
<p>‘0’表示未上市， ‘1’表示已上市。</p>
</li>
<li><p>第4位</p>
<p>‘0’表示此产品在当前时段不接受进行新订单申报，</p>
<p>‘1’表示此产品在当前时段可接受进行新订单申报。无意义填空格。</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p>深交所： 产品所处的交易阶段代码</p>
<blockquote>
<div><ul>
<li><p>第0位</p>
<p>S=启动（开市前），O=开盘集合竞价，T=连续竞价，</p>
<p>B=休市，C=收盘集合竞价, E=已闭市，H=临时停牌，A=盘后交易，</p>
<p>V=波动性中断</p>
</li>
<li><p>第1位</p>
<p>0=正常状态，1=全天停牌</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>pre_iopv</p></td>
<td><p>int32_t</p></td>
<td><p>基金T-1日收盘时刻IOPV，仅标的为基金时有效</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="futurestickdata">
<h3>4.3. FuturesTickData<a class="headerlink" href="#futurestickdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id4">
<caption><span class="caption-text">期货tick数据</span><a class="headerlink" href="#id4" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[24]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>int32_t</p></td>
<td><p>时间(HHMMSSmmm)</p></td>
</tr>
<tr class="row-even"><td><p>status</p></td>
<td><p>int32_t</p></td>
<td><p>状态</p></td>
</tr>
<tr class="row-odd"><td><p>pre_open_interest</p></td>
<td><p>int64_t</p></td>
<td><p>昨持仓量</p></td>
</tr>
<tr class="row-even"><td><p>pre_close</p></td>
<td><p>uint32_t</p></td>
<td><p>昨收盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>pre_settle_price</p></td>
<td><p>uint32_t</p></td>
<td><p>昨结算价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>uint32_t</p></td>
<td><p>开盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>high</p></td>
<td><p>uint32_t</p></td>
<td><p>最高价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>low</p></td>
<td><p>uint32_t</p></td>
<td><p>最低价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>match</p></td>
<td><p>uint32_t</p></td>
<td><p>最新价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int64_t</p></td>
<td><p>成交总量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>成交总金额</p></td>
</tr>
<tr class="row-even"><td><p>open_interest</p></td>
<td><p>int64_t</p></td>
<td><p>持仓总量</p></td>
</tr>
<tr class="row-odd"><td><p>close</p></td>
<td><p>uint32_t</p></td>
<td><p>今收盘价，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>settle_price</p></td>
<td><p>uint32_t</p></td>
<td><p>今结算价，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>high_limited</p></td>
<td><p>uint32_t</p></td>
<td><p>涨停价</p></td>
</tr>
<tr class="row-even"><td><p>low_limited</p></td>
<td><p>int32_t</p></td>
<td><p>跌停价</p></td>
</tr>
<tr class="row-odd"><td><p>pre_delta</p></td>
<td><p>int32_t</p></td>
<td><p>昨虚实度</p></td>
</tr>
<tr class="row-even"><td><p>curr_delta</p></td>
<td><p>int32_t</p></td>
<td><p>今虚实度</p></td>
</tr>
<tr class="row-odd"><td><p>ask_price</p></td>
<td><p>uint32_t[5]</p></td>
<td><p>申卖价五档，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>ask_vol</p></td>
<td><p>uint32_t[5]</p></td>
<td><p>申卖量五档</p></td>
</tr>
<tr class="row-odd"><td><p>bid_price</p></td>
<td><p>uint32_t[5]</p></td>
<td><p>申买价五档，单位：1/10000元</p></td>
</tr>
<tr class="row-even"><td><p>bid_vol</p></td>
<td><p>uint32_t[5]</p></td>
<td><p>申买量五档</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="indextickdata">
<h3>4.4. IndexTickData<a class="headerlink" href="#indextickdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id5">
<caption><span class="caption-text">指数tick数据</span><a class="headerlink" href="#id5" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[12]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>time</p></td>
<td><p>int32_t</p></td>
<td><p>时间(HHMMSSmmm)</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>int32_t</p></td>
<td><p>今开盘指数</p></td>
</tr>
<tr class="row-odd"><td><p>high</p></td>
<td><p>int32_t</p></td>
<td><p>最高指数</p></td>
</tr>
<tr class="row-even"><td><p>low</p></td>
<td><p>int32_t</p></td>
<td><p>最低指数</p></td>
</tr>
<tr class="row-odd"><td><p>match</p></td>
<td><p>int32_t</p></td>
<td><p>最新指数</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int64_t</p></td>
<td><p>参与计算相应指数的交易数量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>参与计算相应指数的成交金额</p></td>
</tr>
<tr class="row-even"><td><p>pre_close</p></td>
<td><p>int32_t</p></td>
<td><p>前收盘指数</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="optionstickdata">
<h3>4.5. OptionsTickData<a class="headerlink" href="#optionstickdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id6">
<caption><span class="caption-text">期权tick数据</span><a class="headerlink" href="#id6" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[24]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>data_timestamp</p></td>
<td><p>int32_t</p></td>
<td><p>时间(HHMMSSmmm)，如果期权合约的产品代码为“00000000”，则表示行情时间</p></td>
</tr>
<tr class="row-even"><td><p>pre_settle_price</p></td>
<td><p>int64_t</p></td>
<td><p>昨日结算价</p></td>
</tr>
<tr class="row-odd"><td><p>settle_price</p></td>
<td><p>int64_t</p></td>
<td><p>开盘价，如果期权合约的产品代码为“00000000”，则表示收盘标志，111111表示收盘</p></td>
</tr>
<tr class="row-even"><td><p>open</p></td>
<td><p>int64_t</p></td>
<td><p>开盘价</p></td>
</tr>
<tr class="row-odd"><td><p>high</p></td>
<td><p>int64_t</p></td>
<td><p>最高价</p></td>
</tr>
<tr class="row-even"><td><p>low</p></td>
<td><p>int64_t</p></td>
<td><p>最低价</p></td>
</tr>
<tr class="row-odd"><td><p>match</p></td>
<td><p>int64_t</p></td>
<td><p>现价，如果期权合约的产品代码为“00000000”，则表示记录数</p></td>
</tr>
<tr class="row-even"><td><p>auction_price</p></td>
<td><p>int64_t</p></td>
<td><p>波动性中断参考价</p></td>
</tr>
<tr class="row-odd"><td><p>auction_qty</p></td>
<td><p>int64_t</p></td>
<td><p>波动性中断集合竞价虚拟匹配量</p></td>
</tr>
<tr class="row-even"><td><p>total_long_position</p></td>
<td><p>int64_t</p></td>
<td><p>当前合约未平仓数量</p></td>
</tr>
<tr class="row-odd"><td><p>total_long_position</p></td>
<td><p>int64_t</p></td>
<td><p>当前合约未平仓数量</p></td>
</tr>
<tr class="row-even"><td><p>ask_price</p></td>
<td><p>int64_t[5]</p></td>
<td><p>申卖价五档，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>ask_vol</p></td>
<td><p>int64_t[5]</p></td>
<td><p>申卖量五档</p></td>
</tr>
<tr class="row-even"><td><p>bid_price</p></td>
<td><p>int64_t[5]</p></td>
<td><p>申买价五档，单位：1/10000元</p></td>
</tr>
<tr class="row-odd"><td><p>bid_vol</p></td>
<td><p>int64_t[5]</p></td>
<td><p>申买量五档</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int64_t</p></td>
<td><p>成交总量</p></td>
</tr>
<tr class="row-odd"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>成交总金额</p></td>
</tr>
<tr class="row-even"><td><p>trading_phase_code</p></td>
<td><p>char[8]</p></td>
<td><p>期权交易状态，取值范围如下：</p>
<blockquote>
<div><p>该字段为4位字符串，左起每位表示特定的含义，无定义则填空格。
* 第1位</p>
<blockquote>
<div><p>‘S’表示启动（开市前）时段，‘C’表示集合竞价时段，</p>
<p>‘T’表示连续交易时段，‘B’表示休市时段，</p>
<p>‘E’表示闭市时段，‘V’表示波动性中断，</p>
<p>‘P’表示临时停牌、‘U’收盘集合竞价，</p>
<p>‘M’表示可恢复交易的熔断（盘中集合竞价）,</p>
<p>‘N’表示不可恢复交易的熔断（暂停交易至闭市）</p>
</div></blockquote>
<ul>
<li><p>第2位
‘0’表示未连续停牌，‘1’表示连续停牌。（预留，暂填空格）</p></li>
<li><p>第3位
‘0’表示不限制开仓，‘1’表示限制备兑开仓，</p>
<p>‘2’表示卖出开仓，‘3’表示限制卖出开仓、备兑开仓，</p>
<p>‘4’表示限制买入开仓，‘5’表示限制买入开仓、备兑开仓，</p>
<p>‘6’表示限制买入开仓、卖出开仓，</p>
<p>‘7’表示限制买入开仓、卖出开仓、备兑开仓</p>
</li>
<li><p>第4位
‘0’表示此产品在当前时段不接受进行新订单申报，</p>
<p>‘1’表示此产品在当前时段可接受进行新订单申报。</p>
</li>
<li><p>第5位至第8位，预留（暂填空格）</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>transact_time_only</p></td>
<td><p>char[12]</p></td>
<td><p>最近询价时间，格式为HH:MM:SS.000，</p>
<blockquote>
<div><p>当日没有询价时，显示默认值00:00:00.000</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tickbytickentrust">
<h3>4.6. TickByTickEntrust<a class="headerlink" href="#tickbytickentrust" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id7">
<caption><span class="caption-text">深圳逐笔委托行情数据</span><a class="headerlink" href="#id7" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>channel_no</p></td>
<td><p>int32_t</p></td>
<td><p>频道代码</p></td>
</tr>
<tr class="row-odd"><td><p>seq</p></td>
<td><p>int64_t</p></td>
<td><p>委托序号(在同一个channel_no内唯一，从1开始连续)</p></td>
</tr>
<tr class="row-even"><td><p>price</p></td>
<td><p>int64_t</p></td>
<td><p>委托价格，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>qty</p></td>
<td><p>int64_t</p></td>
<td><p>委托数量</p></td>
</tr>
<tr class="row-even"><td><p>side</p></td>
<td><p>char</p></td>
<td><p>买卖方向，‘1’:买; ‘2’:卖; ‘G’:借入; ‘F’:出借</p></td>
</tr>
<tr class="row-odd"><td><p>ord_type</p></td>
<td><p>char</p></td>
<td><p>订单类别: ‘1’: 市价; ‘2’: 限价; ‘U’: 本方最优</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tickbyticktrade">
<h3>4.7. TickByTickTrade<a class="headerlink" href="#tickbyticktrade" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id8">
<caption><span class="caption-text">沪深逐笔成交行情数据</span><a class="headerlink" href="#id8" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>channel_no</p></td>
<td><p>int32_t</p></td>
<td><p>频道代码</p></td>
</tr>
<tr class="row-odd"><td><p>seq</p></td>
<td><p>int64_t</p></td>
<td><p>成交序号(在同一个channel_no内唯一，从1开始连续)</p></td>
</tr>
<tr class="row-even"><td><p>price</p></td>
<td><p>int64_t</p></td>
<td><p>成交价格，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>qty</p></td>
<td><p>int64_t</p></td>
<td><p>成交量</p></td>
</tr>
<tr class="row-even"><td><p>money</p></td>
<td><p>int64_t</p></td>
<td><p>成交金额，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>bid_no</p></td>
<td><p>int64_t</p></td>
<td><p>买方订单号</p></td>
</tr>
<tr class="row-even"><td><p>ask_no</p></td>
<td><p>int64_t</p></td>
<td><p>卖方订单号</p></td>
</tr>
<tr class="row-odd"><td><p>trade_flag</p></td>
<td><p>char</p></td>
<td><p>SH: 内外盘标识(‘B’:主动买; ‘S’:主动卖; ‘N’:未知)</p>
<blockquote>
<div><p>SZ: 成交标识(‘4’:撤; ‘F’:成交)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tickbytickdata">
<h3>4.8. TickByTickData<a class="headerlink" href="#tickbytickdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id9">
<caption><span class="caption-text">沪深逐笔行情数据</span><a class="headerlink" href="#id9" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[12]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>data_time</p></td>
<td><p>int64_t</p></td>
<td><p>委托时间或成交时间</p></td>
</tr>
<tr class="row-even"><td><p>type</p></td>
<td><p>char</p></td>
<td><p>委托:‘0’, 成交:‘1’</p></td>
</tr>
<tr class="row-odd"><td><p>data.entrust</p></td>
<td><p>TickByTickEntrust</p></td>
<td><p>逐笔委托</p></td>
</tr>
<tr class="row-even"><td><p>data.trade</p></td>
<td><p>TickByTickTrade</p></td>
<td><p>逐笔成交</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderqueueitemdata">
<h3>4.9. OrderQueueItemData<a class="headerlink" href="#orderqueueitemdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id10">
<caption><span class="caption-text">委托队列数据项</span><a class="headerlink" href="#id10" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>time</p></td>
<td><p>int32_t</p></td>
<td><p>委托时间(HHMMSSmmm)</p></td>
</tr>
<tr class="row-odd"><td><p>side</p></td>
<td><p>int32_t</p></td>
<td><p>买卖方向(‘B’: Bid ‘S’: Ask)</p></td>
</tr>
<tr class="row-even"><td><p>price</p></td>
<td><p>int32_t</p></td>
<td><p>委托价格，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>order_num</p></td>
<td><p>int32_t</p></td>
<td><p>委托数量</p></td>
</tr>
<tr class="row-even"><td><p>item_num</p></td>
<td><p>int32_t</p></td>
<td><p>委托明细数量，最大200个</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int32_t[200]</p></td>
<td><p>委托明细</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderqueuedata">
<h3>4.10. OrderQueueData<a class="headerlink" href="#orderqueuedata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id11">
<caption><span class="caption-text">委托队列数据</span><a class="headerlink" href="#id11" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[12]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>item</p></td>
<td><p>OrderQueueItemData[2]</p></td>
<td><p>买卖委托队列明细数据</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dateupdatedata">
<h3>4.11. DateUpdateData<a class="headerlink" href="#dateupdatedata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id12">
<caption><span class="caption-text">市场日期更新数据</span><a class="headerlink" href="#id12" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>market</p></td>
<td><p>char[6]</p></td>
<td><p>市场</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>int32_t</p></td>
<td><blockquote>
<div><p>日期 YYYYMMDD</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="codeinfo">
<h3>4.12. CodeInfo<a class="headerlink" href="#codeinfo" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id13">
<caption><span class="caption-text">代码基本信息</span><a class="headerlink" href="#id13" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[24]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>sec_type</p></td>
<td><p>int32_t</p></td>
<td><p>代码类型</p></td>
</tr>
<tr class="row-even"><td><p>sec_name</p></td>
<td><p>char[24]</p></td>
<td><p>代码中文名称，编码为utf8</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>uint32_t</p></td>
<td><p>日期 YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>high_limited</p></td>
<td><p>uint32_t</p></td>
<td><p>涨停价，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>low_limited</p></td>
<td><p>uint32_t</p></td>
<td><p>跌停价，扩大10000倍</p></td>
</tr>
<tr class="row-even"><td><p>multiplier</p></td>
<td><p>int32_t</p></td>
<td><p>合约乘数，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>margin_ratio</p></td>
<td><p>int32_t</p></td>
<td><p>保证金比率，扩大10000倍</p></td>
</tr>
<tr class="row-even"><td><p>price_tick</p></td>
<td><p>int32_t</p></td>
<td><p>价格变更单位，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>capital</p></td>
<td><p>int64_t</p></td>
<td><p>流通股本数</p></td>
</tr>
<tr class="row-even"><td><p>cap_change_date</p></td>
<td><p>uint32_t</p></td>
<td><p>股本变动日期</p></td>
</tr>
<tr class="row-odd"><td><p>trade_date_in</p></td>
<td><p>uint32_t</p></td>
<td><p>上市日期YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>trade_date_out</p></td>
<td><p>uint32_t</p></td>
<td><p>退市日期YYYYMMDD(最后一个交易日)</p></td>
</tr>
<tr class="row-odd"><td><p>is_halt</p></td>
<td><p>uint8_t</p></td>
<td><p>是否停牌，1：停牌，0：正常交易</p></td>
</tr>
<tr class="row-even"><td><p>margin_unit</p></td>
<td><p>uint32_t</p></td>
<td><p>单位保证金，当日持有一张合约所需要的保证金数量，</p>
<blockquote>
<div><p>精确到分，扩大100倍，只对期权有效</p>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>margin_ratio_param1</p></td>
<td><p>int32_t</p></td>
<td><p>保证金计算比例参数一，保证金计算参数，</p>
<blockquote>
<div><p>扩大100倍，只对期权有效</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>margin_ratio_param2</p></td>
<td><p>int32_t</p></td>
<td><p>保证金计算比例参数二，保证金计算参数，</p>
<blockquote>
<div><p>扩大100倍，只对期权有效</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="qxdata">
<h3>4.13. QxData<a class="headerlink" href="#qxdata" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id14">
<caption><span class="caption-text">权息数据</span><a class="headerlink" href="#id14" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[12]</p></td>
<td><p>证券代码（带交易所代码）</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>int32_t</p></td>
<td><p>除权除息日期 YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>bonus_ratio</p></td>
<td><p>int32_t</p></td>
<td><p>送股比例，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>dividend</p></td>
<td><p>int32_t</p></td>
<td><p>红利，扩大10000倍</p></td>
</tr>
<tr class="row-even"><td><p>allot_ratio</p></td>
<td><p>int32_t</p></td>
<td><p>配股比例，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>allot_price</p></td>
<td><p>int32_t</p></td>
<td><p>配股价，扩大10000倍</p></td>
</tr>
<tr class="row-even"><td><p>add_ratio</p></td>
<td><p>int32_t</p></td>
<td><p>增发比例，扩大10000倍</p></td>
</tr>
<tr class="row-odd"><td><p>add_price</p></td>
<td><p>int32_t</p></td>
<td><p>增发价，扩大10000倍</p></td>
</tr>
<tr class="row-even"><td><p>factor</p></td>
<td><p>int32_t</p></td>
<td><p>折算系数，一般用于基金</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tradedate">
<h3>4.14. TradeDate<a class="headerlink" href="#tradedate" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id15">
<caption><span class="caption-text">交易日期数据</span><a class="headerlink" href="#id15" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>utc_time</p></td>
<td><p>int64_t</p></td>
<td><p>交易日utc时间</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>uint32_t</p></td>
<td><p>交易日时间YYYYMMDD</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="order">
<h3>4.15. Order<a class="headerlink" href="#order" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id16">
<caption><span class="caption-text">委托详细数据</span><a class="headerlink" href="#id16" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>strategy_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略id</p></td>
</tr>
<tr class="row-odd"><td><p>run_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略运行id，代表策略的一次运行对应的id，即回测/模拟/实盘id</p></td>
</tr>
<tr class="row-even"><td><p>order_id</p></td>
<td><p>char[32]</p></td>
<td><p>后台系统生成的内部订单id</p></td>
</tr>
<tr class="row-odd"><td><p>cl_order_id</p></td>
<td><p>char[32]</p></td>
<td><p>订单的客户方id</p></td>
</tr>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[32]</p></td>
<td><p>交易标的，格式为市场.证券ID或市场.合约ID</p></td>
</tr>
<tr class="row-odd"><td><p>account_id</p></td>
<td><p>char[64]</p></td>
<td><p>用户资金账户id</p></td>
</tr>
<tr class="row-even"><td><p>account_type</p></td>
<td><p>int16_t</p></td>
<td><p>用户资金账户类型</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>int32_t</p></td>
<td><p>订单创建日期，格式：YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>trade_seqno</p></td>
<td><p>int32_t</p></td>
<td><p>交易序号，即批次号</p></td>
</tr>
<tr class="row-odd"><td><p>order_status</p></td>
<td><p>int16_t</p></td>
<td><p>订单状态，参考OrderStatus定义</p></td>
</tr>
<tr class="row-even"><td><p>order_type</p></td>
<td><p>int16_t</p></td>
<td><p>订单类型，参考OrderType定义</p></td>
</tr>
<tr class="row-odd"><td><p>side</p></td>
<td><p>int16_t</p></td>
<td><p>买/卖，参考OrderSide定义</p></td>
</tr>
<tr class="row-even"><td><p>credit_type</p></td>
<td><p>int16_t</p></td>
<td><p>信用类型，参考CreditType定义</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int32_t</p></td>
<td><p>订单数量</p></td>
</tr>
<tr class="row-even"><td><p>price</p></td>
<td><p>uint64_t</p></td>
<td><p>订单委托价，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>filled_volume</p></td>
<td><p>int32_t</p></td>
<td><p>订单累计已完成数量</p></td>
</tr>
<tr class="row-even"><td><p>filled_turnover</p></td>
<td><p>uint64_t</p></td>
<td><p>订单累计已完成金额，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>filled_price</p></td>
<td><p>int32_t</p></td>
<td><p>成交均价，扩大1万倍</p></td>
</tr>
<tr class="row-even"><td><p>filled_market_value</p></td>
<td><p>int64_t</p></td>
<td><p>成交合约价值，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>margin_ratio</p></td>
<td><p>int32_t</p></td>
<td><p>保证金比率，扩大1万倍</p></td>
</tr>
<tr class="row-even"><td><p>marketdata_time</p></td>
<td><p>int64_t</p></td>
<td><p>触发订单的行情时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
<tr class="row-odd"><td><p>create_time</p></td>
<td><p>int64_t</p></td>
<td><p>订单创建时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
<tr class="row-even"><td><p>update_time</p></td>
<td><p>int64_t</p></td>
<td><p>订单更新时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
<tr class="row-odd"><td><p>finish_time</p></td>
<td><p>int64_t</p></td>
<td><p>订单完成时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
<tr class="row-even"><td><p>cancel_flag</p></td>
<td><p>int16_t</p></td>
<td><p>撤单标识，参考CancelFlag定义</p></td>
</tr>
<tr class="row-odd"><td><p>cancel_volume</p></td>
<td><p>int32_t</p></td>
<td><p>撤单量</p></td>
</tr>
<tr class="row-even"><td><p>cancel_cnt</p></td>
<td><p>int32_t</p></td>
<td><p>撤单次数</p></td>
</tr>
<tr class="row-odd"><td><p>hedge_flag</p></td>
<td><p>HedgeFlag</p></td>
<td><p>组合投机套保标志，用于期货交易</p></td>
</tr>
<tr class="row-even"><td><p>comb_id</p></td>
<td><p>char[32]</p></td>
<td><p>组合投机套保编号，用于期货交易</p></td>
</tr>
<tr class="row-odd"><td><p>plate</p></td>
<td><p>char[4]</p></td>
<td><p>期权交易板块</p></td>
</tr>
<tr class="row-even"><td><p>err_code</p></td>
<td><p>int32_t</p></td>
<td><p>订单委托错误码</p></td>
</tr>
<tr class="row-odd"><td><p>err_msg</p></td>
<td><p>char[128]</p></td>
<td><p>订单委托错误消息</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="trade">
<h3>4.16. Trade<a class="headerlink" href="#trade" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id17">
<caption><span class="caption-text">成交数据</span><a class="headerlink" href="#id17" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>strategy_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略id</p></td>
</tr>
<tr class="row-odd"><td><p>run_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略运行id，代表策略的一次运行对应的id，即回测/模拟/实盘id</p></td>
</tr>
<tr class="row-even"><td><p>order_id</p></td>
<td><p>char[32]</p></td>
<td><p>后台系统生成的内部订单id</p></td>
</tr>
<tr class="row-odd"><td><p>cl_order_id</p></td>
<td><p>char[32]</p></td>
<td><p>订单的客户方id</p></td>
</tr>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[32]</p></td>
<td><p>交易标的，格式为市场.证券ID或市场.合约ID</p></td>
</tr>
<tr class="row-odd"><td><p>account_id</p></td>
<td><p>char[64]</p></td>
<td><p>用户资金账户id</p></td>
</tr>
<tr class="row-even"><td><p>account_type</p></td>
<td><p>int16_t</p></td>
<td><p>用户资金账户类型</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>int32_t</p></td>
<td><p>成交日期，格式：YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>trade_seqno</p></td>
<td><p>int32_t</p></td>
<td><p>交易序号，即批次号</p></td>
</tr>
<tr class="row-odd"><td><p>order_type</p></td>
<td><p>int16_t</p></td>
<td><p>订单类型，参考OrderType定义</p></td>
</tr>
<tr class="row-even"><td><p>side</p></td>
<td><p>int16_t</p></td>
<td><p>买/卖，参考OrderSide定义</p></td>
</tr>
<tr class="row-odd"><td><p>exec_type</p></td>
<td><p>int16_t</p></td>
<td><p>成交回报类型，参考TradeReportType定义</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int32_t</p></td>
<td><p>成交数量</p></td>
</tr>
<tr class="row-odd"><td><p>price</p></td>
<td><p>uint64_t</p></td>
<td><p>成交价格，扩大1万倍</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>uint64_t</p></td>
<td><p>成交金额，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>market_value</p></td>
<td><p>uint64_t</p></td>
<td><p>成交合约市值，扩大1万倍</p></td>
</tr>
<tr class="row-even"><td><p>order_price</p></td>
<td><p>int32_t</p></td>
<td><p>委托价格，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>order_volume</p></td>
<td><p>int64_t</p></td>
<td><p>委托数量</p></td>
</tr>
<tr class="row-even"><td><p>transact_time</p></td>
<td><p>int64_t</p></td>
<td><p>成交时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="position">
<h3>4.17. Position<a class="headerlink" href="#position" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id18">
<caption><span class="caption-text">持仓数据</span><a class="headerlink" href="#id18" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>strategy_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略id</p></td>
</tr>
<tr class="row-odd"><td><p>run_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略运行id，代表策略的一次运行对应的id，即回测/模拟/实盘id</p></td>
</tr>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[32]</p></td>
<td><p>交易标的，格式为市场.证券ID或市场.合约ID</p></td>
</tr>
<tr class="row-odd"><td><p>account_id</p></td>
<td><p>char[64]</p></td>
<td><p>用户资金账户id</p></td>
</tr>
<tr class="row-even"><td><p>account_type</p></td>
<td><p>int16_t</p></td>
<td><p>用户资金账户类型</p></td>
</tr>
<tr class="row-odd"><td><p>side</p></td>
<td><p>int16_t</p></td>
<td><p>持仓方向，参考PositionSide定义</p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>int32_t</p></td>
<td><p>总仓量</p></td>
</tr>
<tr class="row-odd"><td><p>avail_volume</p></td>
<td><p>int32_t</p></td>
<td><p>可用仓量</p></td>
</tr>
<tr class="row-even"><td><p>frozen_volume</p></td>
<td><p>int32_t</p></td>
<td><p>冻结仓量</p></td>
</tr>
<tr class="row-odd"><td><p>today_volume</p></td>
<td><p>int32_t</p></td>
<td><p>今仓总量</p></td>
</tr>
<tr class="row-even"><td><p>today_frozen_volume</p></td>
<td><p>int32_t</p></td>
<td><p>今仓冻结量</p></td>
</tr>
<tr class="row-odd"><td><p>today_avail_volume</p></td>
<td><p>int32_t</p></td>
<td><p>今仓可用量</p></td>
</tr>
<tr class="row-even"><td><p>yesterday_volume</p></td>
<td><p>int32_t</p></td>
<td><p>昨仓总量</p></td>
</tr>
<tr class="row-odd"><td><p>yesterday_frozen_volume</p></td>
<td><p>int32_t</p></td>
<td><p>昨仓冻结量</p></td>
</tr>
<tr class="row-even"><td><p>yesterday_avail_volume</p></td>
<td><p>int32_t</p></td>
<td><p>昨仓可用量</p></td>
</tr>
<tr class="row-odd"><td><p>avg_cost</p></td>
<td><p>int32_t</p></td>
<td><p>开仓均价，扩大1万倍</p></td>
</tr>
<tr class="row-even"><td><p>hold_cost</p></td>
<td><p>int32_t</p></td>
<td><p>持仓均价，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>create_day</p></td>
<td><p>int32_t</p></td>
<td><p>初始建仓日期，格式：YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>update_day</p></td>
<td><p>int32_t</p></td>
<td><p>仓位变更日期，格式：YYYYMMDD</p></td>
</tr>
<tr class="row-odd"><td><p>create_time</p></td>
<td><p>int64_t</p></td>
<td><p>初始建仓时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
<tr class="row-even"><td><p>update_time</p></td>
<td><p>int64_t</p></td>
<td><p>仓位变更时间，精确到微秒，格式HHMMSSmmmuuu</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cash">
<h3>4.18. Cash<a class="headerlink" href="#cash" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id19">
<caption><span class="caption-text">资金数据</span><a class="headerlink" href="#id19" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>account_id</p></td>
<td><p>char[64]</p></td>
<td><p>用户资金账户id</p></td>
</tr>
<tr class="row-odd"><td><p>account_type</p></td>
<td><p>int16_t</p></td>
<td><p>用户资金账户类型</p></td>
</tr>
<tr class="row-even"><td><p>start_cash</p></td>
<td><p>int64_t</p></td>
<td><p>初始资金</p></td>
</tr>
<tr class="row-odd"><td><p>cash</p></td>
<td><p>int64_t</p></td>
<td><p>当前资金</p></td>
</tr>
<tr class="row-even"><td><p>avail_cash</p></td>
<td><p>int64_t</p></td>
<td><p>可用资金</p></td>
</tr>
<tr class="row-odd"><td><p>locked_cash</p></td>
<td><p>int64_t</p></td>
<td><p>可用资金</p></td>
</tr>
<tr class="row-even"><td><p>turnover</p></td>
<td><p>int64_t</p></td>
<td><p>累计交易额</p></td>
</tr>
<tr class="row-odd"><td><p>today_turnover</p></td>
<td><p>int64_t</p></td>
<td><p>今日交易额</p></td>
</tr>
<tr class="row-even"><td><p>today_close_value</p></td>
<td><p>int64_t</p></td>
<td><p>今日卖出券获取的资金额</p></td>
</tr>
<tr class="row-odd"><td><p>update_time</p></td>
<td><p>int64_t</p></td>
<td><p>帐户更新时间戳</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="indicator">
<h3>4.19. Indicator<a class="headerlink" href="#indicator" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id20">
<caption><span class="caption-text">风险收益指标数据类型</span><a class="headerlink" href="#id20" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>run_id</p></td>
<td><p>char[32]</p></td>
<td><p>策略运行id，代表策略的一次运行对应的id，即回测/模拟/实盘id</p></td>
</tr>
<tr class="row-odd"><td><p>date</p></td>
<td><p>int32_t</p></td>
<td><p>日期</p></td>
</tr>
<tr class="row-even"><td><p>win_count</p></td>
<td><p>int32_t</p></td>
<td><p>盈利次数</p></td>
</tr>
<tr class="row-odd"><td><p>lose_count</p></td>
<td><p>int32_t</p></td>
<td><p>亏损次数</p></td>
</tr>
<tr class="row-even"><td><p>algorithm_return</p></td>
<td><p>double</p></td>
<td><p>策略收益率</p></td>
</tr>
<tr class="row-odd"><td><p>annual_algo_return</p></td>
<td><p>double</p></td>
<td><p>策略年化收益率</p></td>
</tr>
<tr class="row-even"><td><p>benchmark_return</p></td>
<td><p>double</p></td>
<td><p>基准收益率</p></td>
</tr>
<tr class="row-odd"><td><p>algorithm_volatility</p></td>
<td><p>double</p></td>
<td><p>策略波动率</p></td>
</tr>
<tr class="row-even"><td><p>benchmark_volatility</p></td>
<td><p>double</p></td>
<td><p>基准波动率</p></td>
</tr>
<tr class="row-odd"><td><p>alpha</p></td>
<td><p>double</p></td>
<td><p>Alpha值，表示投资者获得与市场波动无关的回报</p></td>
</tr>
<tr class="row-even"><td><p>beta</p></td>
<td><p>double</p></td>
<td><p>Beta值，表示投资的系统性风险，反映了策略对大盘变化的敏感性</p></td>
</tr>
<tr class="row-odd"><td><p>sharpe</p></td>
<td><p>double</p></td>
<td><p>夏普比率，表示每承受一单位总风险，会产生多少的超额报酬，</p>
<blockquote>
<div><p>可以同时对策略的收益与风险进行综合考虑</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>sortino</p></td>
<td><p>double</p></td>
<td><p>索提诺比率，表示每承担一单位的下行风险，将会获得多少超额回报</p></td>
</tr>
<tr class="row-odd"><td><p>information</p></td>
<td><p>double</p></td>
<td><p>信息比率，衡量单位超额风险带来的超额收益</p></td>
</tr>
<tr class="row-even"><td><p>win_ratio</p></td>
<td><p>double</p></td>
<td><p>胜率</p></td>
</tr>
<tr class="row-odd"><td><p>day_win_ratio</p></td>
<td><p>double</p></td>
<td><p>日胜率</p></td>
</tr>
<tr class="row-even"><td><p>max_drawdown</p></td>
<td><p>double</p></td>
<td><p>最大回撤</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderreq">
<h3>4.20. OrderReq<a class="headerlink" href="#orderreq" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id21">
<caption><span class="caption-text">委托请求数据</span><a class="headerlink" href="#id21" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>order_id</p></td>
<td><p>char[32]</p></td>
<td><p>后台系统生成的内部订单id</p></td>
</tr>
<tr class="row-odd"><td><p>cl_order_id</p></td>
<td><p>char[32]</p></td>
<td><p>订单的客户方id，异步下单时用户需要填上唯一id，以便委托响应时区分</p></td>
</tr>
<tr class="row-even"><td><p>symbol</p></td>
<td><p>char[32]</p></td>
<td><p>交易标的，格式为市场.证券ID或市场.合约ID</p></td>
</tr>
<tr class="row-odd"><td><p>order_type</p></td>
<td><p>int16_t</p></td>
<td><p>订单类型，参考OrderType定义</p></td>
</tr>
<tr class="row-even"><td><p>side</p></td>
<td><p>int16_t</p></td>
<td><p>买/卖，参考OrderSide定义</p></td>
</tr>
<tr class="row-odd"><td><p>volume</p></td>
<td><p>int32_t</p></td>
<td><p>订单创建日期，格式：YYYYMMDD</p></td>
</tr>
<tr class="row-even"><td><p>price</p></td>
<td><p>uint64_t</p></td>
<td><p>订单委托价，限价单使用，市价填写0，扩大1万倍</p></td>
</tr>
<tr class="row-odd"><td><p>hedge_flag</p></td>
<td><p>int16_t</p></td>
<td><p>期货投机、套利、套保标志，参考HedgeFlag定义</p></td>
</tr>
<tr class="row-even"><td><p>ext_info</p></td>
<td><p>char[128]</p></td>
<td><p>委托需要带入的扩展信息，格式为：key1=v1&amp;key2=v2</p>
<blockquote>
<div><p>目前支持的key有comb_id（UFX期货组合编号），plate（期权板块）</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="orderrsp">
<h3>4.21. OrderRsp<a class="headerlink" href="#orderrsp" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id22">
<caption><span class="caption-text">委托响应数据</span><a class="headerlink" href="#id22" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>order_id</p></td>
<td><p>char[32]</p></td>
<td><p>后台系统生成的内部订单id</p></td>
</tr>
<tr class="row-odd"><td><p>cl_order_id</p></td>
<td><p>char[32]</p></td>
<td><p>订单的客户方id</p></td>
</tr>
<tr class="row-even"><td><p>err_code</p></td>
<td><p>int32_t</p></td>
<td><p>委托错误码</p></td>
</tr>
<tr class="row-odd"><td><p>err_msg</p></td>
<td><p>char[128]</p></td>
<td><p>委托错误消息</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="canceldetail">
<h3>4.22. CancelDetail<a class="headerlink" href="#canceldetail" title="永久链接至标题">¶</a></h3>
<table class="colwidths-given docutils align-default" id="id23">
<caption><span class="caption-text">撤单响应数据</span><a class="headerlink" href="#id23" title="永久链接至表格">¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>字段名</p></th>
<th class="head"><p>类型</p></th>
<th class="head"><p>说明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>order_id</p></td>
<td><p>char[32]</p></td>
<td><p>后台系统生成的内部订单id</p></td>
</tr>
<tr class="row-odd"><td><p>cancel_order_id</p></td>
<td><p>char[32]</p></td>
<td><p>订单对应的撤单委托id</p></td>
</tr>
<tr class="row-even"><td><p>err_code</p></td>
<td><p>int32_t</p></td>
<td><p>撤单错误码</p></td>
</tr>
<tr class="row-odd"><td><p>err_msg</p></td>
<td><p>char[128]</p></td>
<td><p>撤单错误消息</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-hist_mdapi"></span><div class="section" id="id1">
<h2>5. 历史行情数据<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="tick">
<span id="subtitle2-41"></span><h3>5.1. 获取历史Tick数据<a class="headerlink" href="#tick" title="永久链接至标题">¶</a></h3>
<div class="section" id="id2">
<h4>5.1.1. 获取指定时间段历史Tick<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h4>
<ol class="arabic simple">
<li><p>获取证券历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv418get_security_ticksPKcPKcPKcPP16SecurityTickDataPi">
<span id="_CPPv318get_security_ticksPKcPKcPKcPP16SecurityTickDataPi"></span><span id="_CPPv218get_security_ticksPKcPKcPKcPP16SecurityTickDataPi"></span><span id="get_security_ticks__cCP.cCP.cCP.SecurityTickDataPP.iP"></span>int <code class="sig-name descname">get_security_ticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, <em class="property">const</em> char *<em>begin_time</em>, <em class="property">const</em> char *<em>end_time</em>, SecurityTickData **<em>std</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418get_security_ticksPKcPKcPKcPP16SecurityTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时间段的证券历史Tick数据，接口支持单个代码或多个代码组合获取数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 证券代码列表，带交易所代码，如“sh.600726,sz.000729”</p></li>
<li><p><strong>begin_time (const char*)</strong> – 开始时间，如“2017/07/05 9:0:0”</p></li>
<li><p><strong>end_time (const char*)</strong> – 结束时间，如“2017/07/05 10:0:0”</p></li>
<li><p><strong>std (SecurityTickData**)</strong> – 获取的证券tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_security_ticks</span><span class="p">(</span><span class="s">&quot;sz.002032&quot;</span><span class="p">,</span> <span class="s">&quot;2018/4/2 9:20:36&quot;</span><span class="p">,</span> <span class="s">&quot;2018/4/2 14:22:42&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>获取指数历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv415get_index_ticksPKcPKcPKcPP13IndexTickDataPi">
<span id="_CPPv315get_index_ticksPKcPKcPKcPP13IndexTickDataPi"></span><span id="_CPPv215get_index_ticksPKcPKcPKcPP13IndexTickDataPi"></span><span id="get_index_ticks__cCP.cCP.cCP.IndexTickDataPP.iP"></span>int <code class="sig-name descname">get_index_ticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, <em class="property">const</em> char *<em>begin_time</em>, <em class="property">const</em> char *<em>end_time</em>, IndexTickData **<em>itd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv415get_index_ticksPKcPKcPKcPP13IndexTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时间段的指数历史Tick数据，接口支持单个代码或多个代码组合获取数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 指数代码列表，带交易所代码，如“sh.000001,sz.399992”</p></li>
<li><p><strong>begin_time (const char*)</strong> – 开始时间，如“2017/07/05 9:0:0”</p></li>
<li><p><strong>end_time (const char*)</strong> – 结束时间，如“2017/07/05 10:0:0”</p></li>
<li><p><strong>itd (IndexTickData**)</strong> – 获取的指数tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">IndexTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_index_ticks</span><span class="p">(</span><span class="s">&quot;sh.000001&quot;</span><span class="p">,</span> <span class="s">&quot;2018/3/16 9:40:0&quot;</span><span class="p">,</span> <span class="s">&quot;2018/3/16 10:40:0&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>获取期货历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv417get_futures_ticksPKcPKcPKcPP15FuturesTickDataPi">
<span id="_CPPv317get_futures_ticksPKcPKcPKcPP15FuturesTickDataPi"></span><span id="_CPPv217get_futures_ticksPKcPKcPKcPP15FuturesTickDataPi"></span><span id="get_futures_ticks__cCP.cCP.cCP.FuturesTickDataPP.iP"></span>int <code class="sig-name descname">get_futures_ticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, <em class="property">const</em> char *<em>begin_time</em>, <em class="property">const</em> char *<em>end_time</em>, FuturesTickData **<em>ftd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417get_futures_ticksPKcPKcPKcPP15FuturesTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时间段的期货历史Tick数据，接口支持单个代码或多个代码组合获取数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 期货代码列表，带交易所代码，如“cffex.if1803,cffex.ic1806”</p></li>
<li><p><strong>begin_time (const char*)</strong> – 开始时间，如“2017/07/05 9:0:0”</p></li>
<li><p><strong>end_time (const char*)</strong> – 结束时间，如“2017/07/05 10:0:0”</p></li>
<li><p><strong>ftd (FuturesTickData**)</strong> – 获取的期货tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FuturesTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_futures_ticks</span><span class="p">(</span><span class="s">&quot;cffex.if1804&quot;</span><span class="p">,</span> <span class="s">&quot;2018/3/16 9:40:0&quot;</span><span class="p">,</span> <span class="s">&quot;2018/3/16 10:40:0&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>获取期权历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv417get_options_ticksPKcPKcPKcPP15OptionsTickDataPi">
<span id="_CPPv317get_options_ticksPKcPKcPKcPP15OptionsTickDataPi"></span><span id="_CPPv217get_options_ticksPKcPKcPKcPP15OptionsTickDataPi"></span><span id="get_options_ticks__cCP.cCP.cCP.OptionsTickDataPP.iP"></span>int <code class="sig-name descname">get_options_ticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, <em class="property">const</em> char *<em>begin_time</em>, <em class="property">const</em> char *<em>end_time</em>, OptionsTickData **<em>otd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417get_options_ticksPKcPKcPKcPP15OptionsTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时间段的期权历史Tick数据，接口支持单个代码或多个代码组合获取数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 期权代码列表，带交易所代码，如“shop.10000969,shop.10000970”</p></li>
<li><p><strong>begin_time (const char*)</strong> – 开始时间，如“2017/07/05 9:0:0”</p></li>
<li><p><strong>end_time (const char*)</strong> – 结束时间，如“2017/07/05 10:0:0”</p></li>
<li><p><strong>otd (OptionsTickData**)</strong> – 获取的指数tick数据</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">OptionsTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_options_ticks</span><span class="p">(</span><span class="s">&quot;shop.10000969&quot;</span><span class="p">,</span> <span class="s">&quot;2018/4/3 9:0:0&quot;</span><span class="p">,</span> <span class="s">&quot;2018/4/3 10:40:0&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="ntick">
<h4>5.1.2. 获取最新N笔历史Tick<a class="headerlink" href="#ntick" title="永久链接至标题">¶</a></h4>
<ol class="arabic simple">
<li><p>获取最新N笔证券历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv424get_last_security_nticksPKciPP16SecurityTickDataPi">
<span id="_CPPv324get_last_security_nticksPKciPP16SecurityTickDataPi"></span><span id="_CPPv224get_last_security_nticksPKciPP16SecurityTickDataPi"></span><span id="get_last_security_nticks__cCP.i.SecurityTickDataPP.iP"></span>int <code class="sig-name descname">get_last_security_nticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, SecurityTickData **<em>std</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424get_last_security_nticksPKciPP16SecurityTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取当日当前时刻最新的N笔证券ticks数据，同时支持单个代码或多个代码组合的数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 证券代码列表，带交易所代码，如“sh.600726,sz.000729”</p></li>
<li><p><strong>n (int)</strong> – 获取的数据条数</p></li>
<li><p><strong>std (SecurityTickData**)</strong> – 获取的证券tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_last_security_nticks</span><span class="p">(</span><span class="s">&quot;sh.601211,sz.000001&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<p>2.获取最新N笔指数历史Tick</p>
<dl class="function">
<dt id="_CPPv421get_last_index_nticksPKciPP13IndexTickDataPi">
<span id="_CPPv321get_last_index_nticksPKciPP13IndexTickDataPi"></span><span id="_CPPv221get_last_index_nticksPKciPP13IndexTickDataPi"></span><span id="get_last_index_nticks__cCP.i.IndexTickDataPP.iP"></span>int <code class="sig-name descname">get_last_index_nticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, IndexTickData **<em>imd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421get_last_index_nticksPKciPP13IndexTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取当日当前时刻最新的N笔指数ticks数据，同时支持单个代码或多个代码组合的数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 指数代码列表，带交易所代码，如“sh.000001,sz.399992”</p></li>
<li><p><strong>n (int)</strong> – 获取的数据条数</p></li>
<li><p><strong>imd (IndexTickData**)</strong> – 获取的指数tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">IndexTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_last_index_nticks</span><span class="p">(</span><span class="s">&quot;sh.000001,sz.399992&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>获取最新N笔期货历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv423get_last_futures_nticksPKciPP15FuturesTickDataPi">
<span id="_CPPv323get_last_futures_nticksPKciPP15FuturesTickDataPi"></span><span id="_CPPv223get_last_futures_nticksPKciPP15FuturesTickDataPi"></span><span id="get_last_futures_nticks__cCP.i.FuturesTickDataPP.iP"></span>int <code class="sig-name descname">get_last_futures_nticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, FuturesTickData **<em>ftd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423get_last_futures_nticksPKciPP15FuturesTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取当日当前时刻最新的N笔期货ticks数据，同时支持单个代码或多个代码组合的数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 期货代码列表，带交易所代码，如“cffex.if1803,cffex.ic1806”</p></li>
<li><p><strong>n (int)</strong> – 获取的数据条数</p></li>
<li><p><strong>ftd (FuturesTickData**)</strong> – 获取的期货tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">FuturesTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_last_futures_nticks</span><span class="p">(</span><span class="s">&quot;cffex.if1804,dce.a1805&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>获取最新N笔期权历史Tick</p></li>
</ol>
<dl class="function">
<dt id="_CPPv423get_last_options_nticksPKciPP15OptionsTickDataPi">
<span id="_CPPv323get_last_options_nticksPKciPP15OptionsTickDataPi"></span><span id="_CPPv223get_last_options_nticksPKciPP15OptionsTickDataPi"></span><span id="get_last_options_nticks__cCP.i.OptionsTickDataPP.iP"></span>int <code class="sig-name descname">get_last_options_nticks</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, OptionsTickData **<em>otd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv423get_last_options_nticksPKciPP15OptionsTickDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取当日当前时刻最新的N笔期权ticks数据，同时支持单个代码或多个代码组合的数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 期权代码列表，带交易所代码，如“shop.10000969,shop.10000970”</p></li>
<li><p><strong>n (int)</strong> – 获取的数据条数</p></li>
<li><p><strong>otd (OptionsTickData**)</strong> – 获取的期权tick数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的数组长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">OptionsTickData</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_last_options_nticks</span><span class="p">(</span><span class="s">&quot;shop.10001025,shop.10001026&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="k">
<span id="subtitle2-42"></span><h3>5.2. 获取历史K线数据<a class="headerlink" href="#k" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>获取指定时间段历史K线数据</p></li>
</ol>
<dl class="function">
<dt id="_CPPv418get_security_kdataPKcPKcPKcPKcPKcPP13SecurityKdataPi">
<span id="_CPPv318get_security_kdataPKcPKcPKcPKcPKcPP13SecurityKdataPi"></span><span id="_CPPv218get_security_kdataPKcPKcPKcPKcPKcPP13SecurityKdataPi"></span><span id="get_security_kdata__cCP.cCP.cCP.cCP.cCP.SecurityKdataPP.iP"></span>int <code class="sig-name descname">get_security_kdata</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, <em class="property">const</em> char *<em>begin_date</em>, <em class="property">const</em> char *<em>end_date</em>, <em class="property">const</em> char *<em>frequency</em>, <em class="property">const</em> char *<em>fq</em>, SecurityKdata **<em>skd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418get_security_kdataPKcPKcPKcPKcPKcPP13SecurityKdataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时间段的证券历史K线数据，支持任意分钟或天的证券K线数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 证券代码列表，带交易所代码，如“sh.601211,sz.000001”</p></li>
<li><p><strong>begin_date (const char*)</strong> – 开始日期，如“2017/1/3”</p></li>
<li><p><strong>end_date (const char*)</strong> – 结束日期，如“2017/10/12”,当计算频率为分钟K线时时日期跨度不能大于1年，计算频率为日线则不受限制</p></li>
<li><p><strong>frequency (const char*)</strong> – 计算频率为分钟或天，如”3min”,”2day”</p></li>
<li><p><strong>fq (const char*)</strong> – 复权方式（前复权:”before”、后复权:”after”、不复权:”none”）</p></li>
<li><p><strong>skd (SecurityKdata**)</strong> – 获取的K线数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的K线数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_security_kdata</span><span class="p">(</span><span class="s">&quot;sh.000001&quot;</span><span class="p">,</span> <span class="s">&quot;2006/6/2&quot;</span><span class="p">,</span> <span class="s">&quot;2006/6/2&quot;</span><span class="p">,</span> <span class="s">&quot;1min&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>获取当前时间最新N笔K线数据</p></li>
</ol>
<dl class="function">
<dt id="_CPPv424get_last_security_nkdataPKciPP13SecurityKdataPiPKcPKc">
<span id="_CPPv324get_last_security_nkdataPKciPP13SecurityKdataPiPKcPKc"></span><span id="_CPPv224get_last_security_nkdataPKciPP13SecurityKdataPiPKcPKc"></span><span id="get_last_security_nkdata__cCP.i.SecurityKdataPP.iP.cCP.cCP"></span>int <code class="sig-name descname">get_last_security_nkdata</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, SecurityKdata **<em>skd</em>, int *<em>count</em>, <em class="property">const</em> char *<em>frequency</em> = &quot;1min&quot;, <em class="property">const</em> char *<em>fq</em> = &quot;none&quot;<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv424get_last_security_nkdataPKciPP13SecurityKdataPiPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取当日当前时刻前最新的N笔K线数据，支持任意分钟或天的证券K线数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 证券代码列表，带交易所代码，如“sh.601211,sz.000001”</p></li>
<li><p><strong>n (int)</strong> – 请求的数据条数</p></li>
<li><p><strong>frequency (const char*)</strong> – 计算频率为分钟，如”3min”,默认为”1min”</p></li>
<li><p><strong>fq (const char*)</strong> – 复权方式(前复权:”before”、后复权:”after”、不复权:”none”，默认为”none”)</p></li>
<li><p><strong>skd (SecurityKdata**)</strong> – 获取的K线数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的K线数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_last_security_nkdata</span><span class="p">(</span><span class="s">&quot;sh.601211&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>获取证券指定时刻前后N笔K线数据</p></li>
</ol>
<dl class="function">
<dt id="_CPPv426get_security_nkdata_bytimePKciPKcPKcPKcPP13SecurityKdataPi">
<span id="_CPPv326get_security_nkdata_bytimePKciPKcPKcPKcPP13SecurityKdataPi"></span><span id="_CPPv226get_security_nkdata_bytimePKciPKcPKcPKcPP13SecurityKdataPi"></span><span id="get_security_nkdata_bytime__cCP.i.cCP.cCP.cCP.SecurityKdataPP.iP"></span>int <code class="sig-name descname">get_security_nkdata_bytime</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em>, int <em>n</em>, <em class="property">const</em> char *<em>time</em>, <em class="property">const</em> char *<em>frequency</em>, <em class="property">const</em> char *<em>fq</em>, SecurityKdata **<em>skd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv426get_security_nkdata_bytimePKciPKcPKcPKcPP13SecurityKdataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取指定时刻前后N笔K线数据，支持任意分钟或天的K线数据获取。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol_list (const char*)</strong> – 证券代码列表，带交易所代码，如“sh.601211,sz.000001”</p></li>
<li><p><strong>n (int)</strong> – 请求的数据条数，负数表示向后，正数向前，比如”-10”,”10”</p></li>
<li><p><strong>time (const char*)</strong> – 指定的时间点，比如“2016/1/1 10:0:0”，或者只有日期“2016/1/1”</p></li>
<li><p><strong>frequency (const char*)</strong> – 计算频率，如”3min”，如果是“day”，只支持“1day”</p></li>
<li><p><strong>fq (const char*)</strong> – 复权方式(前复权:”before”、后复权:”after”、不复权:”none”)</p></li>
<li><p><strong>skd (SecurityKdata**)</strong> – 获取的K线数组</p></li>
<li><p><strong>count (int*)</strong> – 获取的K线数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_security_nkdata_bytime</span><span class="p">(</span><span class="s">&quot;sh.601211,sz.000001&quot;</span><span class="p">,</span> <span class="s">&quot;-10&quot;</span><span class="p">,</span><span class="s">&quot;2018/3/16 9:40:0&quot;</span><span class="p">,</span> <span class="s">&quot;3min&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-43">
<span id="id3"></span><h3>5.3. 财务数据接口<a class="headerlink" href="#subtitle2-43" title="永久链接至标题">¶</a></h3>
<p>财务数据，目前是通过SQL从数据库中读取，使用get_fundamentals_field提取出需要的字段,
详细数据说明见 <a class="reference external" href="index.html#document-financial_data">财务数据定义</a></p>
<ol class="arabic simple">
<li><p>获取证券财务数据</p></li>
</ol>
<dl class="function">
<dt id="_CPPv421get_fundamentals_dataPKcPPcPi">
<span id="_CPPv321get_fundamentals_dataPKcPPcPi"></span><span id="_CPPv221get_fundamentals_dataPKcPPcPi"></span><span id="get_fundamentals_data__cCP.cPP.iP"></span>int <code class="sig-name descname">get_fundamentals_data</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>sql</em>, char **<em>sout</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421get_fundamentals_dataPKcPPcPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取某段时间一只股票或多只股票的财务数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sql (const char*)</strong> – Sql查询语句</p></li>
<li><p><strong>sout (char**)</strong> – 获取到的财务数据</p></li>
<li><p><strong>count (int*)</strong> – 获取到的财务数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>提取财务数据字段</p></li>
</ol>
<dl class="function">
<dt id="_CPPv422get_fundamentals_fieldPKcPKci">
<span id="_CPPv322get_fundamentals_fieldPKcPKci"></span><span id="_CPPv222get_fundamentals_fieldPKcPKci"></span><span id="get_fundamentals_field__cCP.cCP.i"></span><em class="property">const</em> char *<code class="sig-name descname">get_fundamentals_field</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>sout</em>, <em class="property">const</em> char *<em>sfield</em>, int <em>nline</em> = -1<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422get_fundamentals_fieldPKcPKci" title="永久链接至目标">¶</a><br /></dt>
<dd><p>根据字段名和行号获取相应字段值。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sout (const char*)</strong> – 传入由接口get_fundamentals_data获取的原始财务数据</p></li>
<li><p><strong>sfield (const char*)</strong> – 字段名</p></li>
<li><p><strong>nline (int)</strong> – 行号，默认值为-1，表示获取所有行对应的字段数据</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回获取到的字段值数据，失败返回空</p>
</dd>
</dl>
</dd></dl>

<p>3.获取财务数据示例</p>
<p>下面的代码实现获取codeinfo表中的字段数据，其它表的数据后续添加后可以参考 <a class="reference external" href="./financial_data.html">财务数据文档</a></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="o">*</span> <span class="n">sSout</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_fundamentals_data</span><span class="p">(</span><span class="s">&quot;select * from codeinfo&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sSout</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">nret</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">get_fundamentals_field</span><span class="p">(</span><span class="n">sSout</span><span class="p">,</span><span class="s">&quot;sec_code&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-44">
<span id="id6"></span><h3>5.4. 辅助函数<a class="headerlink" href="#subtitle2-44" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>获取代码表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412get_codelistPKcPP8CodeInfoPiPKcPKcb">
<span id="_CPPv312get_codelistPKcPP8CodeInfoPiPKcPKcb"></span><span id="_CPPv212get_codelistPKcPP8CodeInfoPiPKcPKcb"></span><span id="get_codelist__cCP.CodeInfoPP.iP.cCP.cCP.b"></span>int <code class="sig-name descname">get_codelist</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>codetab</em>, CodeInfo **<em>ci</em>, int *<em>count</em>, <em class="property">const</em> char *<em>begin_date</em>, <em class="property">const</em> char *<em>end_date</em>, bool <em>onlycode</em> = true<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412get_codelistPKcPP8CodeInfoPiPKcPKcb" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取某个时间段内的代码表信息，包含各种股票列表、基金列表、指数列表、债券列表、期货列表和期权列表。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>codetab (const char*)</strong> – 代码表名，比如“HS300”,详细代码表名见行情财务数据定义</p></li>
<li><p><strong>ci (CodeInfo**)</strong> – 获取的代码信息数据</p></li>
<li><p><strong>count (int*)</strong> – 获取的代码信息数据个数</p></li>
<li><p><strong>begin_date (const char*)</strong> – 开始日期，比如”2017/1/3”,不能为空</p></li>
<li><p><strong>end_date (const char*)</strong> – 结束日期，比如”2017/2/1”,不能为空</p></li>
<li><p><strong>onlycode (bool)</strong> – 是否只需要代码，默认为true，表示只需要代码</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CodeInfo</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_codelist</span><span class="p">(</span><span class="s">&quot;hs300&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>获取证券基础信息</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412get_codeinfoPKcPP8CodeInfoPKc">
<span id="_CPPv312get_codeinfoPKcPP8CodeInfoPKc"></span><span id="_CPPv212get_codeinfoPKcPP8CodeInfoPKc"></span><span id="get_codeinfo__cCP.CodeInfoPP.cCP"></span>int <code class="sig-name descname">get_codeinfo</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>code</em>, CodeInfo **<em>ci</em>, <em class="property">const</em> char *<em>date</em> = nullptr<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412get_codeinfoPKcPP8CodeInfoPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取某天的某个代码信息，包含各种股票、期货和期权。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code (const char*)</strong> – 代码名,形如”市场.代码”,比如”SH.600000”</p></li>
<li><p><strong>ci (CodeInfo**)</strong> – 获取的代码信息数据</p></li>
<li><p><strong>date (const char*)</strong> – 指定的日期，比如”2017/1/3”,默认为NULL,表示当天</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CodeInfo</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_codeinfo</span><span class="p">(</span><span class="s">&quot;SH.600000&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="s">&quot;2017/1/3&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>获取市场交易日历</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413get_tradedatePKcPKcPKcPP9TradeDatePi">
<span id="_CPPv313get_tradedatePKcPKcPKcPP9TradeDatePi"></span><span id="_CPPv213get_tradedatePKcPKcPKcPP9TradeDatePi"></span><span id="get_tradedate__cCP.cCP.cCP.TradeDatePP.iP"></span>int <code class="sig-name descname">get_tradedate</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>market</em>, <em class="property">const</em> char *<em>begin_date</em>, <em class="property">const</em> char *<em>end_date</em>, TradeDate **<em>td</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413get_tradedatePKcPKcPKcPP9TradeDatePi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取某个市场某段时间的交易日期数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>market (const char*)</strong> – 交易所代码,比如“SH”，详细市场代码见行情财务数据定义</p></li>
<li><p><strong>begin_date (const char*)</strong> – 开始日期，比如“2018/2/5”</p></li>
<li><p><strong>end_date (const char*)</strong> – 结束日期，比如“2018/2/10”</p></li>
<li><p><strong>td (TradeDate**)</strong> – 获取的市场交易日期数据</p></li>
<li><p><strong>count (int*)</strong> – 获取的市场交易日期数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TradeDate</span><span class="o">*</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nret</span> <span class="o">=</span> <span class="n">get_tradedate</span><span class="p">(</span><span class="s">&quot;sh&quot;</span><span class="p">,</span><span class="s">&quot;2018/3/4&quot;</span><span class="p">,</span> <span class="s">&quot;2018/3/7&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">std</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nCount</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>获取权息数据</p></li>
</ol>
<dl class="function">
<dt id="_CPPv410get_qxdataPKcPKcPKcPP6QxDataPi">
<span id="_CPPv310get_qxdataPKcPKcPKcPP6QxDataPi"></span><span id="_CPPv210get_qxdataPKcPKcPKcPP6QxDataPi"></span><span id="get_qxdata__cCP.cCP.cCP.QxDataPP.iP"></span>int <code class="sig-name descname">get_qxdata</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol</em>, <em class="property">const</em> char *<em>begin_date</em>, <em class="property">const</em> char *<em>end_date</em>, QxData **<em>qd</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv410get_qxdataPKcPKcPKcPP6QxDataPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>获取某种标的的某段时间的权息数据。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol (const char*)</strong> – 证券代码，带交易所代码，如“SH.600000”</p></li>
<li><p><strong>begin_date (const char*)</strong> – 查询开始日期，如“2017/1/3”</p></li>
<li><p><strong>end_date (const char*)</strong> – 查询结束日期，如“2017/10/20”</p></li>
<li><p><strong>qd (QxData**)</strong> – 获取的权息数据数据</p></li>
<li><p><strong>count (int*)</strong> – 获取的权息数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">QxData</span><span class="o">*</span> <span class="n">qd</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">get_qxdata</span><span class="p">(</span><span class="s">&quot;SH.600000&quot;</span><span class="p">,</span> <span class="s">&quot;2015/1/3&quot;</span><span class="p">,</span> <span class="s">&quot;2017/10/20&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">qd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;get_qxdata fail:%d, msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;get_qxdata succ, count:%d, date:%d, bonus_ratio:%d, dividend:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
    <span class="n">count</span><span class="p">,</span> <span class="n">qd</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">,</span> <span class="n">qd</span><span class="o">-&gt;</span><span class="n">bonus_ratio</span><span class="p">,</span> <span class="n">qd</span><span class="o">-&gt;</span><span class="n">dividend</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<span id="document-realtime_mdapi"></span><div class="section" id="id1">
<h2>6. 实时行情数据<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-51">
<span id="id2"></span><h3>6.1. 订阅<a class="headerlink" href="#subtitle2-51" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>订阅行情</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412md_subscribePKc">
<span id="_CPPv312md_subscribePKc"></span><span id="_CPPv212md_subscribePKc"></span><span id="md_subscribe__cCP"></span>int <code class="sig-name descname">md_subscribe</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412md_subscribePKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>订阅代码列表的行情</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>symbol_list (const char*)</strong> – 订阅串有三节组成, 分别对应交易所.代码.数据类型
现在K线只支持1分钟K线订阅
比如”SH.601211.tick,SZ.000002.bar,SH.000001.index,
SZ.000001.zw,SZ.000001.zc,SZ.000001.fast,SZ.000001.queue”</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nrcode</span> <span class="o">=</span> <span class="n">md_subscribe</span><span class="p">(</span><span class="s">&quot;SH.600000.tick&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>取消订阅行情</p></li>
</ol>
<dl class="function">
<dt id="_CPPv414md_unsubscribePKc">
<span id="_CPPv314md_unsubscribePKc"></span><span id="_CPPv214md_unsubscribePKc"></span><span id="md_unsubscribe__cCP"></span>int <code class="sig-name descname">md_unsubscribe</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol_list</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414md_unsubscribePKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>取消订阅指定代码表的行情。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><p><strong>symbol_list (const char*)</strong> – 取消订阅串有三节组成, 分别对应交易所.代码.数据类型
现在K线只支持1分钟K线订阅
比如”SH.601211.tick,SZ.000002.bar,SH.000001.index,
SZ.000001.zw,SZ.000001.zc,SZ.000001.fast,SZ.000001.queue”</p>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nrcode</span> <span class="o">=</span> <span class="n">md_unsubscribe</span><span class="p">(</span><span class="s">&quot;SH.600000.tick&quot;</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>取消所有订阅的行情</p></li>
</ol>
<dl class="function">
<dt id="_CPPv417md_unsubscribeallv">
<span id="_CPPv317md_unsubscribeallv"></span><span id="_CPPv217md_unsubscribeallv"></span><span id="md_unsubscribeall"></span>int <code class="sig-name descname">md_unsubscribeall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv417md_unsubscribeallv" title="永久链接至目标">¶</a><br /></dt>
<dd><p>退订指定代码表的行情。</p>
<dl class="field-list simple">
<dt class="field-odd">返回</dt>
<dd class="field-odd"><p>成功返回0，失败返回错误码</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">nrcode</span> <span class="o">=</span> <span class="n">md_unsubscribeall</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-52">
<span id="id3"></span><h3>6.2. 行情数据回调<a class="headerlink" href="#subtitle2-52" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>证券Tick行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDSecurityTickCallback">
typedef void <code class="sig-name descname">(*MDSecurityTickCallback)</code><span class="sig-paren">(</span>SecurityTickData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDSecurityTickCallback" title="永久链接至目标">¶</a></dt>
<dd><p>证券tick级数据行情回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>SecurityTickData*</em>) – 回调的证券tick行情对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>设置证券Tick行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_security_tick_callback">
typedef void <code class="sig-name descname">md_set_security_tick_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDSecurityTickCallback" title="MDSecurityTickCallback">MDSecurityTickCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_security_tick_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置证券tick级数据行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDSecurityTickCallback" title="MDSecurityTickCallback"><em>MDSecurityTickCallback</em></a>) – 收到证券tick行情时调用设置的回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="3">
<li><p>指数Tick行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDIndexTickCallback">
typedef void <code class="sig-name descname">(*MDIndexTickCallback)</code><span class="sig-paren">(</span>IndexMarketData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDIndexTickCallback" title="永久链接至目标">¶</a></dt>
<dd><p>指数tick级数据行情回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>IndexMarketData*</em>) – 回调的指数tick对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="4">
<li><p>设置指数Tick行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_index_tick_callback">
typedef void <code class="sig-name descname">md_set_index_tick_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDIndexTickCallback" title="MDIndexTickCallback">MDIndexTickCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_index_tick_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置指数tick级数据行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDIndexTickCallback" title="MDIndexTickCallback"><em>MDIndexTickCallback</em></a>) – 收到指数tick行情时调用设置的回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="5">
<li><p>期货Tick行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDFuturesTickCallback">
typedef void <code class="sig-name descname">(*MDFuturesTickCallback)</code><span class="sig-paren">(</span>FuturesTickData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDFuturesTickCallback" title="永久链接至目标">¶</a></dt>
<dd><p>期货tick级数据行情回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>FuturesTickData*</em>) – 回调的期货tick对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="6">
<li><p>设置期货Tick行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_futures_tick_callback">
typedef void <code class="sig-name descname">md_set_futures_tick_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDFuturesTickCallback" title="MDFuturesTickCallback">MDFuturesTickCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_futures_tick_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置期货tick级数据行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDFuturesTickCallback" title="MDFuturesTickCallback"><em>MDFuturesTickCallback</em></a>) – 收到期货tick行情时调用设置的回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="7">
<li><p>期权Tick行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDOptionsTickCallback">
typedef void <code class="sig-name descname">(*MDOptionsTickCallback)</code><span class="sig-paren">(</span>OptionsTickData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDOptionsTickCallback" title="永久链接至目标">¶</a></dt>
<dd><p>期权tick级数据行情回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>OptionsTickData*</em>) – 回调的期权tick对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="8">
<li><p>设置期权Tick行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_options_tick_callback">
typedef void <code class="sig-name descname">md_set_options_tick_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDOptionsTickCallback" title="MDOptionsTickCallback">MDOptionsTickCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_options_tick_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置期权tick级数据行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDOptionsTickCallback" title="MDOptionsTickCallback"><em>MDOptionsTickCallback</em></a>) – 收到期权tick行情时调用设置的回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="9">
<li><p>逐笔数据行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDTickByTickCallback">
typedef void <code class="sig-name descname">(*MDTickByTickCallback)</code><span class="sig-paren">(</span>TickByTickData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDTickByTickCallback" title="永久链接至目标">¶</a></dt>
<dd><p>逐笔数据行情回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>TickByTickData*</em>) – 回调的逐笔数据对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="10">
<li><p>设置逐笔数据行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_tickbytick_callback">
typedef void <code class="sig-name descname">md_set_tickbytick_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDTickByTickCallback" title="MDTickByTickCallback">MDTickByTickCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_tickbytick_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置逐笔数据行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDTickByTickCallback" title="MDTickByTickCallback"><em>MDTickByTickCallback</em></a>) – 收到逐笔行情时调用设置的回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="11">
<li><p>委托队列数据回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDOrderQueueCallback">
typedef void <code class="sig-name descname">(*MDOrderQueueCallback)</code><span class="sig-paren">(</span>OrderQueueData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDOrderQueueCallback" title="永久链接至目标">¶</a></dt>
<dd><p>委托队列数据回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>OrderQueueData*</em>) – 回调的委托队列数据对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="12">
<li><p>设置委托队列数据回调方法</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_orderqueue_callback">
typedef void <code class="sig-name descname">md_set_orderqueue_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDOrderQueueCallback" title="MDOrderQueueCallback">MDOrderQueueCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_orderqueue_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置委托队列数据回调方法</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDOrderQueueCallback" title="MDOrderQueueCallback"><em>MDOrderQueueCallback</em></a>) – 委托队列数据回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="13">
<li><p>Tick行情回调示例</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">OnSecurityTickData</span><span class="p">(</span><span class="n">SecurityTickData</span><span class="o">*</span> <span class="n">tick</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">da</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnSecurityTickData time:%d, symbol:%s, price:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">tick</span><span class="o">-&gt;</span><span class="n">time</span><span class="p">,</span> <span class="n">tick</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span> <span class="n">tick</span><span class="o">-&gt;</span><span class="n">match</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">md_set_security_tick_callback</span><span class="p">(</span><span class="n">OnSecurityTickData</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="14">
<li><p>证券K线行情回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDSecurityKdataCallback">
typedef void <code class="sig-name descname">(*MDSecurityKdataCallback)</code><span class="sig-paren">(</span>SecurityKdata*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDSecurityKdataCallback" title="永久链接至目标">¶</a></dt>
<dd><p>证券K线数据回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>SecurityKdata*</em>) – 回调的证券K线对象</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="15">
<li><p>设置证券K线行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_security_kdata_callback">
void <code class="sig-name descname">md_set_security_kdata_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDSecurityKdataCallback" title="MDSecurityKdataCallback">MDSecurityKdataCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_security_kdata_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置证券K线数据行情事件回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDSecurityKdataCallback" title="MDSecurityKdataCallback"><em>MDSecurityKdataCallback</em></a>) – 证券K线回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="16">
<li><p>K线行情回调示例</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">OnSecurityKdata</span><span class="p">(</span><span class="n">SecurityKdata</span><span class="o">*</span> <span class="n">kdata</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ad</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnSecurityKdata time:%d-%d, symbol:%s, open:%d, close:%d, volume:%lld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">,</span> <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">time</span><span class="p">,</span> <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span> <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">,</span> <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">close</span><span class="p">,</span> <span class="n">kdata</span><span class="o">-&gt;</span><span class="n">volume</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">md_set_security_kdata_callback</span><span class="p">(</span><span class="n">OnSecurityKdata</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-53">
<span id="id4"></span><h3>6.3. 市场日期变更回调<a class="headerlink" href="#subtitle2-53" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>市场日期更新回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDDateUpdateCallback">
typedef void<code class="sig-name descname">(*MDDateUpdateCallback)</code><span class="sig-paren">(</span>DateUpdateData*<em> res</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDDateUpdateCallback" title="永久链接至目标">¶</a></dt>
<dd><p>市场日期更新回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<em>DateUpdateData*</em>) – 市场日期变更的数据对象，res中的date是市场的当前交易日，即T日</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>设置市场日期更新行情回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_date_update_callback">
void <code class="sig-name descname">md_set_date_update_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDDateUpdateCallback" title="MDDateUpdateCallback">MDDateUpdateCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_date_update_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置市场日期更新行情回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDDateUpdateCallback" title="MDDateUpdateCallback"><em>MDDateUpdateCallback</em></a>) – 市场日期更新的回调处理函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="3">
<li><p>市场日期更新回调示例</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">OnDateUpdate</span><span class="p">(</span><span class="n">DateUpdateData</span><span class="o">*</span> <span class="n">res</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnDateUpdate market:%s, date:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">market</span><span class="p">,</span> <span class="n">res</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">md_set_date_update_callback</span><span class="p">(</span><span class="n">OnDateUpdate</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-54">
<span id="id5"></span><h3>6.4. 行情连接状态回调<a class="headerlink" href="#subtitle2-54" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>行情连接状态回调函数</p></li>
</ol>
<dl class="type">
<dt id="c.MDStatusChangeCallback">
typedef void <code class="sig-name descname">(*MDStatusChangeCallback)</code><span class="sig-paren">(</span>int<em> conn_status</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.MDStatusChangeCallback" title="永久链接至目标">¶</a></dt>
<dd><p>证券K线数据回调函数定义</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn_status</strong> (<em>int</em>) – 连接状态,目前状态支持”连接断开或失败”：0、”连接成功”：1</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>设置行情连接状态回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.md_set_status_change_callback">
typedef void <code class="sig-name descname">md_set_status_change_callback</code><span class="sig-paren">(</span><a class="reference internal" href="index.html#c.MDStatusChangeCallback" title="MDStatusChangeCallback">MDStatusChangeCallback</a><em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.md_set_status_change_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置证券K线数据行情事件回调函数</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<a class="reference internal" href="index.html#c.MDStatusChangeCallback" title="MDStatusChangeCallback"><em>MDStatusChangeCallback</em></a>) – 行情连接状态回调方法</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="3">
<li><p>行情连接状态回调示例</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">OnMdConnectStatus</span><span class="p">(</span><span class="kt">int</span> <span class="n">nstatus</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">sd</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nstatus</span><span class="p">)</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;md connected</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;md disconnected</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">md_set_status_change_callback</span><span class="p">(</span><span class="n">OnMdConnectStatus</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<span id="document-tdapi"></span><div class="section" id="id1">
<h2>7. 实盘交易<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-61">
<span id="id2"></span><h3>7.1. 交易接口<a class="headerlink" href="#subtitle2-61" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>开多仓</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412td_open_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc">
<span id="_CPPv312td_open_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="_CPPv212td_open_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="td_open_long__cCP.AccountType.cCP.int64_t.i.OrderType.cP.i.HedgeFlag.cCP.cCP"></span>int <code class="sig-name descname">td_open_long</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>symbol</em>, int64_t <em>price</em>, int <em>volume</em>, OrderType <em>order_type</em>, char *<em>order_id</em>, int <em>length</em>, HedgeFlag <em>hedge_flag</em> = HedgeFlag_Placeholder, <em class="property">const</em> char *<em>ext_info</em> = NULL, <em class="property">const</em> char *<em>cl_order_id</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412td_open_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>开多仓，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.600000, CFFEX.IF1511</p></li>
<li><p><strong>price (int64_t)</strong> – 委托价，如果price=0为市价单，否则为限价单，扩大1万倍</p></li>
<li><p><strong>volume (int)</strong> – 委托量，大于0</p></li>
<li><p><strong>order_type (OrderType)</strong> – 市价单/限价单，市价单有多种类型</p></li>
<li><p><strong>order_id (char*)</strong> – 输出参数，同步下单立即返回后台系统生成的内部订单id，异步下单返回为空</p></li>
<li><p><strong>hedge_flag</strong> – 期货投机、套利、套保标志，见HedgeFlag定义</p></li>
<li><p><strong>length (int)</strong> – 传入的order_id内存长度</p></li>
<li><p><strong>ext_info (const char*)</strong> – 委托需要带入的扩展信息，格式为：key1=v1&amp;key2=v2
目前支持的key有comb_id（UFX期货组合编号），plate（期权板块）</p></li>
<li><p><strong>cl_order_id (const char*)</strong> – NULL为同步下单，非NULL值为异步下单</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="n">LEN_ID</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;SHFE.au1808&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_open_long</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Futures</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="mi">2700000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_open_long fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_open_long succ, symbol:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">symbol</span><span class="p">,</span> <span class="n">order_id</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>平多仓</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413td_close_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc">
<span id="_CPPv313td_close_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="_CPPv213td_close_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="td_close_long__cCP.AccountType.cCP.int64_t.i.OrderType.cP.i.HedgeFlag.cCP.cCP"></span>int <code class="sig-name descname">td_close_long</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>symbol</em>, int64_t <em>price</em>, int <em>volume</em>, OrderType <em>order_type</em>, char *<em>order_id</em>, int <em>length</em>, HedgeFlag <em>hedge_flag</em> = HedgeFlag_Placeholder, <em class="property">const</em> char *<em>ext_info</em> = NULL, <em class="property">const</em> char *<em>cl_order_id</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413td_close_longPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>平多仓，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.600000, CFFEX.IF1511</p></li>
<li><p><strong>price (int64_t)</strong> – 委托价，如果price=0为市价单，否则为限价单，扩大1万倍</p></li>
<li><p><strong>volume (int)</strong> – 委托量，大于0</p></li>
<li><p><strong>order_type (OrderType)</strong> – 市价单/限价单，市价单有多种类型</p></li>
<li><p><strong>order_id (char*)</strong> – 输出参数，同步下单立即返回后台系统生成的内部订单id，异步下单返回为空</p></li>
<li><p><strong>length (int)</strong> – 传入的order_id内存长度</p></li>
<li><p><strong>hedge_flag</strong> – 期货投机、套利、套保标志，见HedgeFlag定义</p></li>
<li><p><strong>ext_info (const char*)</strong> – 委托需要带入的扩展信息，格式为：key1=v1&amp;key2=v2
目前支持的key有comb_id（UFX期货组合编号），plate（期权板块）</p></li>
<li><p><strong>cl_order_id (const char*)</strong> – NULL为同步下单，非NULL值为异步下单</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="n">LEN_ID</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;SHFE.au1808&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_close_long</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Futures</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="mi">2700000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_close_long fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_close_long succ, symbol:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">symbol</span><span class="p">,</span> <span class="n">order_id</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>开空仓</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413td_open_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc">
<span id="_CPPv313td_open_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="_CPPv213td_open_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="td_open_short__cCP.AccountType.cCP.int64_t.i.OrderType.cP.i.HedgeFlag.cCP.cCP"></span>int <code class="sig-name descname">td_open_short</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>symbol</em>, int64_t <em>price</em>, int <em>volume</em>, OrderType <em>order_type</em>, char *<em>order_id</em>, int <em>length</em>, HedgeFlag <em>hedge_flag</em> = HedgeFlag_Placeholder, <em class="property">const</em> char *<em>ext_info</em> = NULL, <em class="property">const</em> char *<em>cl_order_id</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413td_open_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>开空仓，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.600000, CFFEX.IF1511</p></li>
<li><p><strong>price (int64_t)</strong> – 委托价，如果price=0为市价单，否则为限价单，扩大1万倍</p></li>
<li><p><strong>volume (int)</strong> – 委托量，大于0</p></li>
<li><p><strong>order_type (OrderType)</strong> – 市价单/限价单，市价单有多种类型</p></li>
<li><p><strong>order_id (char*)</strong> – 输出参数，同步下单立即返回后台系统生成的内部订单id，异步下单返回为空</p></li>
<li><p><strong>length (int)</strong> – 传入的order_id内存长度</p></li>
<li><p><strong>hedge_flag</strong> – 期货投机、套利、套保标志，见HedgeFlag定义</p></li>
<li><p><strong>ext_info (const char*)</strong> – 委托需要带入的扩展信息，格式为：key1=v1&amp;key2=v2
目前支持的key有comb_id（UFX期货组合编号），plate（期权板块）</p></li>
<li><p><strong>cl_order_id (const char*)</strong> – NULL为同步下单，非NULL值为异步下单</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="n">LEN_ID</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;SHFE.au1808&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_open_short</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Futures</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="mi">2700000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_open_short fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_open_short succ, symbol:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">symbol</span><span class="p">,</span> <span class="n">order_id</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>平空仓</p></li>
</ol>
<dl class="function">
<dt id="_CPPv414td_close_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc">
<span id="_CPPv314td_close_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="_CPPv214td_close_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc"></span><span id="td_close_short__cCP.AccountType.cCP.int64_t.i.OrderType.cP.i.HedgeFlag.cCP.cCP"></span>int <code class="sig-name descname">td_close_short</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>symbol</em>, int64_t <em>price</em>, int <em>volume</em>, OrderType <em>order_type</em>, char *<em>order_id</em>, int <em>length</em>, HedgeFlag <em>hedge_flag</em> = HedgeFlag_Placeholder, <em class="property">const</em> char *<em>ext_info</em> = NULL, <em class="property">const</em> char *<em>cl_order_id</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414td_close_shortPKc11AccountTypePKc7int64_ti9OrderTypePci9HedgeFlagPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>开空仓，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.600000, CFFEX.IF1511</p></li>
<li><p><strong>price (int64_t)</strong> – 委托价，如果price=0为市价单，否则为限价单，扩大1万倍</p></li>
<li><p><strong>volume (int)</strong> – 委托量，大于0</p></li>
<li><p><strong>order_type (OrderType)</strong> – 市价单/限价单，市价单有多种类型</p></li>
<li><p><strong>order_id (char*)</strong> – 输出参数，同步下单立即返回后台系统生成的内部订单id，异步下单返回为空</p></li>
<li><p><strong>length (int)</strong> – 传入的order_id内存长度</p></li>
<li><p><strong>hedge_flag</strong> – 期货投机、套利、套保标志，见HedgeFlag定义</p></li>
<li><p><strong>ext_info (const char*)</strong> – 委托需要带入的扩展信息，格式为：key1=v1&amp;key2=v2
目前支持的key有comb_id（UFX期货组合编号），plate（期权板块）</p></li>
<li><p><strong>cl_order_id (const char*)</strong> – NULL为同步下单，非NULL值为异步下单</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="n">LEN_ID</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;SHFE.au1808&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_close_short</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Futures</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="mi">2700000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_close_short fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_close_short succ, symbol:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">symbol</span><span class="p">,</span> <span class="n">order_id</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>批量下单</p></li>
</ol>
<dl class="function">
<dt id="_CPPv48td_orderPKc11AccountTypeP8OrderReqii">
<span id="_CPPv38td_orderPKc11AccountTypeP8OrderReqii"></span><span id="_CPPv28td_orderPKc11AccountTypeP8OrderReqii"></span><span id="td_order__cCP.AccountType.OrderReqP.i.i"></span>int <code class="sig-name descname">td_order</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, OrderReq *<em>orders</em>, int <em>reqnum</em>, int <em>async</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv48td_orderPKc11AccountTypeP8OrderReqii" title="永久链接至目标">¶</a><br /></dt>
<dd><p>批量下单，同步异步使用一个接口，仅支持同一个资金账号批量下单。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>orders (OrderReq*)</strong> – 传入委托请求对象数组，返回后台系统生成的内部订单id</p></li>
<li><p><strong>reqnum (int)</strong> – 委托请求对象个数</p></li>
<li><p><strong>async (int)</strong> – 是否异步，0：同步下单(默认)，非0：异步下单(需在OrderReq明细中返回order_id)</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 买上期所au1808黄金合约</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;shfE.au1808&quot;</span><span class="p">;</span>
<span class="n">OrderReq</span><span class="o">*</span> <span class="n">orders</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OrderReq</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="n">memset</span><span class="p">(</span><span class="n">orders</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">OrderReq</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>

<span class="n">strncpy</span><span class="p">(</span><span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">symbol</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">symbol</span><span class="p">));</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">order_type</span> <span class="o">=</span> <span class="n">OrderType_LMT</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">side</span> <span class="o">=</span> <span class="n">OrderSide_Long_Open</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">volume</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">price</span> <span class="o">=</span> <span class="mi">2700000</span><span class="p">;</span>     <span class="c1">// 价格扩大1万倍</span>

<span class="n">strncpy</span><span class="p">(</span><span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">symbol</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">symbol</span><span class="p">));</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">order_type</span> <span class="o">=</span> <span class="n">OrderType_LMT</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">side</span> <span class="o">=</span> <span class="n">OrderSide_Long_Open</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">volume</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">orders</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">price</span> <span class="o">=</span> <span class="mi">2700000</span><span class="p">;</span>     <span class="c1">// 价格扩大1万倍</span>

<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_order</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Futures</span><span class="p">,</span> <span class="n">orders</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_open_long fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_order, order[%d]: order_id:%s, symbol:%s, order_status:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">i</span><span class="p">,</span> <span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">order_id</span><span class="p">,</span> <span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">symbol</span><span class="p">,</span> <span class="n">orders</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">order_status</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">delete</span> <span class="n">orders</span><span class="p">;</span>
<span class="n">orders</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>逆回购</p></li>
</ol>
<dl class="function">
<dt id="_CPPv421td_reverse_repurchasePKc11AccountTypePKc8uint64_tiPciPKc">
<span id="_CPPv321td_reverse_repurchasePKc11AccountTypePKc8uint64_tiPciPKc"></span><span id="_CPPv221td_reverse_repurchasePKc11AccountTypePKc8uint64_tiPciPKc"></span><span id="td_reverse_repurchase__cCP.AccountType.cCP.uint64_t.i.cP.i.cCP"></span>int <code class="sig-name descname">td_reverse_repurchase</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>symbol</em>, uint64_t <em>price</em>, int <em>volume</em>, char *<em>order_id</em>, int <em>length</em>, <em class="property">const</em> char *<em>cl_order_id</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv421td_reverse_repurchasePKc11AccountTypePKc8uint64_tiPciPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>逆回购下单，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.204001, SZ.131810，目前仅支持1天期</p></li>
<li><p><strong>price (int64_t)</strong> – 委托价，逆回购为利率扩大1万倍</p></li>
<li><p><strong>volume (int)</strong> – 委托量，单位为张，上海单笔最少1000张或是其整数倍，深圳单笔最少10张或是其整数倍</p></li>
<li><p><strong>order_id (char*)</strong> – 输出参数，同步下单立即返回后台系统生成的内部订单id，异步下单返回为空</p></li>
<li><p><strong>length (int)</strong> – 传入的order_id内存长度</p></li>
<li><p><strong>cl_order_id (const char*)</strong> – NULL为同步下单，非NULL值为异步下单</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">order_id</span><span class="p">[</span><span class="n">LEN_ID</span><span class="p">];</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;SH.204001&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_reverse_repurchase</span><span class="p">(</span><span class="s">&quot;00001057&quot;</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="mi">27000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">OrderType_LMT</span><span class="p">,</span> <span class="n">order_id</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">order_id</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_reverse_repurchase fail:%d, msg:%s, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">symbol</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_reverse_repurchase succ, symbol:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">symbol</span><span class="p">,</span> <span class="n">order_id</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>批量撤单</p></li>
</ol>
<dl class="function">
<dt id="_CPPv415td_cancel_orderPKc11AccountTypePKcPP12CancelDetailPi">
<span id="_CPPv315td_cancel_orderPKc11AccountTypePKcPP12CancelDetailPi"></span><span id="_CPPv215td_cancel_orderPKc11AccountTypePKcPP12CancelDetailPi"></span><span id="td_cancel_order__cCP.AccountType.cCP.CancelDetailPP.iP"></span>int <code class="sig-name descname">td_cancel_order</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, <em class="property">const</em> char *<em>order_ids</em>, CancelDetail **<em>cancel_list</em> = NULL, int *<em>count</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv415td_cancel_orderPKc11AccountTypePKcPP12CancelDetailPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>批量撤单，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>order_ids (const char**)</strong> – 传入系统返回的订单id，格式为order1,order2,order3</p></li>
<li><p><strong>cancel_list (CancelDetail**)</strong> – 返回的撤单详情列表，传入非NULL，表示同步请求</p></li>
<li><p><strong>count (int)</strong> – 返回的撤单详情列表长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CancelDetail</span><span class="o">*</span> <span class="n">cancelList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">cancelCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_cancel_order</span><span class="p">(</span><span class="s">&quot;6814&quot;</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="n">order_ids</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">cancelList</span><span class="p">,</span>
                          <span class="o">&amp;</span><span class="n">cancelCount</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_cancel_order fail:%d, msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>撤掉全部未完成订单</p></li>
</ol>
<dl class="function">
<dt id="_CPPv419td_cancel_all_orderPKc11AccountTypeiPP12CancelDetailPi">
<span id="_CPPv319td_cancel_all_orderPKc11AccountTypeiPP12CancelDetailPi"></span><span id="_CPPv219td_cancel_all_orderPKc11AccountTypeiPP12CancelDetailPi"></span><span id="td_cancel_all_order__cCP.AccountType.i.CancelDetailPP.iP"></span>int <code class="sig-name descname">td_cancel_all_order</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>account_id</em>, AccountType <em>account_type</em>, int <em>trade_seqno</em> = 0, CancelDetail **<em>cancel_list</em> = NULL, int *<em>count</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419td_cancel_all_orderPKc11AccountTypeiPP12CancelDetailPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>撤销全部未完成订单，同步异步使用一个接口。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>account_id (const char*)</strong> – 资金账户id</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
<li><p><strong>trade_seqno (int)</strong> – 交易序号，即批次号。给0撤全部，给非0值撤指定批次</p></li>
<li><p><strong>cancel_list (CancelDetail**)</strong> – 返回的撤单详情列表，传入非NULL，表示同步请求</p></li>
<li><p><strong>count (int)</strong> – 返回的撤单详情列表长度</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CancelDetail</span><span class="o">*</span> <span class="n">cancelList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">cancelCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_cancel_all_order</span><span class="p">(</span><span class="s">&quot;6814&quot;</span><span class="p">,</span> <span class="n">AccountType_Stock</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cancelList</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">cancelCount</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_cancel_all_order fail:%d, msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-62">
<span id="id3"></span><h3>7.2. 交易事件<a class="headerlink" href="#subtitle2-62" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>订单委托应答回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv416OrderRspCallback">
<span id="_CPPv316OrderRspCallback"></span><span id="_CPPv216OrderRspCallback"></span><span id="OrderRspCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">OrderRspCallback</code>)<span class="sig-paren">(</span><em class="property">const</em> OrderRsp *order_rsp, int count, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416OrderRspCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>订单委托应答事件回调类型。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order_rsp (const OrderRsp*)</strong> – 订单委托应答数组对象</p></li>
<li><p><strong>count (int)</strong> – 订单委托应答数组个数</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="2">
<li><p>设置订单委托应答回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.td_set_order_rsp_callback">
void <code class="sig-name descname">td_set_order_rsp_callback</code><span class="sig-paren">(</span>OrderRspCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.td_set_order_rsp_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置订单委托应答事件回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>OrderRspCallback</em>) – 回调处理函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据，作为回调函数参数输入</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 订单委托应答事件回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnOrderRsp</span><span class="p">(</span><span class="k">const</span> <span class="n">OrderRsp</span><span class="o">*</span> <span class="n">order_rsp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">order_rsp</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnOrderRsp, order_rsp:%p, count:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">order_rsp</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span>
            <span class="s">&quot;OnOrderRsp, order_id:%s, cl_order_id:%s, err_code:%d, &quot;</span>
            <span class="s">&quot;err_msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">order_id</span><span class="p">,</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">cl_order_id</span><span class="p">,</span>
            <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_code</span><span class="p">,</span> <span class="n">order_rsp</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_msg</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 设置委托应答回调处理函数</span>
<span class="n">td_set_order_rsp_callback</span><span class="p">(</span><span class="n">OnOrderRsp</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>成交回报回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv419TradeReportCallback">
<span id="_CPPv319TradeReportCallback"></span><span id="_CPPv219TradeReportCallback"></span><span id="TradeReportCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">TradeReportCallback</code>)<span class="sig-paren">(</span><em class="property">const</em> Trade *trade, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419TradeReportCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>成交回报事件回调类型。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trade (const Trade*)</strong> – 回调的成交对象</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="4">
<li><p>设置成交回报回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.td_set_trade_report_callback">
void <code class="sig-name descname">td_set_trade_report_callback</code><span class="sig-paren">(</span>TradeReportCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.td_set_trade_report_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置成交回报事件回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>TradeReportCallback</em>) – 回调处理函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据，作为回调函数参数输入</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 成交回报事件回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnTradeReport</span><span class="p">(</span><span class="k">const</span> <span class="n">Trade</span><span class="o">*</span> <span class="n">trade</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">trade</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnTradeReport, trade:%p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">trade</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;OnTradeReport, strategy_id:%s, run_id:%s, order_id:%s, cl_order_id:%s, &quot;</span>
        <span class="s">&quot;symbol:%s, account_id:%s, account_type:%d, date:%d, trade_seqno:%d, &quot;</span>
        <span class="s">&quot;side:%d, order_type:%d, exec_type:%d, volume:%d, price:%lu, &quot;</span>
        <span class="s">&quot;turnover:%lu, transact_time:%lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">trade</span><span class="o">-&gt;</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">run_id</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">order_id</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">trade</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">account_id</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">account_type</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">,</span>
        <span class="n">trade</span><span class="o">-&gt;</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">side</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">order_type</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">exec_type</span><span class="p">,</span>
        <span class="n">trade</span><span class="o">-&gt;</span><span class="n">volume</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">price</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">turnover</span><span class="p">,</span> <span class="n">trade</span><span class="o">-&gt;</span><span class="n">transact_time</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 设置成交回报回调处理函数</span>
<span class="n">td_set_trade_report_callback</span><span class="p">(</span><span class="n">OnTradeReport</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>撤单应答回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv419CancelOrderCallback">
<span id="_CPPv319CancelOrderCallback"></span><span id="_CPPv219CancelOrderCallback"></span><span id="CancelOrderCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">CancelOrderCallback</code>)<span class="sig-paren">(</span><em class="property">const</em> CancelDetail *cancel_detail, int count, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419CancelOrderCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>撤单应答事件回调类型。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cancel_detail (const CancelDetail*)</strong> – 撤单应答数组对象</p></li>
<li><p><strong>count (int)</strong> – 撤单应答数组个数</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="6">
<li><p>设置撤单应答回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.td_set_cancel_order_callback">
void <code class="sig-name descname">td_set_cancel_order_callback</code><span class="sig-paren">(</span>CancelOrderCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.td_set_cancel_order_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置撤单应答事件回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>CancelOrderCallback</em>) – 回调处理函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据，作为回调函数参数输入</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 撤单应答事件回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnCancelOrder</span><span class="p">(</span><span class="k">const</span> <span class="n">CancelDetail</span><span class="o">*</span> <span class="n">cancel_detail</span><span class="p">,</span> <span class="kt">int</span> <span class="n">count</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">cancel_detail</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnCancelOrder, order:%p, count:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">cancel_detail</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span>
            <span class="s">&quot;OnCancelOrder, order_id:%s, cancel_order_id:%s, err_code:%d, err_msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
            <span class="n">cancel_detail</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">order_id</span><span class="p">,</span> <span class="n">cancel_detail</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">cancel_order_id</span><span class="p">,</span>
            <span class="n">cancel_detail</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_code</span><span class="p">,</span> <span class="n">cancel_detail</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">err_msg</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 设置撤单应答事件回调处理函数</span>
<span class="n">td_set_cancel_order_callback</span><span class="p">(</span><span class="n">OnCancelOrder</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>订单状态变化回调函数</p></li>
</ol>
<dl class="type">
<dt id="_CPPv419OrderStatusCallback">
<span id="_CPPv319OrderStatusCallback"></span><span id="_CPPv219OrderStatusCallback"></span><span id="OrderStatusCallback"></span><em class="property">typedef </em>void (*<code class="sig-name descname">OrderStatusCallback</code>)<span class="sig-paren">(</span><em class="property">const</em> Order *res, void *user_data<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv419OrderStatusCallback" title="永久链接至目标">¶</a><br /></dt>
<dd><p>撤单应答事件回调类型。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res (const Order*)</strong> – 回调的订单对象</p></li>
<li><p><strong>user_data (void*)</strong> – 用户自定义参数</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<ol class="arabic simple" start="8">
<li><p>设置订单状态变化回调函数</p></li>
</ol>
<dl class="function">
<dt id="c.td_set_order_status_callback">
void <code class="sig-name descname">td_set_order_status_callback</code><span class="sig-paren">(</span>OrderStatusCallback<em> cb</em>, void*<em> user_data</em><span class="sig-paren">)</span><a class="headerlink" href="#c.td_set_order_status_callback" title="永久链接至目标">¶</a></dt>
<dd><p>设置订单状态变化事件回调函数。</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cb</strong> (<em>OrderStatusCallback</em>) – 回调处理函数</p></li>
<li><p><strong>user_data</strong> (<em>void*</em>) – 用户自定义参数，与回调相关的任意类型数据，作为回调函数参数输入</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 订单状态变化回调处理函数</span>
<span class="kt">void</span> <span class="nf">OnOrderStatus</span><span class="p">(</span><span class="k">const</span> <span class="n">Order</span><span class="o">*</span> <span class="n">order</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">user_data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">order</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;OnOrderStatus, order:%p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">order</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;OnOrderStatus, strategy_id:%s, run_id:%s, order_id:%s, cl_order_id:%s, &quot;</span>
        <span class="s">&quot;symbol:%s, account_id:%s, account_type:%d, date:%d, trade_seqno:%d, &quot;</span>
        <span class="s">&quot;order_status:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">order</span><span class="o">-&gt;</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">run_id</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">order_id</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">order</span><span class="o">-&gt;</span><span class="n">symbol</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">account_id</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">account_type</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">date</span><span class="p">,</span>
        <span class="n">order</span><span class="o">-&gt;</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">order</span><span class="o">-&gt;</span><span class="n">order_status</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 设置订单状态变化回调处理函数</span>
<span class="n">td_set_order_status_callback</span><span class="p">(</span><span class="n">OnOrderStatus</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-63">
<span id="id4"></span><h3>7.3. 订单<a class="headerlink" href="#subtitle2-63" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>查订单详情</p></li>
</ol>
<dl class="function">
<dt id="_CPPv412td_get_orderPKcP5Order">
<span id="_CPPv312td_get_orderPKcP5Order"></span><span id="_CPPv212td_get_orderPKcP5Order"></span><span id="td_get_order__cCP.OrderP"></span>int <code class="sig-name descname">td_get_order</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>order_id</em>, Order *<em>ret_order</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv412td_get_orderPKcP5Order" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查订单详情</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order_id (const char*)</strong> – 后台生成的订单id</p></li>
<li><p><strong>ret_order (Order*)</strong> – 返回对应订单详情</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Order</span> <span class="n">order</span><span class="p">;</span>
<span class="n">string</span> <span class="n">order_id</span> <span class="o">=</span> <span class="s">&quot;012018071014580000000049&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_order</span><span class="p">(</span><span class="n">order_id</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">order</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_order ret:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_order fail:%d, msg:%s, order_id:%s&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">order_id</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span>
    <span class="s">&quot;</span><span class="se">\t</span><span class="s">Order Detail: strategy_id:%s, run_id:%s, order_id:%s, cl_order_id:%s, &quot;</span>
    <span class="s">&quot;symbol:%s, account_id:%s, account_type:%d, date:%d, &quot;</span>
    <span class="s">&quot;trade_seqno:%d, order_status:%d, order_type:%d, side:%d, &quot;</span>
    <span class="s">&quot;credit_type:%d, volume:%d, price:%lu, filled_volume:%d, &quot;</span>
    <span class="s">&quot;filled_turnover:%lu, err_code:%d, err_msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
    <span class="n">order</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">cl_order_id</span><span class="p">,</span>
    <span class="n">order</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
    <span class="n">order</span><span class="p">.</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_status</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">side</span><span class="p">,</span>
    <span class="n">order</span><span class="p">.</span><span class="n">credit_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">filled_volume</span><span class="p">,</span>
    <span class="n">order</span><span class="p">.</span><span class="n">filled_turnover</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_msg</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>查策略实例订单列表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413td_get_ordersiPiPP5OrderPiPKcPKc">
<span id="_CPPv313td_get_ordersiPiPP5OrderPiPKcPKc"></span><span id="_CPPv213td_get_ordersiPiPP5OrderPiPKcPKc"></span><span id="td_get_orders__i.iP.OrderPP.iP.cCP.cCP"></span>int <code class="sig-name descname">td_get_orders</code><span class="sig-paren">(</span>int <em>page_num</em>, int *<em>page_size</em>, Order **<em>ret_orders</em>, int *<em>total_size</em> = NULL, <em class="property">const</em> char *<em>begin_date</em> = NULL, <em class="property">const</em> char *<em>end_date</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413td_get_ordersiPiPP5OrderPiPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例订单列表，支持分页查询</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page_num (int)</strong> – page_num表示此次分页请求从哪一页开始，第一页page_num为1</p></li>
<li><p><strong>page_size (int*)</strong> – 输入时：分页个数，输出时：实际返回的订单个数</p></li>
<li><p><strong>ret_orders (Order**)</strong> – 返回对应订单对象数组
:param total_size (int*): 返回的订单列表总条数，若不传入，则不返回</p></li>
<li><p><strong>begin_date (const char*)</strong> – 查询开始日期,如果为空或NULL，则为当前交易日，格式为2018/3/1</p></li>
<li><p><strong>end_date (const char*)</strong> – 查询结束日期,如果为空或NULL，则为当前交易日，格式为2018/3/1
end_date必须大于等于begin_date，可以只传begin_date，不可以只传end_date</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 只查询了第一页，当返回page_size为0时表示全部查完</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">kPageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">page_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">page_size</span> <span class="o">=</span> <span class="n">kPageSize</span><span class="p">;</span>
<span class="n">Order</span><span class="o">*</span> <span class="n">orderList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">totalSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_orders</span><span class="p">(</span><span class="n">page_num</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">page_size</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">orderList</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">totalSize</span><span class="p">,</span> <span class="s">&quot;2018/4/1&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_orders fail:%d, msg:%d, page_num:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">page_num</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_orders success, page_num:%d, page_size:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">page_num</span><span class="p">,</span> <span class="n">page_size</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">page_size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Order</span><span class="o">&amp;</span> <span class="n">order</span> <span class="o">=</span> <span class="n">orderList</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Order Detail: strategy_id:%s, run_id:%s, order_id:%s, cl_order_id:%s, &quot;</span>
        <span class="s">&quot;symbol:%s, account_id:%s, account_type:%d, date:%d, &quot;</span>
        <span class="s">&quot;trade_seqno:%d, order_status:%d, order_type:%d, side:%d, &quot;</span>
        <span class="s">&quot;credit_type:%d, volume:%d, price:%lu, filled_volume:%d, &quot;</span>
        <span class="s">&quot;filled_turnover:%lu, err_code:%d, err_msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_status</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">side</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">credit_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">filled_volume</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">filled_turnover</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_msg</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>查未完成订单列表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv418td_get_open_ordersiPiPP5OrderPiPKc">
<span id="_CPPv318td_get_open_ordersiPiPP5OrderPiPKc"></span><span id="_CPPv218td_get_open_ordersiPiPP5OrderPiPKc"></span><span id="td_get_open_orders__i.iP.OrderPP.iP.cCP"></span>int <code class="sig-name descname">td_get_open_orders</code><span class="sig-paren">(</span>int <em>page_num</em>, int *<em>page_size</em>, Order **<em>ret_orders</em>, int *<em>total_size</em> = NULL, <em class="property">const</em> char *<em>date</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv418td_get_open_ordersiPiPP5OrderPiPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查未完成订单列表，支持分页查询</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page_num (int)</strong> – page_num表示此次分页请求从哪一页开始，第一页page_num为1</p></li>
<li><p><strong>page_size (int*)</strong> – 输入时：分页个数，输出时：实际返回的订单个数</p></li>
<li><p><strong>ret_orders (Order**)</strong> – 返回对应订单对象数组
:param total_size (int*): 返回的订单列表总条数，若不传入，则不返回</p></li>
<li><p><strong>date (const char*)</strong> – 查询日期,如果为空或NULL，则为当前交易日，格式为2018/3/1</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 只查询了第一页，当返回page_size为0时表示全部查完</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">kPageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">page_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">page_size</span> <span class="o">=</span> <span class="n">kPageSize</span><span class="p">;</span>
<span class="n">Order</span><span class="o">*</span> <span class="n">orderList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_open_orders</span><span class="p">(</span><span class="n">page_num</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">page_size</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">orderList</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_open_orders fail:%d, msg:%d, page_num:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">page_num</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_open_orders success, page_num:%d, page_size:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">page_num</span><span class="p">,</span> <span class="n">page_size</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">page_size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Order</span><span class="o">&amp;</span> <span class="n">order</span> <span class="o">=</span> <span class="n">orderList</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Order Detail: strategy_id:%s, run_id:%s, order_id:%s, cl_order_id:%s, &quot;</span>
        <span class="s">&quot;symbol:%s, account_id:%s, account_type:%d, date:%d, &quot;</span>
        <span class="s">&quot;trade_seqno:%d, order_status:%d, order_type:%d, side:%d, &quot;</span>
        <span class="s">&quot;credit_type:%d, volume:%d, price:%lu, filled_volume:%d, &quot;</span>
        <span class="s">&quot;filled_turnover:%lu, err_code:%d, err_msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_status</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">order_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">side</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">credit_type</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">filled_volume</span><span class="p">,</span>
        <span class="n">order</span><span class="p">.</span><span class="n">filled_turnover</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_code</span><span class="p">,</span> <span class="n">order</span><span class="p">.</span><span class="n">err_msg</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-64">
<span id="id5"></span><h3>7.4. 成交<a class="headerlink" href="#subtitle2-64" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>查单个订单成交列表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv413td_get_tradesPKcPP5TradePi">
<span id="_CPPv313td_get_tradesPKcPP5TradePi"></span><span id="_CPPv213td_get_tradesPKcPP5TradePi"></span><span id="td_get_trades__cCP.TradePP.iP"></span>int <code class="sig-name descname">td_get_trades</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>order_id</em>, Trade **<em>ret_trades</em>, int *<em>ret_count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv413td_get_tradesPKcPP5TradePi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查单个订单成交列表</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order_id (const char*)</strong> – 后台系统生成的订单id</p></li>
<li><p><strong>ret_trades (Trade**)</strong> – 返回对应成交列表</p></li>
<li><p><strong>ret_count (int*)</strong> – 实际返回的成交个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">Trade</span><span class="o">*</span> <span class="n">tradeList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">string</span> <span class="n">order_id</span> <span class="o">=</span> <span class="s">&quot;012018071014580000000049&quot;</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_trades</span><span class="p">(</span><span class="n">order_id</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">tradeList</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_trades fail:%d, msg:%s, order_id:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">order_id</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Trade</span><span class="o">&amp;</span> <span class="n">trade</span> <span class="o">=</span> <span class="n">tradeList</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Trade Detail: strategy_id:%s, run_id:%s, order_id:%s, &quot;</span>
        <span class="s">&quot;cl_order_id:%s, symbol:%s, account_id:%s, &quot;</span>
        <span class="s">&quot;account_type:%d, date:%d, trade_seqno:%d, side:%d, &quot;</span>
        <span class="s">&quot;order_type:%d, exec_type:%d, volume:%d, &quot;</span>
        <span class="s">&quot;price:%lu, turnover:%lu, transact_time:%ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">order_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">side</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">order_type</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">exec_type</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">turnover</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">transact_time</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>查策略实例成交列表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv422td_get_strategy_tradesiPiPP5TradePiPKcPKc">
<span id="_CPPv322td_get_strategy_tradesiPiPP5TradePiPKcPKc"></span><span id="_CPPv222td_get_strategy_tradesiPiPP5TradePiPKcPKc"></span><span id="td_get_strategy_trades__i.iP.TradePP.iP.cCP.cCP"></span>int <code class="sig-name descname">td_get_strategy_trades</code><span class="sig-paren">(</span>int <em>page_num</em>, int *<em>page_size</em>, Trade **<em>ret_trades</em>, int *<em>total_size</em> = NULL, <em class="property">const</em> char *<em>begin_date</em> = NULL, <em class="property">const</em> char *<em>end_date</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv422td_get_strategy_tradesiPiPP5TradePiPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例成交列表，支持分页查询</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page_num (int)</strong> – page_num表示此次分页请求从哪一页开始，第一页page_num为1</p></li>
<li><p><strong>page_size (int*)</strong> – 输入时：分页个数，输出时：实际返回的成交个数</p></li>
<li><p><strong>ret_trades (Trade**)</strong> – 返回对应成交列表
:param total_size (int*): 返回的成交列表总条数，若不传入，则不返回</p></li>
<li><p><strong>begin_date (const char*)</strong> – 查询开始日期,如果为空或NULL，则为当前交易日，格式为2018/3/1</p></li>
<li><p><strong>end_date (const char*)</strong> – 查询结束日期,如果为空或NULL，则为当前交易日，格式为2018/3/1
end_date必须大于等于begin_date，可以只传begin_date，不可以只传end_date</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 只查询了第一页，当返回page_size为0时表示全部查完</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">Trade</span><span class="o">*</span> <span class="n">tradeList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">kPageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">page_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">page_size</span> <span class="o">=</span> <span class="n">kPageSize</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_strategy_trades</span><span class="p">(</span><span class="n">page_num</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">page_size</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">tradeList</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_strategy_trades fail:%d, msg:%s, page_num:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
           <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">page_num</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_strategy_trades success, page_num:%d, page_size:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
       <span class="n">page_num</span><span class="p">,</span> <span class="n">page_size</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">page_size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Trade</span><span class="o">&amp;</span> <span class="n">trade</span> <span class="o">=</span> <span class="n">tradeList</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Trade Detail: strategy_id:%s, run_id:%s, order_id:%s, &quot;</span>
        <span class="s">&quot;cl_order_id:%s, symbol:%s, account_id:%s, &quot;</span>
        <span class="s">&quot;account_type:%d, date:%d, trade_seqno:%d, side:%d, &quot;</span>
        <span class="s">&quot;order_type:%d, exec_type:%d, volume:%d, &quot;</span>
        <span class="s">&quot;price:%lu, turnover:%lu, transact_time:%ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">order_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">cl_order_id</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">date</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">trade_seqno</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">side</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">order_type</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">exec_type</span><span class="p">,</span>
        <span class="n">trade</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">price</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">turnover</span><span class="p">,</span> <span class="n">trade</span><span class="p">.</span><span class="n">transact_time</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-65">
<span id="id6"></span><h3>7.5. 持仓<a class="headerlink" href="#subtitle2-65" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>查策略实例指定标的持仓</p></li>
</ol>
<dl class="function">
<dt id="_CPPv415td_get_positionPKcPP8PositionPiPKc11AccountType">
<span id="_CPPv315td_get_positionPKcPP8PositionPiPKc11AccountType"></span><span id="_CPPv215td_get_positionPKcPP8PositionPiPKc11AccountType"></span><span id="td_get_position__cCP.PositionPP.iP.cCP.AccountType"></span>int <code class="sig-name descname">td_get_position</code><span class="sig-paren">(</span><em class="property">const</em> char *<em>symbol</em>, Position **<em>ret_positions</em>, int *<em>count</em>, <em class="property">const</em> char *<em>account_id</em> = NULL, AccountType <em>account_type</em> = AccountType_Placeholder<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv415td_get_positionPKcPP8PositionPiPKc11AccountType" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例指定标的持仓，可返回指定资金账号的对应标的持仓</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>symbol (const char*)</strong> – 标的代码，例如SH.600000, CFFEX.IF1511</p></li>
<li><p><strong>ret_positions (Position**)</strong> – 返回对应持仓列表</p></li>
<li><p><strong>count (int*)</strong> – 返回的仓位个数</p></li>
<li><p><strong>account_id (const char*)</strong> – 资金账户id，返回指定资金账号指定标的持仓</p></li>
<li><p><strong>account_type (AccountType)</strong> – 资金账户类型，见AccountType定义</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&quot;000001&quot;</span><span class="p">;</span>
<span class="n">Position</span><span class="o">*</span> <span class="n">positionList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_position</span><span class="p">(</span><span class="n">MarketType_SZSE</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">positionList</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_position fail:%d, msg:%d, market:%d, symbol:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
          <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">MarketType_SZSE</span><span class="p">,</span> <span class="n">symbol</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_position success, market:%d, symbol:%s, count:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
               <span class="n">MarketType_SZSE</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">count</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Position</span><span class="o">&amp;</span> <span class="n">position</span> <span class="o">=</span> <span class="n">positionList</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Position Detail: strategy_id:%s, run_id:%s, account_id:%s, &quot;</span>
        <span class="s">&quot;account_type:%s, symbol:%s, side:%d, volume:%d, avail_volume:%d&quot;</span>
        <span class="s">&quot;frozen_volume:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">side</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">avail_volume</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">frozen_volume</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>查策略实例持仓列表</p></li>
</ol>
<dl class="function">
<dt id="_CPPv416td_get_positionsiPiPP8PositionPiPKcPKc">
<span id="_CPPv316td_get_positionsiPiPP8PositionPiPKcPKc"></span><span id="_CPPv216td_get_positionsiPiPP8PositionPiPKcPKc"></span><span id="td_get_positions__i.iP.PositionPP.iP.cCP.cCP"></span>int <code class="sig-name descname">td_get_positions</code><span class="sig-paren">(</span>int <em>page_num</em>, int *<em>page_size</em>, Position **<em>ret_positions</em>, int *<em>total_size</em> = NULL, <em class="property">const</em> char *<em>begin_date</em> = NULL, <em class="property">const</em> char *<em>end_date</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416td_get_positionsiPiPP8PositionPiPKcPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例持仓列表，支持分页查询</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>page_num (int)</strong> – page_num表示此次分页请求从哪一页开始，第一页page_num为1</p></li>
<li><p><strong>page_size (int*)</strong> – 输入时：分页个数，输出时：实际返回的仓位个数</p></li>
<li><p><strong>ret_positions (Position**)</strong> – 返回对应持仓列表
:param total_size (int*) 返回的持仓列表总条数，若不传入，则不返回</p></li>
<li><p><strong>begin_date (const char*)</strong> – 查询开始日期,如果为空或NULL，则为当前交易日，格式为2018/3/1</p></li>
<li><p><strong>end_date (const char*)</strong> – 查询结束日期,如果为空或NULL，则为当前交易日，格式为2018/3/1
end_date必须大于等于begin_date，可以只传begin_date，不可以只传end_date</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 只查询了第一页，当返回page_size为0时表示全部查完</span>
<span class="n">Position</span><span class="o">*</span> <span class="n">positionList</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">kPageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">page_num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">page_size</span> <span class="o">=</span> <span class="n">kPageSize</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_positions</span><span class="p">(</span><span class="n">page_num</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">page_size</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">positionList</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_positions fail:ret, msg:%s, page_num:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">page_num</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_positions success, page_num:%d, page_size:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_size</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">page_size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Position</span><span class="o">&amp;</span> <span class="n">position</span> <span class="o">=</span> <span class="n">positionList</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">printf</span><span class="p">(</span>
        <span class="s">&quot;</span><span class="se">\t</span><span class="s">Position Detail: strategy_id:%s, run_id:%s, account_id:%s, &quot;</span>
        <span class="s">&quot;account_type:%s, symbol:%s, side:%d, volume:%d, avail_volume:%d&quot;</span>
        <span class="s">&quot;frozen_volume:%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">account_id</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">account_type</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">side</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">volume</span><span class="p">,</span>
        <span class="n">position</span><span class="p">.</span><span class="n">avail_volume</span><span class="p">,</span> <span class="n">position</span><span class="p">.</span><span class="n">frozen_volume</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-66">
<span id="id7"></span><h3>7.6. 资金<a class="headerlink" href="#subtitle2-66" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li><p>查策略实例资金</p></li>
</ol>
<dl class="function">
<dt id="_CPPv411td_get_cashPP4CashPi">
<span id="_CPPv311td_get_cashPP4CashPi"></span><span id="_CPPv211td_get_cashPP4CashPi"></span><span id="td_get_cash__CashPP.iP"></span>int <code class="sig-name descname">td_get_cash</code><span class="sig-paren">(</span>Cash **<em>ret_cash</em>, int *<em>count</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv411td_get_cashPP4CashPi" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例资金</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cash (Cash**)</strong> – 返回策略实例资金账户数据列表</p></li>
<li><p><strong>count (int*)</strong> – 返回的资金账户数据个数</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Cash</span><span class="o">*</span> <span class="n">cash</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_cash</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cash</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">count</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_cash fail:%d, msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_cash succ, count:%d, account_id:%s, account_type:%d, cash:%ld, avail_cash:%ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
    <span class="n">count</span><span class="p">,</span> <span class="n">cash</span><span class="o">-&gt;</span><span class="n">account_id</span><span class="p">,</span> <span class="n">cash</span><span class="o">-&gt;</span><span class="n">account_type</span><span class="p">,</span> <span class="n">cash</span><span class="o">-&gt;</span><span class="n">cash</span><span class="p">,</span> <span class="n">cash</span><span class="o">-&gt;</span><span class="n">avail_cash</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="subtitle2-67">
<span id="id8"></span><h3>7.7. 指标<a class="headerlink" href="#subtitle2-67" title="永久链接至标题">¶</a></h3>
<p>1.查策略实例的收益、风险等指标</p>
<dl class="function">
<dt id="_CPPv416td_get_indicatorP9IndicatorPKc">
<span id="_CPPv316td_get_indicatorP9IndicatorPKc"></span><span id="_CPPv216td_get_indicatorP9IndicatorPKc"></span><span id="td_get_indicator__IndicatorP.cCP"></span>int <code class="sig-name descname">td_get_indicator</code><span class="sig-paren">(</span>Indicator *<em>ret_indicator</em>, <em class="property">const</em> char *<em>date</em> = NULL<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416td_get_indicatorP9IndicatorPKc" title="永久链接至目标">¶</a><br /></dt>
<dd><p>查策略实例的收益、风险等指标</p>
<dl class="field-list simple">
<dt class="field-odd">参数</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ret_indicator(Indicator*)</strong> – 返回策略指定日期的实例的收益、风险指标信息</p></li>
<li><p><strong>date(const char*)</strong> – 查询日期,如果为空或NULL，则为当前日期，格式为2018/3/1</p></li>
</ul>
</dd>
<dt class="field-even">返回</dt>
<dd class="field-even"><p>成功返回0，失败返回错误码，错误码定义在error.h文件中</p>
</dd>
</dl>
</dd></dl>

<p>代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Indicator</span> <span class="n">indicator</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">td_get_indicator</span><span class="p">(</span><span class="o">&amp;</span><span class="n">indicator</span><span class="p">,</span> <span class="s">&quot;2018/3/1&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_indicator fail:%d, msg:%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">hft_strerror</span><span class="p">(</span><span class="n">ret</span><span class="p">));</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;td_get_indicator succ, run_id:%s, algorithm_return:%lf, annual_algo_return:%lf, alpha:%lf, sharpe:%lf&quot;</span><span class="p">,</span>
            <span class="n">indicator</span><span class="p">.</span><span class="n">run_id</span><span class="p">,</span> <span class="n">indicator</span><span class="p">.</span><span class="n">algorithm_return</span><span class="p">,</span> <span class="n">indicator</span><span class="p">.</span><span class="n">annual_algo_return</span><span class="p">,</span> <span class="n">indicator</span><span class="p">.</span><span class="n">alpha</span><span class="p">,</span> <span class="n">indicator</span><span class="p">.</span><span class="n">sharpe</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<span id="document-client"></span><div class="section" id="id1">
<h2>8. 客户端注意事项<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-71">
<span id="id2"></span><h3>8.1. 策略上传与更新<a class="headerlink" href="#subtitle2-71" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>目前客户端 <strong>仅支持ZIP压缩包</strong> 格式上传策略，ZIP压缩算法要使用默认Deflate算法。
同一个策略下的实盘，可以上传不同的策略程序，某个实盘对应是什么策略，建议使用实盘唯一名称来区分。</p>
<p>主入口程序名称：需要输入策略主程序的相对路径，如果压缩包里包含了一层目录，需要带上此目录
例如下图中strategy_params.zip是整个策略的压缩包，压缩包中包含了一层目录，所以主入口程序
名称填入：strategy_params/simple_strategy.exe</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>策略压缩包目录</p></li>
</ol>
<img alt="_images/strategy_upload_01.png" src="_images/strategy_upload_01.png" />
<img alt="_images/strategy_upload_02.png" src="_images/strategy_upload_02.png" />
<ol class="arabic simple" start="2">
<li><p>上传策略</p></li>
</ol>
<img alt="_images/strategy_upload_03.png" src="_images/strategy_upload_03.png" />
</div>
<div class="section" id="subtitle2-72">
<span id="id3"></span><h3>8.2. 策略启动与停止<a class="headerlink" href="#subtitle2-72" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>策略启动时，可以设置停止时间，到这个时间点时策略会自动停止，用户在结束时间点之前，从客户端可以手动停止策略。
如果用户策略不能根据结束时间来决定什么时机来退出，用户可以在策略代码中控制什么条件下策略程序退出。</p>
<p><strong>请注意：客户端的默认策略结束时间是两天后的凌晨4点</strong></p>
<p>策略代码中编写某个条件时退出，需要主动调用stratregy_exit接口来销毁一些资源并更新策略停止时间和上报状态。</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>策略启动</p></li>
</ol>
<img alt="_images/strategy_start.png" src="_images/strategy_start.png" />
<ol class="arabic simple" start="2">
<li><p>策略停止</p></li>
</ol>
<img alt="_images/strategy_stop.png" src="_images/strategy_stop.png" />
</div>
<div class="section" id="subtitle2-73">
<span id="id4"></span><h3>8.3. 下单与资金账号<a class="headerlink" href="#subtitle2-73" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p><strong>请注意：策略代码使用的资金账号和客户端上传使用此策略时，指定的资金账号要一致</strong></p>
<p>策略代码中下单指定了每次下单的账号，所以客户端要使用对应的资金账号，才能使用对应的策略。
否则会出现客户端每日委托页面，查不到对应资金账号的委托单。</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>策略使用的资金账号列表</p></li>
</ol>
<img alt="_images/strategy_account.png" src="_images/strategy_account.png" />
</div>
</div>
<span id="document-Q&A"></span><div class="section" id="q-a">
<h2>9. Q&amp;A<a class="headerlink" href="#q-a" title="永久链接至标题">¶</a></h2>
<div class="section" id="subtitle2-81">
<span id="id1"></span><h3>9.1. 客户端操作问题<a class="headerlink" href="#subtitle2-81" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>针对用户操作客户端时，碰到的问题，做统一解释处理。</p>
</div></blockquote>
<ol class="arabic">
<li><p>什么情况下会出现“不得对敲”</p>
<blockquote>
<div><p>针对某个标的，在下单时，存在未完成委托，且未完成委托和下单的委托能自成交，则该订单会被打回，并报“不得对敲”。</p>
</div></blockquote>
</li>
<li><p>回测模式下，订单显示“待报状态”</p>
<blockquote>
<div><p>回测模式下，每笔委托跟本地行情进行撮合，撮合成功后立即提交订单，不会报到柜台或者交易所。</p>
<p>如果订单显示“待报状态”，可能是客户端更新订单状态较慢，可以稍等一会，并点击[刷新]按钮。</p>
</div></blockquote>
</li>
<li><p>登录客户端时，报“本地网关登录失败”</p>
<blockquote>
<div><p>如下图所示，如果在登录客户端时，报“本地网关登录失败”，验证本地的cs_agent与csm_gw两个服务是否启动，若未启动，则启动。</p>
<p>若启动上述两个服务客户端仍登录失败，则查询gw_glupin是否启动</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/client_load_fail.png" src="_images/client_load_fail.png" />
<img alt="_images/client_load_serve_01.png" src="_images/client_load_serve_01.png" />
<img alt="_images/client_load_serve_02.png" src="_images/client_load_serve_02.png" />
</div>
<div class="section" id="subtitle2-82">
<span id="id2"></span><h3>9.2. 策略模板问题<a class="headerlink" href="#subtitle2-82" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>针对用户运用策略模板时，碰到的问题，做统一解释处理。</p>
</div></blockquote>
<ol class="arabic">
<li><p>运用策略模板下单后，订单全部失败为废单，并报错误信息为”标的代码为空“</p>
<blockquote>
<div><p>在运用策略模板编写策略时，首先要将模板里的kStockAccount更改为自己的账户id</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/strategy_login.png" src="_images/strategy_login.png" />
<ol class="arabic" start="2">
<li><p>读取配置文件失败</p>
<blockquote>
<div><p>（1）代码表填充字段是否正确：上海A股（SHAG），深圳A股（SZAG），上海逆回购（SHNHG），深圳逆回购（SZNHG）</p>
<p>（2）本地sqlite3数据库文件路径是否正确</p>
<p>（3）客户端与策略模板是否为最新版</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/strategy_set_config.png" src="_images/strategy_set_config.png" />
<ol class="arabic" start="3">
<li><p>实盘模式一直显示发送消息wss://xxxx.xxxx.xxxx.xxxx:xxxx超时（当前消息超过20000毫秒未响应）</p>
<blockquote>
<div><p>强制停止该实盘实例。</p>
</div></blockquote>
</li>
</ol>
<p>4.实盘模式下支持的自定义类型</p>
<blockquote>
<div><p>客户端目前不支持float类型，支持int，double，string类型。</p>
</div></blockquote>
<ol class="arabic" start="5">
<li><p>python版本实盘交易未能正常启动</p>
<blockquote>
<div><p>从客户端下载最新的spark包</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/strategy_upload_package.png" src="_images/strategy_upload_package.png" />
<ol class="arabic" start="6">
<li><p>安装python环境时，安装talib报错</p>
<blockquote>
<div><p>到该网站下载适合自己电脑的whl，然后安装
<a class="reference external" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib">https://www.lfd.uci.edu/~gohlke/pythonlibs/#ta-lib</a></p>
</div></blockquote>
</li>
</ol>
<img alt="_images/strategy_python_talib.png" src="_images/strategy_python_talib.png" />
<ol class="arabic" start="7">
<li><p>python实盘模式加密失败</p>
<blockquote>
<div><p>（1）先确定python是否为3.6.5版本;</p>
<p>（2）若提示缺少python37.dll：配置环境变量;</p>
<p>（3）显示’xxxx’ is not a valid module name：说明python文件的命名含有不合法字符（最好不要使用特殊字符），更改python文件的名字。</p>
</div></blockquote>
</li>
<li><p>python版本用pycharm运行策略模板时，发现策略停止不下来</p>
<blockquote>
<div><p>查看代码里是否调用了exit()手动退出的函数，如果有，则去掉该函数。pycharm不支持策略手动退出。</p>
</div></blockquote>
</li>
<li><p>设置实盘实例资金账户密码错误（820024）</p>
<blockquote>
<div><p>将客户端与策略模板均更新到最新版本。</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/strategy_log_info.png" src="_images/strategy_log_info.png" />
</div>
<div class="section" id="subtitle2-83">
<span id="id3"></span><h3>9.3. 行情问题<a class="headerlink" href="#subtitle2-83" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>针对用户遇到的行情问题，做统一解释处理。</p>
</div></blockquote>
<ol class="arabic">
<li><p>回测模式/模拟模式进行测试时，系统报”请求参数非法“</p>
<blockquote>
<div><p>行情问题（代码表里某个数据可能为NULL）。联系相关人员解决行情问题，然后手动清除examplessimple_strategycachecodetable里面的缓存数据。</p>
</div></blockquote>
</li>
</ol>
<img alt="_images/hq_clean_cache.png" src="_images/hq_clean_cache.png" />
<ol class="arabic" start="2">
<li><p>客户进行实盘交易时，连接不上实时行情</p>
<blockquote>
<div><p>（1）联系开发人员将云机上的server.ini配置文件的登录模式修改为订阅模式。</p>
<p>（2) 测试环境的云机设置有按照策略实例计算的最大连接数：30个，如果连接不上实时行情，可联系开发人员排查是否已经到达最大连接数。</p>
<p>（3）实盘环境的云机没有限制连接数量，且每个用户拥有独立的云机，用户可创建多个实例。</p>
</div></blockquote>
</li>
<li><p>行情源问题</p>
<blockquote>
<div><p>测试环境的行情源时获取到交易所的信息缓存到本地，根据用户的订阅信息，推送行情；实盘环境行情是交易所实时推送的。</p>
<p>测试环境所用云机，内存，容量，CPU等各方面较实盘环境所用云机次之，且网络环境也远远不足实盘环境。</p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="subtitle2-84">
<span id="id4"></span><h3>9.4. 其他问题与描述<a class="headerlink" href="#subtitle2-84" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>针对客户可能存在的问题进行描述与解析。</p>
</div></blockquote>
<ol class="arabic">
<li><p>SIP相关</p>
<blockquote>
<div><p>订阅SIP，接收推送信息，在订阅之后，会每天开盘推送。如果要增加债券静态数据，也要订阅SIP，加载静态信息。</p>
</div></blockquote>
</li>
<li><p>君宏君易的系统标志如下：</p>
<blockquote>
<div><p>kSystemType_CLIENT_HFT = 14;</p>
</div></blockquote>
</li>
<li><p>除权除息相关</p>
<blockquote>
<div><p>除权除息日即股权登记日的下一个交易日。在股票的除权除息日，证券交易所都要计算出股票的除权除息价，以作为股东在除权除息日开盘的参考。其意义是股票股利分配给股东的日期。</p>
</div></blockquote>
</li>
<li><p>行情相关南方中心有上海海和深圳的level和level2的行情：</p>
<blockquote>
<div><p>南方中心有上海海和深圳的level和level2的行情：level1指五档行情，level2有十档行情，逐笔委托，逐笔成交等。</p>
</div></blockquote>
</li>
<li><p>云机环境行情</p>
<blockquote>
<div><p>提供了level2十档行情，回测tick数据提供了2016年至今的数据。</p>
</div></blockquote>
</li>
<li><p>客户上传到云机的策略与dll文件是否安全？怎样确保安全？</p>
<blockquote>
<div><p>客户上传的策略相关文件在云机是绝对安全的。</p>
<p>首先客户上传的是exe与dll文件，这两个文件想进行反编译并看懂反编译之后的代码时异常困难的事；</p>
<p>其次，每个云机上都有录屏操作，且该记录会保持半年之久，半年之内均可提供用户调查监控的申请。</p>
</div></blockquote>
</li>
<li><p>本地持仓信息和柜台持仓信息是否保持同步?</p>
<blockquote>
<div><p>不同步。客户在柜台上的持仓还可能是在富易或其他软件下的单，但君易本地只能查询到客户在君易上的交易。</p>
</div></blockquote>
</li>
<li><p>在上海和南方中心做交易各有什么优缺点?</p>
<blockquote>
<div><p>上海数据中心：交易科创版相对于深圳要快一些。</p>
<p>深圳南方中心：交易深股相对较快。</p>
<p>上海数据中心和深圳南方中心拥有独立的数据源。</p>
</div></blockquote>
</li>
<li><p>如何读取随策略包上传到云机的文件？</p>
<blockquote>
<div><p>首先上传文件到云机，随后要获取该文件在云机的绝对路径，进行内容读取。</p>
</div></blockquote>
</li>
</ol>
<p>C++代码示例</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// 提取可执行文件所在路径，保留结尾的&#39;\&#39;符</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">get_exe_path</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">const</span> <span class="kt">size_t</span> <span class="n">max_path</span> <span class="o">=</span> <span class="mi">256</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span><span class="p">;</span>
        <span class="cp">#ifdef _WIN32</span>
        <span class="n">TCHAR</span> <span class="n">file_path</span><span class="p">[</span><span class="n">max_path</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
        <span class="kt">size_t</span> <span class="n">count</span> <span class="o">=</span> <span class="n">GetModuleFileName</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">max_path</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">count</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">s</span><span class="p">;</span> <span class="c1">// empty</span>
        <span class="p">}</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">;</span>
        <span class="kt">size_t</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span><span class="sc">&#39;\\&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">s</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="cp">#else</span>
        <span class="kt">char</span> <span class="n">file_path</span><span class="p">[</span><span class="n">max_path</span><span class="p">];</span>
        <span class="kt">size_t</span> <span class="n">count</span> <span class="o">=</span> <span class="n">readlink</span><span class="p">(</span><span class="s">&quot;/proc/self/exe&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">max_path</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">count</span><span class="p">)</span>
        <span class="p">{</span> <span class="k">return</span> <span class="n">s</span><span class="p">;</span> <span class="p">}</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">s</span><span class="o">+</span><span class="s">&quot;/&quot;</span><span class="p">;</span>
        <span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Python代码示例</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#读取以行为单位写代码标的的文本文件 eg：SH.601211</span>
<span class="c1">#返回值：市场+标的+数据类型</span>
<span class="k">def</span> <span class="nf">read_symbol_list_txt</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">fileopen</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">fileopen</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">symbol_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">symbol_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">+</span><span class="s1">&#39;.bar&#39;</span><span class="p">)</span> <span class="c1">#逐行读取，此处可自定义订阅tick类型数据还是bar型数据</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">fileopen</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">fileopen</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">symbol_list</span>


<span class="c1">#读取含有代码标的及数据类型的文本文件 eg:[‘SH.601211.bar&#39;, &#39;SZ.000002.bar&#39;]</span>
<span class="c1">#返回值：市场+标的+数据类型</span>
<span class="k">def</span> <span class="nf">read_symbols_txt</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                        <span class="n">src_str</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>           <span class="c1">#stirp 默认去除\n \t \r   每次读取一行</span>
                        <span class="n">src_str</span> <span class="o">=</span> <span class="n">src_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#若存在，先处理取出的字符串，去除单引号等特殊字符</span>
                        <span class="n">src_str</span> <span class="o">=</span> <span class="n">src_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>     <span class="c1">#以\t的方式对每一行数据分割，并返回一个列表</span>
                <span class="k">return</span> <span class="n">src_str</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, 国泰君安证券股份有限公司.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>