2020/4/17   版本0.3.2 
（1）策略模板拆分成实盘和回测两个dll，hft.dll(实盘使用) hftbt.dll（回测与模拟使用），实盘与回测均实现的同一套接口，所以回测过的策略只需要按实盘dll重新编译即可上实盘。
（2）策略模板增加读取本地数据回测，增加回测使用体验，strategy.ini配置文件增加本地历史数据目录选项，不配置或本地路径配置为空则从远端获取数据。
（3）策略模板去掉get_last_XXX之类的接口，get时间段的历史数据接口可以实现同样功能。
（4）去掉td_open_XXX 和 td_close_XXX之类接口,td_order已经包含了此类功能。
（5）策略模板回测记录按天写入本地sqlite数据库中。
（6）更新本地sqlite数据库库表结构，在持仓表、历史持仓表、委托表、成交表中增加相应记录。
（7）底层历史数据获取接口更新，优化体验。
（8）去掉了获取财务数据接口，下一个版本再支持。

2020-04-07    版本V0.2.22更新记录：
1. 修复代码表读取不超过3000的问题
2. 获取财务数据接口增加一个输入参数视图名，用户可以使用不同的视图从不同的数据库中获取财务数据。
3. 返回数据增加成交编号

------------------------------------------------------------------------------------------
2020-03-10    版本V0.2.21更新记录：
1. 修复打开多个sqlite文件报错问题
2. 行情支持硬件行情

------------------------------------------------------------------------------------------
2020-03-02    版本V0.2.20更新记录：
1. 更新策略模板日志为异步日志
2. 支持本地实盘
3. 修复行情get_codeinfo接口问题

------------------------------------------------------------------------------------------
2020-01-16    版本V0.2.19更新记录：
1. 更新行情库，及时更新日志

------------------------------------------------------------------------------------------
2019-12-04    版本V0.2.18更新记录：
1. 回测：支持播放历史数据时将不同标的行情数据按行情时间排序
2. 回测：增加支持深交所逐笔数据撮合功能
3. 回测：增加对委托队列数据类型支持
4. 修复深圳撮合行情结构体解析错误的问题

------------------------------------------------------------------------------------------
2019-11-06    版本V0.2.17更新记录：
1. 回测：修复c++11针对浮点数取绝对值需要调用fabs问题
2. 修复TradingContext析构函数未标志为virtual问题
3. 回测：修复读取全市场缓存数据时代码表转换问题
4. 回测：增加可选的控制回测委托成交数据缓存天数配置项
    # 最多允许缓存回测委托成交数据的天数(不小于7)(默认为0，不限制)
    bt_max_orders_cache_days=10
5. 证券类型增加基金类型，ETF委托校验修改
6. Linux版本实盘需将pb库动态链接

------------------------------------------------------------------------------------------
2019-09-19    版本V0.2.16更新记录：
1. 增加dll版本号
2. 增加Linux库

------------------------------------------------------------------------------------------
2019-09-11    版本V0.2.15更新记录：
1. 回测：修复未订阅标的获取不到最新tick问题
2. 回测：优化撮合算法
3. 代码表增加基金代码表

------------------------------------------------------------------------------------------
2019-08-30    版本V0.2.14更新记录：
1. 将实时行情底层socket接收缓冲增加到512M
2. 优化实时行情组播，修复丢包问题
3. 文档增加数据结构和Q&A

------------------------------------------------------------------------------------------
2019-08-01    版本V0.2.13更新记录：
1. 回测：修复播放历史行情时偶尔出现历史数据播放不全问题
2. 回测：当委托量为100的整数倍时确保成交也为100的整数倍
3. 回测：调试历史数据内存缓存最大数量
4. 回测：修复某些情况下播放历史行情卡住的问题
5. 回测：更新撮合算法，对应盘口撮合使用下单的下一个tick的盘口进行撮合
6. 回测：修复某些情况下在委托状态更新回调中下单时收不到状态更新回调问题
7. 回测：调整回调次序，确保委托请求响应在状态更新之前先调用
8. 回测：修复某些情况下指标数据计算错误问题
9. 回测：增加设置可选的沪深每笔最小佣金配置项
10. 回测：运行将本地sqlite3数据库文件路径配置为空，跳过本地数据库读写操作

------------------------------------------------------------------------------------------
2019-07-12    版本V0.2.12更新记录：
1. 回测：测试中发现有些逐笔成交数据是错误的，暂时硬编码过滤掉错误数据
2. 回测：支持多个进程同时从缓存文件中读取数据
3. 回测：修复用缓存数据回测时某些情况下播放数据不全问题
4. 回测：增加允许关闭持仓最新价更新配置
5. 回测：修复回调函数中调用退出接口程序crash的问题
6. 回测：修复退出后历史行情缓存文件未关闭问题
7. 实盘：委托状态推送返回3个时间和成交均价

------------------------------------------------------------------------------------------
2019-07-02    版本V0.2.11更新记录：
1. 实时行情支持级联模式，前一个版本限制了rt_mode为0或者3
2. 解决回测出现挂掉问题

------------------------------------------------------------------------------------------
2019-07-01    版本V0.2.10更新记录：
1. 实时行情支持级联模式
2. 回测模拟历史行情支持本地缓存，加快多次回测使用相同历史数据的场景

------------------------------------------------------------------------------------------
2019-06-12    版本V0.2.9更新记录：
1. 实时行情支持多播模式

------------------------------------------------------------------------------------------
2019-06-03    版本V0.2.8更新记录：
1. 回测模拟：去掉锁，使用其他方式来修复上次多线程问题

------------------------------------------------------------------------------------------
2019-05-24    版本V0.2.7更新记录：
1. 回测模拟：修复一个多线程导致挂掉的问题

------------------------------------------------------------------------------------------
2019-05-22    版本V0.2.6更新记录：
1. 回测：修复历史行情播放模块在某些情况下退出前卡住的问题
2. 回测模拟：修复撮合引擎设置滑点后成交价错误问题
3. 回测模拟：修复撮合引擎处理分红配送错误问题

------------------------------------------------------------------------------------------
2019-05-17    版本V0.2.5更新记录：
1. 回测优化速度
2. 实盘增加逆回购接口
3. 解决python加载dll报错问题

------------------------------------------------------------------------------------------
2019-04-17    版本V0.2.4更新记录：
1. 回测：回测中途退出时支持从上次退出后的时间点开始续跑
2. 回测模拟：支持在配置文件中配置代码表缓存目录，示例：
   # 代码表本地缓存目录
   codetable_cache_path=D:/projects/hft-strategies/doc/cache/codetable/
3. 接口版本号带到服务端，修复日志毫秒时间输出不足3位补0

------------------------------------------------------------------------------------------
2019-04-11    版本V0.2.3更新记录：
1. 去掉examples中CMake相关文件，修改接口文档
2. 查询代码表改为从静态文件中读取，加快代码表读取速度

------------------------------------------------------------------------------------------
2019-03-30    版本V0.2.2更新记录：
1. 解决日志时间，修改为毫秒级别
2. 模拟回测：检测配置文件中的代码表列表是否包含非法代码表名，包含则返回错误。
   目前支持的代码表列表为：SHAG,SZAG,CFFEX,SHFE,DCE,CZCE,SHOP

------------------------------------------------------------------------------------------
2019-03-22    版本V0.2.0更新记录：
1. strategy_api.h中增加接口strategy_get_millseconds
2. 回测模式：增加代码表本地缓存功能，减少回测耗时
3. 模拟：增加支持代码表本地缓存功能
4. 模拟回测：将合约乘数(multiplier)写到本地库持仓表的reserve2字段

------------------------------------------------------------------------------------------
2019-03-19    版本V0.1.66更新记录：
1. 模拟支持ini文件中run_id配置和不配置两种情况
2. strategy_log每次flush，保证日志能及时写到文件

------------------------------------------------------------------------------------------
2019-03-18    版本V0.1.65更新记录：
1. 有日志时，每3秒推送一次日志到客户端
2. 返回给用户的错误消息编码统一为utf8，strategy_log接口默认输入的是utf8
3. 示例strategy.ini仅不存在时自动拷贝到exe的目录

------------------------------------------------------------------------------------------
2019-03-14    版本V0.1.64更新记录：
1. 模拟: 模拟模式第一次启动时，模拟列表新增一条记录

------------------------------------------------------------------------------------------
2019-03-14    版本V0.1.63更新记录：
1. 回测模拟: 修复持仓记录表最新价字段(reserve1)错误问题
2. 修改自动copy dll和ini命令，防止路径中有空格导致copy失败
3. 策略模板实盘登录、下单、撤单增加客户端版本号

------------------------------------------------------------------------------------------
2019-03-13    版本V0.1.62更新记录：
1. 回测模拟: 当标的正确最新价更新时更新持仓记录，最新价填入本地库持仓表的reserve1字段
2. 模拟: 不再默认连接本地网关，改为和回测一样跳过连接本地网关步骤
3. 回测模拟: 回测或模拟结束后清算所有市场，解冻资金持仓
4. 回测模拟: 修复某些情况下成交表中资金账号为空问题
5. 模拟: 修复开盘前启动时未加载到代码表问题

------------------------------------------------------------------------------------------
2019-03-13    版本V0.1.61更新记录：
1. 修改示例程序和增加示例dll和ini文件自动拷贝到exe的目录

------------------------------------------------------------------------------------------
2019-03-05    版本V0.1.60更新记录：
1. 修复模拟交易启动时字段检查的问题

------------------------------------------------------------------------------------------
2019-03-05    版本V0.1.59更新记录：
1. 策略模板和交易接口均对交易账号字段错误做基本检查，及时返回错误
2. 修复取消订阅接口无法取消订阅queue、fast等行情数据的问题
3. 修复模拟交易手工下单全部成交的委托，没有成交均价的问题
4. 策略模板实盘登陆、下单、撤单带上硬盘序列号

------------------------------------------------------------------------------------------
2019-02-01    版本V0.1.58更新记录：
1. 修复回测和模拟，get_order接口未返回正确错误码问题
2. 针对回测和模拟，撤单委托将被撤委托的资金账号、委托量、委托价等字段填入撤单委托对应字段
3. 更新c++文档

------------------------------------------------------------------------------------------
2019-01-30    版本V0.1.57更新记录：
1. 实盘支持顶点适配器需要的分支机构编码
2. 增加自定义指标查询
3. 修复模拟交易非交易时间段报"标的代码为空"的错误
4. 模拟和回测的出错信息返回给用户，windows上使用gbk，linux上使用utf8
5. 修复simple_strategy示例策略未正常停止问题

------------------------------------------------------------------------------------------
2019-01-17    版本V0.1.56更新记录：
1. 加回hft_strerror_utf8接口，python需要使用
2. 增加strategy_log参数支持python的log在windows和linux均为utf8

------------------------------------------------------------------------------------------
2019-01-17    版本V0.1.55更新记录：
1. 修复异步执行退出的时候可能挂掉的问题
2. 实盘下单撤单接口增加login_account_id等参数支持不同柜台
3. 策略模板和交易日志文件编码统一改为UTF8，hft_strerror接口保持不变
4. strategy_init接口config_dir和log_dir编码改为UTF8

------------------------------------------------------------------------------------------
2019-01-08    版本V0.1.54更新记录：
1. 修复模拟模式下单后一直待报问题
2. td_get_position增加资金账号条件查询
3. 交易API登录量化网关增加login_account_id等参数支持不同柜台登录

------------------------------------------------------------------------------------------
2019-01-03    版本V0.1.53更新记录：
1. 修改examples中VS工程的编译选项/MD为/MT

------------------------------------------------------------------------------------------
2018-12-28    版本V0.1.52更新记录：
1. 将配置中的runname写入本地数据库name字段
2. 将api中Order::filled_market_value字段填入本地库hftorder.value_turnover字段
3. 修复本地库更新hftorder表失败问题
4. 调整回测引擎初始化顺序，保证初始化时获取的代码表为第一个交易日的代码表

------------------------------------------------------------------------------------------
2018-12-26    版本V0.1.51更新记录：
1. 回测模式，更新持仓时，删除持仓表中持仓量为0的记录
2. 回测模式，对于沪深市场，计算佣金时，不满5元的按5元收取
3. 回测模式，修复在某些情况下，收盘后委托可能成交的情况
4. 回测模式，调用get_last_xx时，在接口中将市场代码转为大写，修复之前市场代码小写时取不到数据的情况

------------------------------------------------------------------------------------------
2018-12-12    版本V0.1.50更新记录：
1. 增加实时的fast撮合行情和委托队列行情接口
2. 更新文档中行情的可订阅数据类型以及订阅接口
3. 将代码表更新从启动时一次性下载回测区间所有代码表改为每天获取当天代码表
4. 修复回测引擎中涨跌停价格未起作用问题

------------------------------------------------------------------------------------------
2018-12-11    版本V0.1.49更新记录：
1. 修复行情快照传到撮合引擎时忘了填充前收盘价问题
    回测和模拟的初始持仓成本价开盘前用昨收价，开盘后用最新价
2. 修复本地db打开失败时，更新实例状态挂掉的问题

------------------------------------------------------------------------------------------
2018-12-10    版本V0.1.48更新记录：
1. 回测和模拟增加回测区间设置、回测当前时间更新，支持回测进度在客户端展示
2. 针对初始持仓填充持仓成本价为第一条行情快照中的最新价
3. 修复持仓成本价精度问题
4. examples增加VS工程配置，移动example1、example2、example3到test目录

------------------------------------------------------------------------------------------
2018-12-05    版本V0.1.47更新记录：
1. 修复回测成交的持仓未解冻问题

------------------------------------------------------------------------------------------
2018-11-29    版本V0.1.46更新记录：
1. 修复模拟交易成交回报里，资金账号空白
2. 修复模拟委托回报，手动下的单子会变成策略再下一遍
3. 修复分钟回测未成交问题
4. 修复撤单委托状态和方向不对问题
5. 修复配置中的db路径包含中文，初始化报错问题
6. 优化回测代码表加载，使得回测和模拟初始化更快

------------------------------------------------------------------------------------------
2018-11-05    版本V0.1.45更新记录：
1. 修复bt_frequency=3时报错
2. 修复模拟交易不成交问题
3. 增加策略当前磁盘使用率报告

------------------------------------------------------------------------------------------
2018-11-02    版本V0.1.44更新记录：
1. 解决行情初始化失败时，trade_interface_为空会挂掉的问题
2. 解析配置时判断run_mode是否合法

------------------------------------------------------------------------------------------
2018-10-31    版本V0.1.43更新记录：
1. 调大示例程序默认栈空间大小，解决Debug版本模拟时栈空间溢出问题
2. 修复db文件不存在或者table schema不对时报错，而不是直接挂掉

------------------------------------------------------------------------------------------
2018-10-31    版本V0.1.42更新记录：
1. 修复回测时，下单请求包含不可用的账户时会挂掉的问题
2. 回测增加日期更新回调
3. 修复全市场行情播放问题

------------------------------------------------------------------------------------------
2018-10-29    版本V0.1.41更新记录：
1. 回测非交易日下单返回非交易时间段错误码
2. 回测时策略名称写入表中
3. 增加strategy_json_config接口获取配置的json字符串形式
4. 修复日志目录非默认时，交易日志文件创建失败的问题
5. 回测修复全市场行情播放出错问题
6. 提高一部分回测效率

------------------------------------------------------------------------------------------
2018-10-27    版本V0.1.40更新记录：
1. 回测order_id使用'_'替换'.'
2. 支持tradetime.xml和holidayinfo.txt配置文件从服务器下载
3. strategy_api增加日志目录参数，支持指定配置目录和日志目录

------------------------------------------------------------------------------------------
2018-10-25     版本V0.1.39更新记录：
1. 修复回测时，股票下单方向
2. 修复回测时get_last_security_nkdata获取数据时间方向问题
3. 修复日任务回调，时间参数精度由毫秒变成秒

------------------------------------------------------------------------------------------
2018-10-23     版本V0.1.38更新记录：
1. 回测的GetCodeList、GetTradedate、GetQxdata接口暂时不能检查入参日期时间
2. 修复enable_debug字段去掉后，回测模式时不去连本地agent

------------------------------------------------------------------------------------------
2018-10-23     版本V0.1.37更新记录：
1. 修复从V0.1.33版本引入停止策略时，800904上报的状态不对问题
2. 回测和模拟的bt_init_positions去掉开仓均价字段
3. 回测的一些接口增加日期时间判断，避免回测时取到未来数据
4. 配置文件去掉enable_debug和account_list，不支持本地实盘测试

------------------------------------------------------------------------------------------
2018-10-19     版本V0.1.36更新记录：
1. 更新行情dll，修复字符串为NULL时使用strlen引起异常的错误

------------------------------------------------------------------------------------------
2018-10-18     版本V0.1.35更新记录：
1. 由于底层kdc客户端库更新，更新行情dll

------------------------------------------------------------------------------------------
2018-10-18     版本V0.1.34更新记录：
1. 修复异步撤单cancel_order_id未赋值问题
2. 修改接口字段名，修改get_security_kdata和get_tradedate日期区间为左闭右闭区间
3. API文档同步更新

------------------------------------------------------------------------------------------
2018-10-16     版本V0.1.33更新记录：
1. 支持strategy_exit可以在回调函数中调用，Debug版本增加策略发送消息的详细信息

------------------------------------------------------------------------------------------
2018-10-15     版本V0.1.32更新记录：
1. 修复行情日志更新通知
   因为callback还未设置，行情消息已经收到，解决办法是先将行情消息存起来再通知

------------------------------------------------------------------------------------------
2018-10-13     版本V0.1.31更新记录：
1. 策略上报状态800906增加start_date和end_date字段，更新交易接口日志
2. 增加市场日期更新回调接口md_set_date_update_callback

------------------------------------------------------------------------------------------
2018-10-08     版本V0.1.30更新记录：
1. 修复K线计算返回结果中缺失code字段内容的问题
2. 回测模式时，get_last_xxx_nticks接口使用缓存中的数据

------------------------------------------------------------------------------------------
2018-09-28     版本V0.1.29更新记录：
1. 修复获取财务数据超时的问题（引发7008的错误）
2. 更新libkdc静态库的封装（解决返回财务数据空记录集会出现异常的问题）

------------------------------------------------------------------------------------------
2018-09-27     版本V0.1.28更新记录：
1. 修复get_codelist在默认参数为true时结束日期没数据的bug
2. 获取代码表tick数据只返回一只标的数据的问题在历史行情服务端升级后也解决了

------------------------------------------------------------------------------------------
2018-09-27     版本V0.1.27更新记录：
1. 回测将全市场订阅SH.*以及SZ.*转换为SHAG.*,SZAG.*从历史服务器获取行情数据
2. 修复回测中交易时间段控制的一个bug（该bug会导致回测跨过周末后保存hisaccount失败）
3. 回测处理中，将订阅字符串中的市场代码转为大写 数据类型转为小写，修复全市场订阅时大小写不匹配导致的回调函数没有调用的情况
4. 将日内回测收益数据写到本地数据库的gaindata表

------------------------------------------------------------------------------------------
2018-09-20     版本V0.1.26更新记录：
1. 增加根据登录用户来区分获取的行情是否为level1还是level2

------------------------------------------------------------------------------------------
2018-09-20     版本V0.1.25更新记录：
1. 修复get_codelist用之前数据覆盖的问题

------------------------------------------------------------------------------------------
2018-09-20     版本V0.1.24更新记录：
1. 行情头文件和dll不匹配，将CodeInfo结构中的uIsHalt用8字节无符号int存储
2. get_codelist中删除多次调用中的缓存

------------------------------------------------------------------------------------------
2018-09-19     版本V0.1.23更新记录：
1. get_codelist接口更新，增加begin_date和end_date，支持查询一段时间内的代码表
2. OrderReq结构体去掉不使用的4个字段：trade_seqno, order_status, entrust_time, finish_time
3. td_order接口char sync入参改为int async，保持跟其他策略模板接口一致
4. td_get_cash接口去掉account_type入参，account_type入参目前没有使用到

------------------------------------------------------------------------------------------
2018-09-19     版本V0.1.22更新记录：
1. strategy_init支持可配置ini路径，ini文件支持配置log路径和级别
2. 回测和模拟增加指标计算
3. 增加逐笔行情和获取策略时间接口

------------------------------------------------------------------------------------------
2018-09-14     版本V0.1.21更新记录：
1. 更新行情dll，解决get_fundmental_*接口拼写错误，解决get_security_kdata数据结构和dll不匹配错误

------------------------------------------------------------------------------------------
2018-09-13     版本V0.1.20更新记录：
1. 修复异步下单委托应答偶尔没有的问题
2. 修改OrderRspCallback和CancelOrderCallback定义，支持批量下单和撤单的应答一次回调

------------------------------------------------------------------------------------------
2018-09-11     版本V0.1.19更新记录：
1. 更新V0.1.18中函数名没改成td_set_order_rsp_callback，导致策略模板返回9012
2. 修复加载失败时，log文件中输出的错误消息有一个detail错误消息没有初始化，导致乱码问题

------------------------------------------------------------------------------------------
2018-09-11     版本V0.1.18更新记录：
1. 删掉td_set_trade_error_callback接口和TradeErrorCallback定义
2. OrderReturn结构改名为OrderRsp，OrderRtnCallback改名为OrderRspCallback
3. td_set_order_return_callback改名为td_set_order_rsp_callback
4. Order、OrderReq、Position、Trade结构中product_id改名为symbol，与行情保持一致
5. 下单接口cl_order_id为空或者NULL，均判定为异步下单
6. 解决交易API中响应和推送的消息对象泄露问题
7. 修改交易API中date格式为YYYY/MM/DD，与行情接口保持一致
8. md_def.h中Tick行情相关结构体字段名修改，保持字段名称一致
9. md_api.h中接口形参名称修改，保持与其他接口一致
10. 更新策略模板错误码头文件
11. 更新API文档
12. 回测和模拟修复一些问题（宁老师修复）

------------------------------------------------------------------------------------------
2018-09-06     版本V0.1.17更新记录：
1. 模拟和回测策略运行时，更新update_time时间，为策略异常退出后，状态改为停止作判断条件

------------------------------------------------------------------------------------------
2018-09-06     版本V0.1.16更新记录：
1. 模拟和回测的当日委托表中存的err_msg使用UTF8编码
2. 模拟和回测的策略实例启动和停止时间以及策略状态更新到数据库

------------------------------------------------------------------------------------------
2018-09-05     版本V0.1.15更新记录：
1. mdapi tdapi的dll加载时，当前目录能找到就使用当前目录的dll，否则相对可执行程序的路径
2. 修复模拟下单导致策略退出，退出时错误码是9001
3. 修复模拟撮合其他问题（宁老师修复）

------------------------------------------------------------------------------------------
2018-09-05     版本V0.1.14更新记录：
1. 修改模拟和实盘run_mode以配置文件为准，813012、820012消息的run_mode为辅的逻辑

------------------------------------------------------------------------------------------
2018-09-04     版本V0.1.13更新记录：
1. 回测和模拟，修复撮合引擎有些问题

------------------------------------------------------------------------------------------
2018-09-04     版本V0.1.12更新记录：
1. 回测模拟成交日期字段不对，实盘交易API返回后台错误消息
2. 更新回测和模拟的813030和812030功能号不对